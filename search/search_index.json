{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"dai's blog","title":"dai's blog"},{"location":"#dais-blog","text":"","title":"dai's blog"},{"location":"blogs/2020-04-09---blog-setup/","tags":["Tech"],"text":"\u3053\u306e\u30d6\u30ed\u30b0\u306e\u69cb\u7bc9\u306f\u3058\u3081\u3002 \u52d5\u6a5f Qiita \u3067\u66f8\u3044\u3066\u305f\u3093\u3060\u3051\u3069\u3082\u3001\u6700\u8fd1\u306e\u884c\u52d5\u306f\u5408\u308f\u306a\u304f\u306a\u3063\u3066\u304d\u305f\u3002 https://www.itmedia.co.jp/news/articles/1912/26/news121.html \u30c6\u30c3\u30af\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u306f\u5bb9\u8d66\u7121\u3044\u6279\u5224\u3092\u6d74\u3073\u305b\u308b\u3082\u306e\u3060\u304c\u3001 \u305d\u3046\u3044\u3046\u9762\u5012\u81ed\u3044\u5074\u9762\u306b\u771f\u646f\u306b\u5411\u304d\u5408\u308f\u305a\u306b\u4e0a\u6f84\u307f\u3060\u3051\u4eab\u53d7\u3057\u3088\u3046\u3068\u3044\u3046\u611f\u3058\u3092\u53d7\u3051\u305f\u3002 https://www.itmedia.co.jp/news/articles/2003/26/news087.html \u500b\u4eba\u60c5\u5831\u30d3\u30b8\u30cd\u30b9 \u3068\u3044\u3046\u308f\u3051\u3067\u5f15\u3063\u8d8a\u3059\u3002 Markdown \u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067 Markdown \u304c\u4f7f\u3044\u305f\u3044\u3002 \u6570\u5f0f\u3082\u3002 \u3068\u3044\u3046\u6761\u4ef6\u3067\u6f01\u308b\u3002 \u5f53\u521d\u306f GitHub Pages \u3092\u8a66\u307f\u305f\u304c\u3001\u6570\u5f0f\u3092\u4f7f\u3046\u306e\u306b\u3072\u3068\u624b\u9593\u304b\u304b\u308b\u3088\u3046\u3060\u3002 \u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u8d70\u3089\u305b\u308b\u306e\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u524d\u306b\u78ba\u8a8d\u3059\u308b\u306b\u306f\u30ed\u30fc\u30ab\u30eb\u306b\u74b0\u5883\u6574\u3048\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 \u3068\u3044\u3063\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306a\u3069\u306f\u5236\u9650\u3055\u308c\u3066\u3044\u3066\u3001\u81ea\u7531\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u308f\u3051\u3067\u3082\u306a\u3044\u3002 \u304a\u4efb\u305b\u306f\u8ae6\u3081\u3066\u3001\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u9759\u7684\u30da\u30fc\u30b8\u4f5c\u3063\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3084\u308a\u65b9\u306b\u3059\u308b\u3002 Gatsby \u3068\u3044\u3046\u306e\u304c\u3001SPA \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u7684\u306a\u3082\u306e\u3089\u3057\u3044\u3002\u9762\u767d\u305d\u3046\u3067\u3042\u308b\u3002 \u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306f GitOps \u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u3089\u3057\u3044 Netlify \u3092\u4f7f\u3063\u3066\u307f\u308b\u3002 \u958b\u767a\u74b0\u5883\u69cb\u7bc9 1. github repository \u30ea\u30dd\u30b8\u30c8\u30eb\u4f5c\u3063\u3068\u304f\u3002 \u4eca\u56de\u306f gatsby-cli \u3092\u30ed\u30fc\u30ab\u30eb\u306b\u5165\u308c\u308b\u3002 gatsby-cli \u3092\u5165\u308c\u305f node \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4e0b\u306b\u3001gatsby \u7528\u306e node \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u308b\u3002gatsby \u7528\u306e\u3068\u3053\u308d\u304c git \u30ea\u30dd\u30b8\u30c8\u30ea\u3002 1 2 $ mkdir workdir ; cd workdir $ git clone git@github.com:dai1975/blog 2. Node.js Node.js \u3092\u5165\u308c\u308b\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u6700\u8fd1\u306e\u306a\u3089\u554f\u984c\u306a\u3055\u3052\u3067\u3001\u6700\u65b0\u306e 13.8.0 \u306b\u3059\u308b\u3002 \u3046\u3061\u306f anyenv \u4f7f\u3063\u3066\u308b\u306e\u3067\u3001 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ nodenv install 13 .8.0 $ nodenv local 13 .8.0 $ node --version v13.8.0 $ npm --version 6 .13.6 $ npm init package name: ( workdir ) version: ( 1 .0.0 ) description: entry point: ( index.js ) test command: git repository: keywords: author: license: ( ISC ) About to write to /home/dai/d/workdir/package.json: Is this OK? ( yes ) 3. Gastby gatsby-cli 1 $ npm install gatsby-cli -g \u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u5165\u308c\u308c\u3070 gatsby \u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u308b\u3002 \u30ed\u30fc\u30ab\u30eb\u306b\u5165\u308c\u305f\u306e\u3067\u3001 npx gatsby \u306b\u306a\u308b\u3002\u4ee5\u5f8c gatsby \u3068\u306e\u307f\u66f8\u304f\u306e\u3067\u6ce8\u610f\u3002 \u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8 1 $ gatsby new <site-name> [ starter url ] \u3068\u6253\u3064\u3002 \u30b9\u30bf\u30fc\u30bf\u30fc\u306f https://www.gatsbyjs.org/starters/?v=2 \u306b\u8272\u3005\u3042\u308b\u3002 \u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3082\u691c\u7d22\u3067\u304d\u308b\u3002 \u6570\u5f0f\u4f7f\u3048\u305d\u3046\u306a gatsby-remark-katex \u3063\u3066\u306e\u304c\u3042\u3063\u305f\u304b\u3089\u3001\u3053\u308c\u4f9d\u5b58\u3057\u3066\u308b\u3084\u3064\u3067\u3002 https://www.gatsbyjs.org/starters/alxshelepenok/gatsby-starter-lumen/ \u304c\u3088\u3044\u306a\u3002 starter URL \u306f https://github.com/alxshelepenok/gatsby-starter-lumen 1 $ gatsby new blog https://github.com/alxshelepenok/gatsby-starter-lumen dev server 1 $ gatsby develop \u3067\u30ed\u30fc\u30ab\u30eb 8000 \u756a\u306b\u30b5\u30fc\u30d3\u30b9\u3059\u308b\u3002 production 1 $ gatsby build \u3067 public/ \u306b\u51fa\u529b\u3055\u308c\u308b\u3002develop \u3068\u9055\u3044\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u9069\u5316\u306a\u3069\u3055\u308c\u3066\u3044\u308b\u3002 public/ \u306e\u78ba\u8a8d\u3057\u305f\u3051\u308c\u3070\u3001 gatsby serve \u958b\u767a config.js URL \u3068\u304b\u30bf\u30a4\u30c8\u30eb\u3068\u304b\u306f\u3053\u3053\u306b\u66f8\u304f\u3088\u3046\u3060\u3002 \u9069\u5f53\u306b\u7de8\u96c6\u3057\u3066\u4fdd\u5b58\u3002 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306f static/ \u4ee5\u4e0b\u306b\u7f6e\u304d\u3001public/ \u306b\u30b3\u30d4\u30fc\u3055\u308c\u308b\u3088\u3046\u3067\u3042\u308b\u3002 photo.jpg \u306e\u540d\u524d\u3092\u5909\u3048\u3066 /static/photo.jpg \u3092\u6d88\u3057\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002 \u6c7a\u3081\u6253\u3061\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306a\u3069\u306f\u3042\u307e\u308a\u5909\u66f4\u3057\u306a\u3044\u65b9\u304c\u3088\u3055\u305d\u3046\u3060\u3002 content/posts/ \u30d6\u30ed\u30b0\u8a18\u4e8b\u306f\u3053\u3053\u306b\u7f6e\u304f\u3088\u3046\u3060\u3002 \u5148\u982d\u90e8\u5206\u306b yaml \u3067\u8a2d\u5b9a\u3092\u66f8\u3051\u308b\u3002 \u8a2d\u5b9a\u306e\u8a73\u7d30\u306f\u307e\u305f\u8abf\u3079\u308b\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3044\u304f\u3064\u304b\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u6d88\u3059\u3002 \u30d5\u30a1\u30a4\u30eb\u540d\u304c YYYY-DD-MM---title.md \u306b\u3044\u306a\u3063\u3066\u308b\u3051\u3069\u547d\u540d\u898f\u7d04\u306a\u3093\u3060\u308d\u3046\u304b\u3002 content/page/ \u6642\u7cfb\u5217\u3067\u306a\u3044\u8a18\u4e8b\u306e\u7f6e\u304d\u5834\u6240\u304b\u306a\u3002 \u30c7\u30d7\u30ed\u30a4 Netlify Netlify \u306e\u30b5\u30a4\u30c8\u3067 \"new site from git\" \u3092\u9078\u629e\u3002 GitHub \u3092\u9078\u629e\u3002\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u306e\u3067\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3002 \u30ea\u30dd\u30b8\u30c8\u30ea\u9078\u629e\u3002\u307e\u305a GitHub \u3078\u98db\u3093\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3002\u7d9a\u3044\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u9078\u3076\u3002 \u30d6\u30e9\u30f3\u30c1\u3092\u9078\u629e\u3002Build command \u306b \"gatsby build\", Publish directory \u306b \"public\" \u3092\u5165\u529b\u3002 gatsby \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f \"npm run build\" \u306b\u306a\u3063\u3066\u3044\u308b\u3002gatsby build \u306f production \u7528\u3067\u6700\u9069\u5316\u3055\u308c\u308b\u3089\u3057\u3044\u3002 gatsby \u306e\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8\u306b netlify.toml \u304c\u3042\u308a\u3001\u3053\u3063\u3061\u304c\u4f7f\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044 \u3042\u3068\u306f master \u306b push \u3059\u308c\u3070\u81ea\u52d5\u7684\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 \u6570\u5f0f \u809d\u5fc3\u304b\u306a\u3081\u306e\u6570\u5f0f\u3002 \u30a4\u30f3\u30e9\u30a4\u30f3\u6570\u5f0f\u306f $...$ \u3067\u62ec\u308b(Qiita \u3068\u540c\u3058)\u3002 \u8907\u6570\u884c\u6570\u5f0f\u306f Qiita \u3067\u306f ```math...``` \u3067\u62ec\u3063\u3066\u3044\u305f\u304c\u3001KaTeX \u3067\u306f $$..$$ \u3067\u62ec\u308b\u3002 \u8907\u6570\u884c\u306e\u6841\u63c3\u3048\u306f `\\begin{aligned}..\\end{aligned}","title":"\u30d6\u30ed\u30b0\u69cb\u7bc9"},{"location":"blogs/2020-04-09---blog-setup/#_1","text":"Qiita \u3067\u66f8\u3044\u3066\u305f\u3093\u3060\u3051\u3069\u3082\u3001\u6700\u8fd1\u306e\u884c\u52d5\u306f\u5408\u308f\u306a\u304f\u306a\u3063\u3066\u304d\u305f\u3002 https://www.itmedia.co.jp/news/articles/1912/26/news121.html \u30c6\u30c3\u30af\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306b\u306f\u5bb9\u8d66\u7121\u3044\u6279\u5224\u3092\u6d74\u3073\u305b\u308b\u3082\u306e\u3060\u304c\u3001 \u305d\u3046\u3044\u3046\u9762\u5012\u81ed\u3044\u5074\u9762\u306b\u771f\u646f\u306b\u5411\u304d\u5408\u308f\u305a\u306b\u4e0a\u6f84\u307f\u3060\u3051\u4eab\u53d7\u3057\u3088\u3046\u3068\u3044\u3046\u611f\u3058\u3092\u53d7\u3051\u305f\u3002 https://www.itmedia.co.jp/news/articles/2003/26/news087.html \u500b\u4eba\u60c5\u5831\u30d3\u30b8\u30cd\u30b9 \u3068\u3044\u3046\u308f\u3051\u3067\u5f15\u3063\u8d8a\u3059\u3002 Markdown \u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067 Markdown \u304c\u4f7f\u3044\u305f\u3044\u3002 \u6570\u5f0f\u3082\u3002 \u3068\u3044\u3046\u6761\u4ef6\u3067\u6f01\u308b\u3002 \u5f53\u521d\u306f GitHub Pages \u3092\u8a66\u307f\u305f\u304c\u3001\u6570\u5f0f\u3092\u4f7f\u3046\u306e\u306b\u3072\u3068\u624b\u9593\u304b\u304b\u308b\u3088\u3046\u3060\u3002 \u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u8d70\u3089\u305b\u308b\u306e\u3067\u3001\u30c7\u30d7\u30ed\u30a4\u524d\u306b\u78ba\u8a8d\u3059\u308b\u306b\u306f\u30ed\u30fc\u30ab\u30eb\u306b\u74b0\u5883\u6574\u3048\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 \u3068\u3044\u3063\u3066\u30d7\u30e9\u30b0\u30a4\u30f3\u306a\u3069\u306f\u5236\u9650\u3055\u308c\u3066\u3044\u3066\u3001\u81ea\u7531\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u308f\u3051\u3067\u3082\u306a\u3044\u3002 \u304a\u4efb\u305b\u306f\u8ae6\u3081\u3066\u3001\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3067\u9759\u7684\u30da\u30fc\u30b8\u4f5c\u3063\u3066\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3084\u308a\u65b9\u306b\u3059\u308b\u3002 Gatsby \u3068\u3044\u3046\u306e\u304c\u3001SPA \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u7684\u306a\u3082\u306e\u3089\u3057\u3044\u3002\u9762\u767d\u305d\u3046\u3067\u3042\u308b\u3002 \u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306f GitOps \u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u3089\u3057\u3044 Netlify \u3092\u4f7f\u3063\u3066\u307f\u308b\u3002","title":"\u52d5\u6a5f"},{"location":"blogs/2020-04-09---blog-setup/#_2","text":"","title":"\u958b\u767a\u74b0\u5883\u69cb\u7bc9"},{"location":"blogs/2020-04-09---blog-setup/#1-github-repository","text":"\u30ea\u30dd\u30b8\u30c8\u30eb\u4f5c\u3063\u3068\u304f\u3002 \u4eca\u56de\u306f gatsby-cli \u3092\u30ed\u30fc\u30ab\u30eb\u306b\u5165\u308c\u308b\u3002 gatsby-cli \u3092\u5165\u308c\u305f node \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4e0b\u306b\u3001gatsby \u7528\u306e node \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u308b\u3002gatsby \u7528\u306e\u3068\u3053\u308d\u304c git \u30ea\u30dd\u30b8\u30c8\u30ea\u3002 1 2 $ mkdir workdir ; cd workdir $ git clone git@github.com:dai1975/blog","title":"1. github repository"},{"location":"blogs/2020-04-09---blog-setup/#2-nodejs","text":"Node.js \u3092\u5165\u308c\u308b\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u6700\u8fd1\u306e\u306a\u3089\u554f\u984c\u306a\u3055\u3052\u3067\u3001\u6700\u65b0\u306e 13.8.0 \u306b\u3059\u308b\u3002 \u3046\u3061\u306f anyenv \u4f7f\u3063\u3066\u308b\u306e\u3067\u3001 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ nodenv install 13 .8.0 $ nodenv local 13 .8.0 $ node --version v13.8.0 $ npm --version 6 .13.6 $ npm init package name: ( workdir ) version: ( 1 .0.0 ) description: entry point: ( index.js ) test command: git repository: keywords: author: license: ( ISC ) About to write to /home/dai/d/workdir/package.json: Is this OK? ( yes )","title":"2. Node.js"},{"location":"blogs/2020-04-09---blog-setup/#3-gastby","text":"","title":"3. Gastby"},{"location":"blogs/2020-04-09---blog-setup/#gatsby-cli","text":"1 $ npm install gatsby-cli -g \u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u5165\u308c\u308c\u3070 gatsby \u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u308b\u3002 \u30ed\u30fc\u30ab\u30eb\u306b\u5165\u308c\u305f\u306e\u3067\u3001 npx gatsby \u306b\u306a\u308b\u3002\u4ee5\u5f8c gatsby \u3068\u306e\u307f\u66f8\u304f\u306e\u3067\u6ce8\u610f\u3002","title":"gatsby-cli"},{"location":"blogs/2020-04-09---blog-setup/#_3","text":"1 $ gatsby new <site-name> [ starter url ] \u3068\u6253\u3064\u3002 \u30b9\u30bf\u30fc\u30bf\u30fc\u306f https://www.gatsbyjs.org/starters/?v=2 \u306b\u8272\u3005\u3042\u308b\u3002 \u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3082\u691c\u7d22\u3067\u304d\u308b\u3002 \u6570\u5f0f\u4f7f\u3048\u305d\u3046\u306a gatsby-remark-katex \u3063\u3066\u306e\u304c\u3042\u3063\u305f\u304b\u3089\u3001\u3053\u308c\u4f9d\u5b58\u3057\u3066\u308b\u3084\u3064\u3067\u3002 https://www.gatsbyjs.org/starters/alxshelepenok/gatsby-starter-lumen/ \u304c\u3088\u3044\u306a\u3002 starter URL \u306f https://github.com/alxshelepenok/gatsby-starter-lumen 1 $ gatsby new blog https://github.com/alxshelepenok/gatsby-starter-lumen","title":"\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8"},{"location":"blogs/2020-04-09---blog-setup/#dev-server","text":"1 $ gatsby develop \u3067\u30ed\u30fc\u30ab\u30eb 8000 \u756a\u306b\u30b5\u30fc\u30d3\u30b9\u3059\u308b\u3002","title":"dev server"},{"location":"blogs/2020-04-09---blog-setup/#production","text":"1 $ gatsby build \u3067 public/ \u306b\u51fa\u529b\u3055\u308c\u308b\u3002develop \u3068\u9055\u3044\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u9069\u5316\u306a\u3069\u3055\u308c\u3066\u3044\u308b\u3002 public/ \u306e\u78ba\u8a8d\u3057\u305f\u3051\u308c\u3070\u3001 gatsby serve","title":"production"},{"location":"blogs/2020-04-09---blog-setup/#_4","text":"","title":"\u958b\u767a"},{"location":"blogs/2020-04-09---blog-setup/#configjs","text":"URL \u3068\u304b\u30bf\u30a4\u30c8\u30eb\u3068\u304b\u306f\u3053\u3053\u306b\u66f8\u304f\u3088\u3046\u3060\u3002 \u9069\u5f53\u306b\u7de8\u96c6\u3057\u3066\u4fdd\u5b58\u3002 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306f static/ \u4ee5\u4e0b\u306b\u7f6e\u304d\u3001public/ \u306b\u30b3\u30d4\u30fc\u3055\u308c\u308b\u3088\u3046\u3067\u3042\u308b\u3002 photo.jpg \u306e\u540d\u524d\u3092\u5909\u3048\u3066 /static/photo.jpg \u3092\u6d88\u3057\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002 \u6c7a\u3081\u6253\u3061\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306a\u3069\u306f\u3042\u307e\u308a\u5909\u66f4\u3057\u306a\u3044\u65b9\u304c\u3088\u3055\u305d\u3046\u3060\u3002","title":"config.js"},{"location":"blogs/2020-04-09---blog-setup/#contentposts","text":"\u30d6\u30ed\u30b0\u8a18\u4e8b\u306f\u3053\u3053\u306b\u7f6e\u304f\u3088\u3046\u3060\u3002 \u5148\u982d\u90e8\u5206\u306b yaml \u3067\u8a2d\u5b9a\u3092\u66f8\u3051\u308b\u3002 \u8a2d\u5b9a\u306e\u8a73\u7d30\u306f\u307e\u305f\u8abf\u3079\u308b\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3044\u304f\u3064\u304b\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u6d88\u3059\u3002 \u30d5\u30a1\u30a4\u30eb\u540d\u304c YYYY-DD-MM---title.md \u306b\u3044\u306a\u3063\u3066\u308b\u3051\u3069\u547d\u540d\u898f\u7d04\u306a\u3093\u3060\u308d\u3046\u304b\u3002","title":"content/posts/"},{"location":"blogs/2020-04-09---blog-setup/#contentpage","text":"\u6642\u7cfb\u5217\u3067\u306a\u3044\u8a18\u4e8b\u306e\u7f6e\u304d\u5834\u6240\u304b\u306a\u3002","title":"content/page/"},{"location":"blogs/2020-04-09---blog-setup/#_5","text":"","title":"\u30c7\u30d7\u30ed\u30a4"},{"location":"blogs/2020-04-09---blog-setup/#netlify","text":"Netlify \u306e\u30b5\u30a4\u30c8\u3067 \"new site from git\" \u3092\u9078\u629e\u3002 GitHub \u3092\u9078\u629e\u3002\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u306e\u3067\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3002 \u30ea\u30dd\u30b8\u30c8\u30ea\u9078\u629e\u3002\u307e\u305a GitHub \u3078\u98db\u3093\u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3002\u7d9a\u3044\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u9078\u3076\u3002 \u30d6\u30e9\u30f3\u30c1\u3092\u9078\u629e\u3002Build command \u306b \"gatsby build\", Publish directory \u306b \"public\" \u3092\u5165\u529b\u3002 gatsby \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f \"npm run build\" \u306b\u306a\u3063\u3066\u3044\u308b\u3002gatsby build \u306f production \u7528\u3067\u6700\u9069\u5316\u3055\u308c\u308b\u3089\u3057\u3044\u3002 gatsby \u306e\u30dc\u30a4\u30e9\u30fc\u30d7\u30ec\u30fc\u30c8\u306b netlify.toml \u304c\u3042\u308a\u3001\u3053\u3063\u3061\u304c\u4f7f\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044 \u3042\u3068\u306f master \u306b push \u3059\u308c\u3070\u81ea\u52d5\u7684\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002","title":"Netlify"},{"location":"blogs/2020-04-09---blog-setup/#_6","text":"\u809d\u5fc3\u304b\u306a\u3081\u306e\u6570\u5f0f\u3002 \u30a4\u30f3\u30e9\u30a4\u30f3\u6570\u5f0f\u306f $...$ \u3067\u62ec\u308b(Qiita \u3068\u540c\u3058)\u3002 \u8907\u6570\u884c\u6570\u5f0f\u306f Qiita \u3067\u306f ```math...``` \u3067\u62ec\u3063\u3066\u3044\u305f\u304c\u3001KaTeX \u3067\u306f $$..$$ \u3067\u62ec\u308b\u3002 \u8907\u6570\u884c\u306e\u6841\u63c3\u3048\u306f `\\begin{aligned}..\\end{aligned}","title":"\u6570\u5f0f"},{"location":"blogs/2020-04-11---unreal_engine/","tags":["Tech","UE4"],"text":"\u306f\u3058\u3081\u306b \u4e00\u6708\u306b\u80ba\u708e\u3084\u3063\u3066\u304b\u3089\u3001FF14 \u3060\u5728\u5b85\u52e4\u52d9\u3060\u3068\u5fd9\u3057\u304f\u5275\u4f5c\u8133\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3002 \u3088\u3046\u3084\u304f\u843d\u3061\u3064\u3044\u3066\u304d\u305f\u306e\u3067\u8da3\u5473\u30d7\u30ed\u3092\u518d\u958b\u3057\u305f\u3044\u3002 Bitcoin \u306e\u30c4\u30fc\u30eb\u3082\u3084\u3089\u306a\u304d\u3083\u3060\u304c\u3001\u3061\u3087\u3063\u3068\u65b0\u3057\u3044\u306e\u3084\u308a\u305f\u3044\u6c17\u5206\u3002 \u524d\u3005\u304b\u3089\u5fc3\u306e\u3084\u308a\u305f\u3044\u4e8b\u30ea\u30b9\u30c8\u306b\u8f09\u3063\u3066\u3044\u305f 3D \u3092\u68da\u5378\u3057\u3002 \u3068\u3044\u3046\u308f\u3051\u3067 Unreal Engine \u3084\u3063\u3066\u307f\u3088\u3046\u3002 \u3067\u304d\u308c\u3070\u30b2\u30fc\u30e0\u4f5c\u308c\u308c\u3070\u3044\u3044\u3051\u3069\u3082\u3001\u5f53\u9762\u306e\u76ee\u6a19\u306f 3D \u30e2\u30c7\u30eb\u52d5\u304b\u3059\u3068\u3053\u308d\u304b\u306a\u3002 VR \u30d8\u30c3\u30c9\u30bb\u30c3\u30c8\u3084 LookingGlass \u304c\u3082\u3063\u305f\u3044\u306a\u3044\u3002 C++ Project \u30d6\u30eb\u30fc\u30d7\u30ea\u30f3\u30c8\u306f\u6614\u3061\u3087\u3063\u3068\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3060\u3051\u3084\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u3002 \u3042\u308c\u306f\u3042\u308c\u3067\u7d20\u6674\u3057\u3044\u304c\u3001\u6570\u5f0f\u3068\u304b\u30eb\u30fc\u30d7\u3068\u304b\u306f\u3084\u306f\u308a\u30b3\u30fc\u30c9\u3067\u66f8\u3051\u305f\u65b9\u304c\u52b9\u7387\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u3002 \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f\u3053\u308c\u304b\u306a https://docs.unrealengine.com/ja/Programming/QuickStart/index.html UE4 \u3068\u5272\u3068\u72ec\u7acb\u3057\u3066\u3044\u308b\u611f\u3058\u3002 UE4 \u5074\u3067\u30af\u30e9\u30b9\u4f5c\u6210\u3092\u6307\u793a\u3059\u308b\u3068 C++ \u306e\u30b9\u30b1\u30eb\u30c8\u30f3\u3068 VisualStudio \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u3089\u308c\u3001 VS \u5074\u3067\u666e\u901a\u306b\u30a8\u30c7\u30a3\u30c3\u30c8\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3001UE4 \u5074\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u3060\u3002 VS Code \u3067\u3082\u9023\u643a\u3067\u304d\u308b\u307f\u305f\u3044\u3002 UnrealBuildTool \u3088\u308a\u8a73\u7d30\u306a\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306e\u8aac\u660e\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f: https://docs.unrealengine.com/ja/Programming/BuildTools/UnrealBuildTool/index.html UE4 \u306e\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306f build.cs \u30d5\u30a1\u30a4\u30eb\u3092\u6301\u3061\u3001\u3053\u3053\u306b\u30d3\u30eb\u30c9\u65b9\u6cd5\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u3002 \u307e\u305f\u3001.sln \u3084 .vcproj \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b GenerateProjectFiles.bat \u304c\u3042\u308b\u3002 \u3053\u308c\u3089\u3092\u307e\u3068\u3081\u3066\u3001UnrealBuildTool \u3068\u547c\u3076\u3088\u3046\u3060\u3002 https://docs.unrealengine.com/ja/Programming/UnrealBuildSystem/ProjectFileGenerator/index.html UE4 \u5916\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306f GenerateProjectFiles.bat \u3092\u547c\u3076\u5fc5\u8981\u304c\u3042\u308b\u305d\u3046\u3060\u3002 \u9006\u306b\u8a00\u3048\u3070\u3001GenerateProjectFiles.bat \u3092\u547c\u3079\u3070 UE4 \u5916\u3067\u5909\u66f4\u3057\u3066\u3082\u3044\u3044\u3063\u3066\u3053\u3068\u3060\u306a\u3002 \u4e0b\u306e\u65b9\u306e FAQ \u3092\u898b\u308b\u3068\u3001\u30d3\u30eb\u30c9\u6642\u306b\u306f\u81ea\u52d5\u7684\u306b\u30bd\u30fc\u30b9\u3092\u63a2\u3057\u3066\u304f\u308b\u304b\u3089\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u306f\u4e0d\u8981\u307f\u305f\u3044\u3002\u5fc5\u8981\u306a\u306e\u306f UE4 \u30a8\u30c7\u30a3\u30bf\u306b\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u304b\u306a? \u3082\u3057\u304b\u3057\u3066\u3001VC \u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3055\u3048\u3042\u308c\u3070\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7de8\u96c6\u306f Emacs \u3067\u3084\u3063\u3066\u3082\u554f\u984c\u306a\u3044\u306e\u304b\u306a\u3002 \u307e\u3041\u30c7\u30d0\u30c3\u30ac\u3068\u304b\u4ed8\u3044\u3066\u308b\u3057 VSCode \u3067\u3088\u3044\u304b\u3002 VS\u62e1\u5f35 \u3092\u4f7f\u3048\u3070\u3001\u30e1\u30cb\u30e5\u30fc\u3084\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u30ad\u30fc\u306a\u3069\u304b\u3089 GenerateProjectFiles.bat \u3092\u547c\u3079\u308b\u307f\u305f\u3044\u3002 Visual Studio \u30b3\u30f3\u30d1\u30a4\u30e9\u306f VS \u306e Build Tools \u304c\u5fc5\u8981\u3002 VS \u5165\u308c\u308b\u3068\u4ed8\u3044\u3066\u304f\u308b\u306e\u3067 VS \u3092\u5165\u308c\u3088\u3046\u3002 UE4.22 \u79fb\u884c\u306f VS2017 \u304c\u5bfe\u5fdc\u30d0\u30fc\u30b8\u30e7\u30f3\u3089\u3057\u3044\u3002 2019 \u3067\u3082\u52d5\u304f\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u308f\u3051\u3067 VS2019 \u5165\u308c\u308b\u3002 \u300cC++ \u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u958b\u767a\u300d\u300cC++ \u306b\u3088\u308b\u30b2\u30fc\u30e0\u958b\u767a\u300d \u300cC++ \u306b\u3088\u308b\u30b2\u30fc\u30e0\u958b\u767a\u300d\u306e\u4e2d\u306e UE \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3068\u304b UE android IDE \u3082\u5165\u308c\u3068\u304f\u3002 \u500b\u5225\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089 C# \u30b3\u30f3\u30d1\u30a4\u30e9...\u306f\u65e2\u306b\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u305f\u3002 Visual Studio Code \u30a8\u30c7\u30a3\u30bf\u306f VSCode \u3067\u3002 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u62e1\u5f35\u3092\u3002 - C/C++ - C# - VSCode icons - Git Lens - Git History - Bracket Pair Colorizer - Settings Sync - REST Client - Bookmarks - Japanese Language Pack - Path Autocomplete - GitHub Pull Requests - Output Colorizer - Log File Hightlighter - Bash Debug - Awesome Emacs Keymap - vscode-emacs-tab keybinding.json \u306e\u4fee\u6b63\u304c\u5fc5\u8981 (Ctrl+Shilf+P -> \"key\" -> \u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u958b\u304f(JSON)) { \"key\": \"tab\", \"command\": \"emacs-tab.reindentCurrentLine\", \"when\": \"editorTextFocus\" } VSCode \u306e\u518d\u8d77\u52d5\u304c\u5fc5\u8981\u3002 - EditorConfig - GenerateEditorConfig render whitespace -> boundary insert spaces -> true tab completion -> on tab size -> 3 UE4 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u958b\u3044\u3066\u7de8\u96c6\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u4f7f\u3046\u30a8\u30c7\u30a3\u30bf\u306e\u6307\u5b9a\u3092\u3059\u308b\u3002 \u4e00\u822c -> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 -> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30a8\u30c7\u30a3\u30bf\u3092 Visual Studio Code. UE \u518d\u8d77\u52d5\u3057\u308d\u3068\u51fa\u3066\u304f\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\u3002 .NET Core SDK VSCode \u958b\u3044\u3066\u308b\u3068\u5165\u308c\u308d\u3068\u51fa\u3066\u304f\u308b\u306e\u3067\u5165\u308c\u308b\u3002 UE C++ \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb \u65e9\u901f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3082\u3002 \u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b2\u30fc\u30e0\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f Blank. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u304b\u3089\u3001C++\u3001\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u3001\u30cf\u30a4\u30a8\u30f3\u30c9\u3001\u30b9\u30bf\u30fc\u30bf\u30fc\u30b3\u30f3\u30c6\u30f3\u30c4\u6709\u308a\u3001\u30ec\u30a4\u30c8\u30ec\u7121\u52b9\u3002 \u540d\u524d\u3092\u5165\u308c\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3002 // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u958b\u3044\u305f\u3089\u3001\u4e0a\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30a8\u30c7\u30a3\u30bf\u3092 VSCode \u306b\u3057\u3066\u304a\u304f\u3002 \u30d5\u30a1\u30a4\u30eb\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001\u65b0\u898f C++ \u30af\u30e9\u30b9\u3001\u89aa\u306f Actor \u3067\u3001\u540d\u524d\u306f FloatingActor. \u3059\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u59cb\u307e\u308a\u3001\u5b8c\u4e86\u3059\u308b\u3068 VSCode \u304c\u958b\u304f\u3002 UE4 \u3067\u300cVisual Studio Code Project \u3092\u66f4\u65b0\u300d\u3057\u3066\u304a\u304f\u3068\u3001VSCode \u4e0a\u3067 include path \u306a\u3069\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u3060\u3002 \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066 .cpp, .h \u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3002 \u306a\u3093\u304b\u4e0d\u5b8c\u5168\u30af\u30e9\u30b9\u3068\u304b\u8a00\u308f\u308c\u308b\u3002\u30af\u30e9\u30b9\u5b9a\u7fa9\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u307f\u305f\u3044\u3060\u3002 \u6700\u8fd1\u306e UE \u3067\u30d8\u30c3\u30c0\u306e\u69cb\u6210\u304c\u5909\u308f\u3063\u305f\u3089\u3057\u304f\u3001 1 2 #include <Runtime/Engine/Classes/Components/StaticMeshComponent.h> #include <Runtime/CoreUObject/Public/UObject/ConstructorHelpers.h> \u304c\u5fc5\u8981\u3002 \u307e\u3068\u3081\u3066 include \u3057\u3066\u304f\u308c\u308b include \u30d5\u30a1\u30a4\u30eb\u306f\u7121\u3044\u3093\u304b\u306a\u3002 VSCode \u306e\u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\u3002\u3042\u3068\u306f\u30a8\u30e9\u30fc\u3092\u7121\u8996\u3057\u3066\u7d9a\u3051\u308b\u3068 UE4 Editor \u306b\u884c\u304f\u3089\u3057\u3044\u306e\u3060\u304c\u3001exe \u306e\u751f\u6210\u306b\u5931\u6557\u3057\u305f\u3002 UE4 \u306e\u65b9\u3060\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u3067\u304d\u308b\u3002 ?_? \u3055\u3089\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u30d6\u30e9\u30a6\u30b6\u304b\u3089 FloatingActor \u3092\u898b\u3064\u3051\u3066\u30d1\u30fc\u30b9\u30da\u30af\u30c6\u30a3\u30d6\u30d3\u30e5\u30fc\u3078\u30c9\u30ed\u30c3\u30d7\u3002 \u8a73\u7d30\u304b\u3089\u4f4d\u7f6e\u3092 (-180, 0, 180) \u3078\u5909\u66f4\u3002 \u30d7\u30ec\u30a4\u3059\u308b\u3068\u3001\u4e0a\u4e0b\u3057\u3064\u3064\u56de\u8ee2\u3059\u308b...\u3057\u306a\u3044\u306a\u3002 \u30d3\u30eb\u30c9\u30a8\u30e9\u30fc \"ERROR: no target name was specified\" Code \u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3001 launch.json tasks.json UE_4.24/Engine/Build/BatchFiles/Build.bat UE_4.24/Engine/Binaries/DotNET/UnrealBuildTool.exe \u3068\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u3067\u3042\u308b\u3002 UnrealBuildTool.exe \u3067\u3001 ERROR: No target name was specified on the command-line. \u3068\u51fa\u3066\u3044\u308b\u3002 \u3053\u306e\u6642\u306e\u8d77\u52d5\u5f15\u6570\u306f Test Win64 Development \"d:/dai/Documents/Unreal Projects/Test/Test.uproject' -waitmutex \u306e\u3088\u3046\u3060\u3002 \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u30d8\u30eb\u30d7\u304c\u7121\u3044\u306e\u3067\u6b63\u3057\u304f\u306f\u5206\u304b\u3089\u3093\u304c\u3001\u7279\u306b\u554f\u984c\u306a\u3055\u305d\u3046\u306a\u611f\u3058\u3002 \u4e0a\u3067\u30d8\u30c3\u30c0\u304c\u5909\u308f\u3063\u305f\u307f\u305f\u304f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u304c\u5909\u308f\u3063\u305f\u53ef\u80fd\u6027\u3082\u3042\u308b\u304c\u3001\u305d\u308c\u306a\u3089\u30b0\u30b0\u308c\u3070\u51fa\u3066\u304f\u308b\u3088\u306a\u3041\u3002 \u30bd\u30fc\u30b9\u3092\u898b\u308b\u3002 https://github.com/EpicGames/UnrealEngine/blob/6c20d9831a968ad3cb156442bebb41a883e62152/Engine/Source/Programs/UnrealBuildTool/Configuration/TargetDescriptor.cs \u306e\u3088\u3046\u3060\u3002 1 2 // Otherwise assume they are target names TargetNames . AddRange ( InlineArguments ); \u3053\u3053\u306b\u6765\u308b\u524d\u306b\u3001 1 2 3 4 if ( UnrealTargetPlatform . TryParse ( InlineArguments [ 0 ], out ParsedPlatform )) { ... continue ; } \u3068\u3001platform \u3068 configuration \u306e\u5b9a\u7fa9\u540d\u3068\u3057\u3066\u5224\u5b9a\u3092\u8a66\u307f\u3001\u6210\u529f\u3057\u305f\u3089\u305d\u3053\u3067\u629c\u3051\u3061\u3083\u3046\u307f\u305f\u3044\u3002 \u4eca\u306f Test \u3068\u3044\u3046\u540d\u524d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002 configuration \u306b\u6709\u308a\u305d\u3046\u3067\u3042\u308b\u3002 MyTest \u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u308a\u76f4\u3057\u305f\u3089\u901a\u3063\u305f\u3002 \u30b3\u30fc\u30c9\u672c\u4f53\u90e8\u5206\u3082 TEST_API \u30de\u30af\u30ed\u304c MYTEST_API \u306b\u306a\u3063\u3066\u305f\u308a\u3068\u5fae\u5999\u306b\u9055\u3063\u3066\u308b\u306e\u3067\u3001.cpp \u306e\u30b3\u30d4\u30fc\u306f\u3057\u306a\u3044\u65b9\u304c\u3088\u3044\u3002 \u307e\u305f\u30b3\u30f3\u30d1\u30a4\u30eb\u5931\u6557\u3002 \u4eca\u5ea6\u306f\u69cb\u6210\u3092 MyTest(Development) \u3067\u306f\u306a\u304f MyTestEditor(Development) \u3092\u9078\u3093\u3060\u3089\u6210\u529f\u3057\u305f\u3002 \u3057\u304b\u3057\u79fb\u52d5\u3082\u56de\u8ee2\u3082\u3057\u306a\u3044\u3002 \u3088\u304f\u898b\u305f\u3089\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u6700\u5f8c\u3067 Tick() \u306e\u5b9f\u88c5\u304c\u3042\u3063\u305f\u3002 \u3053\u308c\u3092\u66f8\u3044\u3066\u5b9f\u884c\u3057\u305f\u3089\u6d6e\u904a\u56de\u8ee2\u3057\u305f\u3002 \u3068\u308a\u3042\u3048\u305aok. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 FloatingActor.h 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #pragma once #include \"CoreMinimal.h\" #include \"GameFramework/Actor.h\" #include \"FloatingActor.generated.h\" UCLASS () class MYTEST_API AFloatingActor : public AActor { GENERATED_BODY () public : // Sets default values for this actor's properties AFloatingActor (); UPROPERTY ( VisibleAnywhere ) UStaticMeshComponent * VisualMesh ; protected : // Called when the game starts or when spawned virtual void BeginPlay () override ; public : // Called every frame virtual void Tick ( float DeltaTime ) override ; }; FloatingActor.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include \"./FloatingActor.h\" #include <Runtime/Engine/Classes/Components/StaticMeshComponent.h> #include <Runtime/CoreUObject/Public/UObject/ConstructorHelpers.h> // Sets default values AFloatingActor :: AFloatingActor () { // Set this actor to call Tick() every frame. You can turn this off to improve performance if you don't need it. PrimaryActorTick . bCanEverTick = true ; VisualMesh = CreateDefaultSubobject < UStaticMeshComponent > ( TEXT ( \"Mesh\" )); VisualMesh -> SetupAttachment ( RootComponent ); static ConstructorHelpers :: FObjectFinder < UStaticMesh > CubeVisualAsset ( TEXT ( \"/Game/StarterContent/Shapes/Shape_Cube.Shape_Cube\" )); if ( CubeVisualAsset . Succeeded ()) { VisualMesh -> SetStaticMesh ( CubeVisualAsset . Object ); VisualMesh -> SetRelativeLocation ( FVector ( 0.0f , 0.0f , 0.0f )); } } // Called when the game starts or when spawned void AFloatingActor :: BeginPlay () { Super :: BeginPlay (); } // Called every frame void AFloatingActor :: Tick ( float DeltaTime ) { Super :: Tick ( DeltaTime ); FVector NewLocation = GetActorLocation (); FRotator NewRotation = GetActorRotation (); float RunningTime = GetGameTimeSinceCreation (); float DeltaHeight = ( FMath :: Sin ( RunningTime + DeltaTime ) - FMath :: Sin ( RunningTime )); NewLocation . Z += DeltaHeight * 20.0f ; //Scale our height by a factor of 20 float DeltaRotation = DeltaTime * 20.0f ; //Rotate by 20 degrees per second NewRotation . Yaw += DeltaRotation ; SetActorLocationAndRotation ( NewLocation , NewRotation ); }","title":"UE4 C++ (VSCode) \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7"},{"location":"blogs/2020-04-11---unreal_engine/#_1","text":"\u4e00\u6708\u306b\u80ba\u708e\u3084\u3063\u3066\u304b\u3089\u3001FF14 \u3060\u5728\u5b85\u52e4\u52d9\u3060\u3068\u5fd9\u3057\u304f\u5275\u4f5c\u8133\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3002 \u3088\u3046\u3084\u304f\u843d\u3061\u3064\u3044\u3066\u304d\u305f\u306e\u3067\u8da3\u5473\u30d7\u30ed\u3092\u518d\u958b\u3057\u305f\u3044\u3002 Bitcoin \u306e\u30c4\u30fc\u30eb\u3082\u3084\u3089\u306a\u304d\u3083\u3060\u304c\u3001\u3061\u3087\u3063\u3068\u65b0\u3057\u3044\u306e\u3084\u308a\u305f\u3044\u6c17\u5206\u3002 \u524d\u3005\u304b\u3089\u5fc3\u306e\u3084\u308a\u305f\u3044\u4e8b\u30ea\u30b9\u30c8\u306b\u8f09\u3063\u3066\u3044\u305f 3D \u3092\u68da\u5378\u3057\u3002 \u3068\u3044\u3046\u308f\u3051\u3067 Unreal Engine \u3084\u3063\u3066\u307f\u3088\u3046\u3002 \u3067\u304d\u308c\u3070\u30b2\u30fc\u30e0\u4f5c\u308c\u308c\u3070\u3044\u3044\u3051\u3069\u3082\u3001\u5f53\u9762\u306e\u76ee\u6a19\u306f 3D \u30e2\u30c7\u30eb\u52d5\u304b\u3059\u3068\u3053\u308d\u304b\u306a\u3002 VR \u30d8\u30c3\u30c9\u30bb\u30c3\u30c8\u3084 LookingGlass \u304c\u3082\u3063\u305f\u3044\u306a\u3044\u3002","title":"\u306f\u3058\u3081\u306b"},{"location":"blogs/2020-04-11---unreal_engine/#c-project","text":"\u30d6\u30eb\u30fc\u30d7\u30ea\u30f3\u30c8\u306f\u6614\u3061\u3087\u3063\u3068\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3060\u3051\u3084\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u3002 \u3042\u308c\u306f\u3042\u308c\u3067\u7d20\u6674\u3057\u3044\u304c\u3001\u6570\u5f0f\u3068\u304b\u30eb\u30fc\u30d7\u3068\u304b\u306f\u3084\u306f\u308a\u30b3\u30fc\u30c9\u3067\u66f8\u3051\u305f\u65b9\u304c\u52b9\u7387\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u3002 \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f\u3053\u308c\u304b\u306a https://docs.unrealengine.com/ja/Programming/QuickStart/index.html UE4 \u3068\u5272\u3068\u72ec\u7acb\u3057\u3066\u3044\u308b\u611f\u3058\u3002 UE4 \u5074\u3067\u30af\u30e9\u30b9\u4f5c\u6210\u3092\u6307\u793a\u3059\u308b\u3068 C++ \u306e\u30b9\u30b1\u30eb\u30c8\u30f3\u3068 VisualStudio \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u3089\u308c\u3001 VS \u5074\u3067\u666e\u901a\u306b\u30a8\u30c7\u30a3\u30c3\u30c8\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3001UE4 \u5074\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u3060\u3002 VS Code \u3067\u3082\u9023\u643a\u3067\u304d\u308b\u307f\u305f\u3044\u3002","title":"C++ Project"},{"location":"blogs/2020-04-11---unreal_engine/#unrealbuildtool","text":"\u3088\u308a\u8a73\u7d30\u306a\u30d3\u30eb\u30c9\u30d7\u30ed\u30bb\u30b9\u306e\u8aac\u660e\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f: https://docs.unrealengine.com/ja/Programming/BuildTools/UnrealBuildTool/index.html UE4 \u306e\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306f build.cs \u30d5\u30a1\u30a4\u30eb\u3092\u6301\u3061\u3001\u3053\u3053\u306b\u30d3\u30eb\u30c9\u65b9\u6cd5\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u3002 \u307e\u305f\u3001.sln \u3084 .vcproj \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b GenerateProjectFiles.bat \u304c\u3042\u308b\u3002 \u3053\u308c\u3089\u3092\u307e\u3068\u3081\u3066\u3001UnrealBuildTool \u3068\u547c\u3076\u3088\u3046\u3060\u3002 https://docs.unrealengine.com/ja/Programming/UnrealBuildSystem/ProjectFileGenerator/index.html UE4 \u5916\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306f GenerateProjectFiles.bat \u3092\u547c\u3076\u5fc5\u8981\u304c\u3042\u308b\u305d\u3046\u3060\u3002 \u9006\u306b\u8a00\u3048\u3070\u3001GenerateProjectFiles.bat \u3092\u547c\u3079\u3070 UE4 \u5916\u3067\u5909\u66f4\u3057\u3066\u3082\u3044\u3044\u3063\u3066\u3053\u3068\u3060\u306a\u3002 \u4e0b\u306e\u65b9\u306e FAQ \u3092\u898b\u308b\u3068\u3001\u30d3\u30eb\u30c9\u6642\u306b\u306f\u81ea\u52d5\u7684\u306b\u30bd\u30fc\u30b9\u3092\u63a2\u3057\u3066\u304f\u308b\u304b\u3089\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u306f\u4e0d\u8981\u307f\u305f\u3044\u3002\u5fc5\u8981\u306a\u306e\u306f UE4 \u30a8\u30c7\u30a3\u30bf\u306b\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u304b\u306a? \u3082\u3057\u304b\u3057\u3066\u3001VC \u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3055\u3048\u3042\u308c\u3070\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7de8\u96c6\u306f Emacs \u3067\u3084\u3063\u3066\u3082\u554f\u984c\u306a\u3044\u306e\u304b\u306a\u3002 \u307e\u3041\u30c7\u30d0\u30c3\u30ac\u3068\u304b\u4ed8\u3044\u3066\u308b\u3057 VSCode \u3067\u3088\u3044\u304b\u3002 VS\u62e1\u5f35 \u3092\u4f7f\u3048\u3070\u3001\u30e1\u30cb\u30e5\u30fc\u3084\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u30ad\u30fc\u306a\u3069\u304b\u3089 GenerateProjectFiles.bat \u3092\u547c\u3079\u308b\u307f\u305f\u3044\u3002","title":"UnrealBuildTool"},{"location":"blogs/2020-04-11---unreal_engine/#visual-studio","text":"\u30b3\u30f3\u30d1\u30a4\u30e9\u306f VS \u306e Build Tools \u304c\u5fc5\u8981\u3002 VS \u5165\u308c\u308b\u3068\u4ed8\u3044\u3066\u304f\u308b\u306e\u3067 VS \u3092\u5165\u308c\u3088\u3046\u3002 UE4.22 \u79fb\u884c\u306f VS2017 \u304c\u5bfe\u5fdc\u30d0\u30fc\u30b8\u30e7\u30f3\u3089\u3057\u3044\u3002 2019 \u3067\u3082\u52d5\u304f\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u3044\u3046\u308f\u3051\u3067 VS2019 \u5165\u308c\u308b\u3002 \u300cC++ \u306b\u3088\u308b\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u958b\u767a\u300d\u300cC++ \u306b\u3088\u308b\u30b2\u30fc\u30e0\u958b\u767a\u300d \u300cC++ \u306b\u3088\u308b\u30b2\u30fc\u30e0\u958b\u767a\u300d\u306e\u4e2d\u306e UE \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3068\u304b UE android IDE \u3082\u5165\u308c\u3068\u304f\u3002 \u500b\u5225\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089 C# \u30b3\u30f3\u30d1\u30a4\u30e9...\u306f\u65e2\u306b\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u305f\u3002","title":"Visual Studio"},{"location":"blogs/2020-04-11---unreal_engine/#visual-studio-code","text":"\u30a8\u30c7\u30a3\u30bf\u306f VSCode \u3067\u3002 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u62e1\u5f35\u3092\u3002 - C/C++ - C# - VSCode icons - Git Lens - Git History - Bracket Pair Colorizer - Settings Sync - REST Client - Bookmarks - Japanese Language Pack - Path Autocomplete - GitHub Pull Requests - Output Colorizer - Log File Hightlighter - Bash Debug - Awesome Emacs Keymap - vscode-emacs-tab keybinding.json \u306e\u4fee\u6b63\u304c\u5fc5\u8981 (Ctrl+Shilf+P -> \"key\" -> \u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3092\u958b\u304f(JSON)) { \"key\": \"tab\", \"command\": \"emacs-tab.reindentCurrentLine\", \"when\": \"editorTextFocus\" } VSCode \u306e\u518d\u8d77\u52d5\u304c\u5fc5\u8981\u3002 - EditorConfig - GenerateEditorConfig render whitespace -> boundary insert spaces -> true tab completion -> on tab size -> 3 UE4 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u958b\u3044\u3066\u7de8\u96c6\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u4f7f\u3046\u30a8\u30c7\u30a3\u30bf\u306e\u6307\u5b9a\u3092\u3059\u308b\u3002 \u4e00\u822c -> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 -> \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30a8\u30c7\u30a3\u30bf\u3092 Visual Studio Code. UE \u518d\u8d77\u52d5\u3057\u308d\u3068\u51fa\u3066\u304f\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\u3002","title":"Visual Studio Code"},{"location":"blogs/2020-04-11---unreal_engine/#net-core-sdk","text":"VSCode \u958b\u3044\u3066\u308b\u3068\u5165\u308c\u308d\u3068\u51fa\u3066\u304f\u308b\u306e\u3067\u5165\u308c\u308b\u3002","title":".NET Core SDK"},{"location":"blogs/2020-04-11---unreal_engine/#ue-c","text":"\u65e9\u901f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3082\u3002 \u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b2\u30fc\u30e0\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f Blank. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u304b\u3089\u3001C++\u3001\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u3001\u30cf\u30a4\u30a8\u30f3\u30c9\u3001\u30b9\u30bf\u30fc\u30bf\u30fc\u30b3\u30f3\u30c6\u30f3\u30c4\u6709\u308a\u3001\u30ec\u30a4\u30c8\u30ec\u7121\u52b9\u3002 \u540d\u524d\u3092\u5165\u308c\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3002 // \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u958b\u3044\u305f\u3089\u3001\u4e0a\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30a8\u30c7\u30a3\u30bf\u3092 VSCode \u306b\u3057\u3066\u304a\u304f\u3002 \u30d5\u30a1\u30a4\u30eb\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001\u65b0\u898f C++ \u30af\u30e9\u30b9\u3001\u89aa\u306f Actor \u3067\u3001\u540d\u524d\u306f FloatingActor. \u3059\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u59cb\u307e\u308a\u3001\u5b8c\u4e86\u3059\u308b\u3068 VSCode \u304c\u958b\u304f\u3002 UE4 \u3067\u300cVisual Studio Code Project \u3092\u66f4\u65b0\u300d\u3057\u3066\u304a\u304f\u3068\u3001VSCode \u4e0a\u3067 include path \u306a\u3069\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u3060\u3002 \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u5f93\u3063\u3066 .cpp, .h \u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3002 \u306a\u3093\u304b\u4e0d\u5b8c\u5168\u30af\u30e9\u30b9\u3068\u304b\u8a00\u308f\u308c\u308b\u3002\u30af\u30e9\u30b9\u5b9a\u7fa9\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u307f\u305f\u3044\u3060\u3002 \u6700\u8fd1\u306e UE \u3067\u30d8\u30c3\u30c0\u306e\u69cb\u6210\u304c\u5909\u308f\u3063\u305f\u3089\u3057\u304f\u3001 1 2 #include <Runtime/Engine/Classes/Components/StaticMeshComponent.h> #include <Runtime/CoreUObject/Public/UObject/ConstructorHelpers.h> \u304c\u5fc5\u8981\u3002 \u307e\u3068\u3081\u3066 include \u3057\u3066\u304f\u308c\u308b include \u30d5\u30a1\u30a4\u30eb\u306f\u7121\u3044\u3093\u304b\u306a\u3002 VSCode \u306e\u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\u3002\u3042\u3068\u306f\u30a8\u30e9\u30fc\u3092\u7121\u8996\u3057\u3066\u7d9a\u3051\u308b\u3068 UE4 Editor \u306b\u884c\u304f\u3089\u3057\u3044\u306e\u3060\u304c\u3001exe \u306e\u751f\u6210\u306b\u5931\u6557\u3057\u305f\u3002 UE4 \u306e\u65b9\u3060\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u3067\u304d\u308b\u3002 ?_? \u3055\u3089\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u30d6\u30e9\u30a6\u30b6\u304b\u3089 FloatingActor \u3092\u898b\u3064\u3051\u3066\u30d1\u30fc\u30b9\u30da\u30af\u30c6\u30a3\u30d6\u30d3\u30e5\u30fc\u3078\u30c9\u30ed\u30c3\u30d7\u3002 \u8a73\u7d30\u304b\u3089\u4f4d\u7f6e\u3092 (-180, 0, 180) \u3078\u5909\u66f4\u3002 \u30d7\u30ec\u30a4\u3059\u308b\u3068\u3001\u4e0a\u4e0b\u3057\u3064\u3064\u56de\u8ee2\u3059\u308b...\u3057\u306a\u3044\u306a\u3002","title":"UE C++ \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb"},{"location":"blogs/2020-04-11---unreal_engine/#error-no-target-name-was-specified","text":"Code \u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3001 launch.json tasks.json UE_4.24/Engine/Build/BatchFiles/Build.bat UE_4.24/Engine/Binaries/DotNET/UnrealBuildTool.exe \u3068\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u3067\u3042\u308b\u3002 UnrealBuildTool.exe \u3067\u3001 ERROR: No target name was specified on the command-line. \u3068\u51fa\u3066\u3044\u308b\u3002 \u3053\u306e\u6642\u306e\u8d77\u52d5\u5f15\u6570\u306f Test Win64 Development \"d:/dai/Documents/Unreal Projects/Test/Test.uproject' -waitmutex \u306e\u3088\u3046\u3060\u3002 \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u30d8\u30eb\u30d7\u304c\u7121\u3044\u306e\u3067\u6b63\u3057\u304f\u306f\u5206\u304b\u3089\u3093\u304c\u3001\u7279\u306b\u554f\u984c\u306a\u3055\u305d\u3046\u306a\u611f\u3058\u3002 \u4e0a\u3067\u30d8\u30c3\u30c0\u304c\u5909\u308f\u3063\u305f\u307f\u305f\u304f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u304c\u5909\u308f\u3063\u305f\u53ef\u80fd\u6027\u3082\u3042\u308b\u304c\u3001\u305d\u308c\u306a\u3089\u30b0\u30b0\u308c\u3070\u51fa\u3066\u304f\u308b\u3088\u306a\u3041\u3002 \u30bd\u30fc\u30b9\u3092\u898b\u308b\u3002 https://github.com/EpicGames/UnrealEngine/blob/6c20d9831a968ad3cb156442bebb41a883e62152/Engine/Source/Programs/UnrealBuildTool/Configuration/TargetDescriptor.cs \u306e\u3088\u3046\u3060\u3002 1 2 // Otherwise assume they are target names TargetNames . AddRange ( InlineArguments ); \u3053\u3053\u306b\u6765\u308b\u524d\u306b\u3001 1 2 3 4 if ( UnrealTargetPlatform . TryParse ( InlineArguments [ 0 ], out ParsedPlatform )) { ... continue ; } \u3068\u3001platform \u3068 configuration \u306e\u5b9a\u7fa9\u540d\u3068\u3057\u3066\u5224\u5b9a\u3092\u8a66\u307f\u3001\u6210\u529f\u3057\u305f\u3089\u305d\u3053\u3067\u629c\u3051\u3061\u3083\u3046\u307f\u305f\u3044\u3002 \u4eca\u306f Test \u3068\u3044\u3046\u540d\u524d\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002 configuration \u306b\u6709\u308a\u305d\u3046\u3067\u3042\u308b\u3002 MyTest \u3068\u3044\u3046\u540d\u524d\u3067\u4f5c\u308a\u76f4\u3057\u305f\u3089\u901a\u3063\u305f\u3002 \u30b3\u30fc\u30c9\u672c\u4f53\u90e8\u5206\u3082 TEST_API \u30de\u30af\u30ed\u304c MYTEST_API \u306b\u306a\u3063\u3066\u305f\u308a\u3068\u5fae\u5999\u306b\u9055\u3063\u3066\u308b\u306e\u3067\u3001.cpp \u306e\u30b3\u30d4\u30fc\u306f\u3057\u306a\u3044\u65b9\u304c\u3088\u3044\u3002 \u307e\u305f\u30b3\u30f3\u30d1\u30a4\u30eb\u5931\u6557\u3002 \u4eca\u5ea6\u306f\u69cb\u6210\u3092 MyTest(Development) \u3067\u306f\u306a\u304f MyTestEditor(Development) \u3092\u9078\u3093\u3060\u3089\u6210\u529f\u3057\u305f\u3002 \u3057\u304b\u3057\u79fb\u52d5\u3082\u56de\u8ee2\u3082\u3057\u306a\u3044\u3002 \u3088\u304f\u898b\u305f\u3089\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u6700\u5f8c\u3067 Tick() \u306e\u5b9f\u88c5\u304c\u3042\u3063\u305f\u3002 \u3053\u308c\u3092\u66f8\u3044\u3066\u5b9f\u884c\u3057\u305f\u3089\u6d6e\u904a\u56de\u8ee2\u3057\u305f\u3002 \u3068\u308a\u3042\u3048\u305aok.","title":"\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc \"ERROR: no target name was specified\""},{"location":"blogs/2020-04-11---unreal_engine/#_2","text":"FloatingActor.h 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #pragma once #include \"CoreMinimal.h\" #include \"GameFramework/Actor.h\" #include \"FloatingActor.generated.h\" UCLASS () class MYTEST_API AFloatingActor : public AActor { GENERATED_BODY () public : // Sets default values for this actor's properties AFloatingActor (); UPROPERTY ( VisibleAnywhere ) UStaticMeshComponent * VisualMesh ; protected : // Called when the game starts or when spawned virtual void BeginPlay () override ; public : // Called every frame virtual void Tick ( float DeltaTime ) override ; }; FloatingActor.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include \"./FloatingActor.h\" #include <Runtime/Engine/Classes/Components/StaticMeshComponent.h> #include <Runtime/CoreUObject/Public/UObject/ConstructorHelpers.h> // Sets default values AFloatingActor :: AFloatingActor () { // Set this actor to call Tick() every frame. You can turn this off to improve performance if you don't need it. PrimaryActorTick . bCanEverTick = true ; VisualMesh = CreateDefaultSubobject < UStaticMeshComponent > ( TEXT ( \"Mesh\" )); VisualMesh -> SetupAttachment ( RootComponent ); static ConstructorHelpers :: FObjectFinder < UStaticMesh > CubeVisualAsset ( TEXT ( \"/Game/StarterContent/Shapes/Shape_Cube.Shape_Cube\" )); if ( CubeVisualAsset . Succeeded ()) { VisualMesh -> SetStaticMesh ( CubeVisualAsset . Object ); VisualMesh -> SetRelativeLocation ( FVector ( 0.0f , 0.0f , 0.0f )); } } // Called when the game starts or when spawned void AFloatingActor :: BeginPlay () { Super :: BeginPlay (); } // Called every frame void AFloatingActor :: Tick ( float DeltaTime ) { Super :: Tick ( DeltaTime ); FVector NewLocation = GetActorLocation (); FRotator NewRotation = GetActorRotation (); float RunningTime = GetGameTimeSinceCreation (); float DeltaHeight = ( FMath :: Sin ( RunningTime + DeltaTime ) - FMath :: Sin ( RunningTime )); NewLocation . Z += DeltaHeight * 20.0f ; //Scale our height by a factor of 20 float DeltaRotation = DeltaTime * 20.0f ; //Rotate by 20 degrees per second NewRotation . Yaw += DeltaRotation ; SetActorLocationAndRotation ( NewLocation , NewRotation ); }","title":"\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9"},{"location":"blogs/2021-08-13---upgrade-gatsby/","tags":["Tech"],"text":".katex img { object-fit: fill; padding: unset; display: block; position: absolute; width: 100%; height: inherit; } gatsby \u304b\u3089 mkdocs \u3078\u79fb\u884c \u4ee5\u524d\u306e gatsby \u74b0\u5883\u306f\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u58ca\u308c\u3066\u3066\u30d3\u30eb\u30c9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u3002 \u3068\u308a\u3042\u3048\u305a Gatsby \u306e\u66f4\u65b0\u3092\u3057\u3066\u307f\u305f\u306e\u3060\u304c\u3001katex \u304c\u306a\u3093\u304b\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\u3002 \u9811\u5f35\u3063\u3066\u3082\u3088\u3044\u306e\u3060\u304c\u3001\u6570\u30f6\u6708\u30da\u30fc\u30b9\u306b\u306f\u3061\u3087\u3063\u3068\u66f4\u65b0\u304c\u65e9\u3059\u304e\u308b\u304b\u306a\u3041\u3002 \u305d\u308c\u306b gatsby \u3082 v3 \u306b\u306a\u3063\u3066\u3001static page generator \u304b\u3089 static \u304c\u629c\u3051\u843d\u3061\u3066\u3044\u308b\u306e\u3082\u6c17\u306b\u306a\u308b\u3002 \u305d\u3082\u305d\u3082\u306e\u8981\u6c42\u3068\u3057\u3066\u3001\u5358\u306b markdown \u304b\u3089\u30d6\u30e9\u30a6\u30b6\u3067\u898b\u308c\u308b\u9759\u7684\u30da\u30fc\u30b8\u3092\u4f5c\u308b\u3060\u3051\u3067\u3088\u3044\u3002 \u3068\u3001\u8272\u3005\u63a2\u3057\u305f\u3068\u3053\u308d mkdocs \u304c\u826f\u3044\u611f\u3058\u307d\u3044\u306e\u3067\u79fb\u308b\u3002 mkdocs 1 2 3 4 5 $ pip install mkdocs $ python -m mkdocs new <dir> $ cd <dir> $ python -m mkdocs serve $ firefox http://localhost:8000/ \u8a18\u4e8b\u306f gatsby + katex \u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u6570\u5f0f\u304c\u8868\u793a\u3067\u304d\u305f\u3002 \u5192\u982d\u306e\u8a2d\u5b9a\u90e8\u5206\u306e template \u304c\u60aa\u3055\u3092\u3059\u308b\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3002 katex 1 2 $ pip install markdown-katex $ touch macros.tex \u3055\u3089\u306b mkdocs.yml \u3092\u7de8\u96c6\u3057\u3001 1 2 3 4 5 markdown_extensions : - markdown_katex : no_inline_svg : True insert_fonts_css : True macro-file : macros.tex \u6570\u5f0f\u306f\u30d6\u30ed\u30c3\u30af\u306a\u3089 ```math \u304b\u3089 ``` \u306e\u9593\u306b\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u306a\u3089 $` \u3068 `$ \u306e\u9593\u306b\u66f8\u304f\u3002 R = g 1 k r = H \u2032 ( R ) s = k ( H ( m ) + x r ) \\begin{aligned} R &= g^{\\frac{1}{k}} \\\\ r &= H'(R) \\\\ s &= k(H(m) + xr) \\\\ \\end{aligned} R r s \u200b = g k 1 \u200b = H \u2032 ( R ) = k ( H ( m ) + x r ) \u200b \u3069\u3046\u3082\u6570\u5f0f\u5165\u308b\u3068\u304b\u306a\u308a\u9045\u304f\u306a\u3063\u3061\u3083\u3046\u306a\u3002 deploy mkdocs gh-deploy \u3067 github pages \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u308c\u308b\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068 gh-pages \u30d6\u30e9\u30f3\u30c1\u306e / \u4ee5\u4e0b\u3002 \u3053\u3053\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b setting \u3092\u5909\u3048\u3066\u304a\u304f\u3002","title":"gatsby \u304b\u3089 mkdocs \u3078\u79fb\u884c"},{"location":"blogs/2021-08-13---upgrade-gatsby/#gatsby-mkdocs","text":"\u4ee5\u524d\u306e gatsby \u74b0\u5883\u306f\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u58ca\u308c\u3066\u3066\u30d3\u30eb\u30c9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u3002 \u3068\u308a\u3042\u3048\u305a Gatsby \u306e\u66f4\u65b0\u3092\u3057\u3066\u307f\u305f\u306e\u3060\u304c\u3001katex \u304c\u306a\u3093\u304b\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\u3002 \u9811\u5f35\u3063\u3066\u3082\u3088\u3044\u306e\u3060\u304c\u3001\u6570\u30f6\u6708\u30da\u30fc\u30b9\u306b\u306f\u3061\u3087\u3063\u3068\u66f4\u65b0\u304c\u65e9\u3059\u304e\u308b\u304b\u306a\u3041\u3002 \u305d\u308c\u306b gatsby \u3082 v3 \u306b\u306a\u3063\u3066\u3001static page generator \u304b\u3089 static \u304c\u629c\u3051\u843d\u3061\u3066\u3044\u308b\u306e\u3082\u6c17\u306b\u306a\u308b\u3002 \u305d\u3082\u305d\u3082\u306e\u8981\u6c42\u3068\u3057\u3066\u3001\u5358\u306b markdown \u304b\u3089\u30d6\u30e9\u30a6\u30b6\u3067\u898b\u308c\u308b\u9759\u7684\u30da\u30fc\u30b8\u3092\u4f5c\u308b\u3060\u3051\u3067\u3088\u3044\u3002 \u3068\u3001\u8272\u3005\u63a2\u3057\u305f\u3068\u3053\u308d mkdocs \u304c\u826f\u3044\u611f\u3058\u307d\u3044\u306e\u3067\u79fb\u308b\u3002","title":"gatsby \u304b\u3089 mkdocs \u3078\u79fb\u884c"},{"location":"blogs/2021-08-13---upgrade-gatsby/#mkdocs","text":"1 2 3 4 5 $ pip install mkdocs $ python -m mkdocs new <dir> $ cd <dir> $ python -m mkdocs serve $ firefox http://localhost:8000/ \u8a18\u4e8b\u306f gatsby + katex \u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u6570\u5f0f\u304c\u8868\u793a\u3067\u304d\u305f\u3002 \u5192\u982d\u306e\u8a2d\u5b9a\u90e8\u5206\u306e template \u304c\u60aa\u3055\u3092\u3059\u308b\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3002","title":"mkdocs"},{"location":"blogs/2021-08-13---upgrade-gatsby/#katex","text":"1 2 $ pip install markdown-katex $ touch macros.tex \u3055\u3089\u306b mkdocs.yml \u3092\u7de8\u96c6\u3057\u3001 1 2 3 4 5 markdown_extensions : - markdown_katex : no_inline_svg : True insert_fonts_css : True macro-file : macros.tex \u6570\u5f0f\u306f\u30d6\u30ed\u30c3\u30af\u306a\u3089 ```math \u304b\u3089 ``` \u306e\u9593\u306b\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u306a\u3089 $` \u3068 `$ \u306e\u9593\u306b\u66f8\u304f\u3002 R = g 1 k r = H \u2032 ( R ) s = k ( H ( m ) + x r ) \\begin{aligned} R &= g^{\\frac{1}{k}} \\\\ r &= H'(R) \\\\ s &= k(H(m) + xr) \\\\ \\end{aligned} R r s \u200b = g k 1 \u200b = H \u2032 ( R ) = k ( H ( m ) + x r ) \u200b \u3069\u3046\u3082\u6570\u5f0f\u5165\u308b\u3068\u304b\u306a\u308a\u9045\u304f\u306a\u3063\u3061\u3083\u3046\u306a\u3002","title":"katex"},{"location":"blogs/2021-08-13---upgrade-gatsby/#deploy","text":"mkdocs gh-deploy \u3067 github pages \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u308c\u308b\u3002 \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068 gh-pages \u30d6\u30e9\u30f3\u30c1\u306e / \u4ee5\u4e0b\u3002 \u3053\u3053\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b setting \u3092\u5909\u3048\u3066\u304a\u304f\u3002","title":"deploy"},{"location":"topics/Blockchain/2016-12-24--p2sh/","tags":["Tech","Bitcoin"],"text":"\u306f\u3058\u3081\u306b 2016-12-24 \u4eee\u60f3\u901a\u8ca8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3 Advent Calendar 2016 \u304c\u7a7a\u3044\u3066\u3044\u305f\u306e\u3067\u3001\u6700\u8fd1\u8abf\u3079\u305f P2SH \u306b\u3064\u3044\u3066\u306e\u307e\u3068\u3081\u3092\u66f8\u3044\u3066\u304a\u304f\u3002 P2SH Pay to Script Hash \u306e\u7565\u3002 Bitcoin \u306e\u652f\u6255\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e00\u7a2e\u3002 scriptPubKey P2SH \u306e scriptPubKey \u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002 1 OP_HASH160 [20-byte-hash-value] OP_EQUAL \u3053\u306e\u5224\u5b9a\u306f\u53b3\u3057\u304f\u3001OP_EQUAL \u306e\u5f8c\u306b\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u305f\u308a\u300120byte \u30c7\u30fc\u30bf\u3092\u7a4d\u3080\u306e\u306b 0x14 \u4ee5\u5916\u306e\u30aa\u30da\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u305f\u308a\u3057\u305f\u3089 P2SH \u3068\u306f\u89e3\u91c8\u3055\u308c\u306a\u3044\u3002 bitcoin-core 0.13.1 \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u306f\u3001script/script.cpp \u306b IsPayToScriptHash \u3068\u3044\u3046\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002 \u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u53b3\u5bc6\u306b\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u304b\u3068\u3002 ```cpp:script/script.cpp bool CScript::IsPayToScriptHash() const { // Extra-fast test for pay-to-script-hash CScripts: return (this->size() == 23 && ( this)[0] == OP_HASH160 && ( this)[1] == 0x14 && (*this)[22] == OP_EQUAL); } 1 2 3 4 5 6 7 0x14 \u306f \u3001 \u6b21\u306e 20 byte \u3092\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\u547d\u4ee4 \u3002 ## scriptSig P2SH \u306b\u5bfe\u3059\u308b scriptSig \u306b\u3082\u6b21\u306e\u5236\u7d04\u304c\u304b\u304b\u308b : - PUSH\u7cfb\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u306e\u307f\u3067\u69cb\u6210\u3055\u308c\u308b \u3053\u3061\u3089\u306e\u5b9f\u88c5\u306f script / script . cpp \u306e [ IsPushOnly ] ( https : // github . com / bitcoin / bitcoin / blob / v0 .13.1 / src / script / script . cpp#L239 ) \u306b\u3042\u308b bool CScript::IsPushOnly(const_iterator pc) const { while (pc < end()) { opcodetype opcode; if (!GetOp(pc, opcode)) return false; // Note that IsPushOnly() does consider OP_RESERVED to be a // push-type opcode, however execution of OP_RESERVED fails, so // it's not relevant to P2SH/BIP62 as the scriptSig would fail prior to // the P2SH special validation code being executed. if (opcode > OP_16) return false; } return true; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u5f15\u6570 pc \u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5148\u982d\u304c\u4e0e\u3048\u3089\u308c\u308b\u3068\u601d\u3044\u306d\u3047(\u8a73\u7d30\u306f [VerifyScript \u95a2\u6570](https://github.com/bitcoin/bitcoin/blob/v0.13.1/src/script/interpreter.cpp#L1460))\u3002 OP_16 \u307e\u3067\u3068\u3044\u3046\u3053\u3068\u306f\u3001https://en.bitcoin.it/wiki/Script \u306b\u3088\u308b\u3068\u3001 - OP_0 - OP_pushx - OP_PUSHDATAx - OP_1_NEGATIVE, OP_1 - OP_16 \u304c\u8a31\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002 ## script \u306e\u5b9f\u884c scriptPubKey \u304c P2SH \u306e\u5834\u5408\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u306f\u6b21\u306e\u3088\u3046\u306a\u7279\u6b8a\u306a\u624b\u9806\u306b\u306a\u308b\u3002 1. scriptSig \u3092\u5b9f\u884c 2. \u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u3092\u4fdd\u5b58 3. scriptPubKey \u3092\u5b9f\u884c 4. 2\u3067\u4fdd\u5b58\u3057\u305f\u30b9\u30bf\u30c3\u30af\u306b\u623b\u3059 5. \u30b9\u30bf\u30c3\u30af\u306e\u9802\u4e0a\u3092\u53d6\u308a\u51fa\u3059 6. 5\u3067\u53d6\u308a\u51fa\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u307f\u306a\u3057\u3066\u5b9f\u884c\u3059\u308b 1,3 \u306f\u901a\u5e38\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u3068\u540c\u3058\u3002 2 \u3067\u4fdd\u5b58\u3057\u305f\u30b9\u30bf\u30c3\u30af\u306b\u5bfe\u3057\u3066\u30014-6 \u3063\u3067\u305d\u306e\u6700\u4e0a\u6bb5\u306e\u5024\u306b\u3042\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002 scriptSig \u306e\u5b9f\u884c\u7d50\u679c\u306e\u30b9\u30bf\u30c3\u30af\u306b\u306f\u6700\u4e0a\u6bb5\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3001\u3064\u307e\u308a\u5c11\u306a\u304f\u3068\u3082\u4e00\u3064\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3053\u3068\u304c\u8981\u8acb\u3055\u308c\u3066\u3044\u308b\u3002 \u3055\u3089\u306b\u3001\u3053\u306e\u6700\u4e0a\u6bb5\u306e\u30c7\u30fc\u30bf\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3042\u308a\u3001\u5f8c\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092 redeem script \u3068\u8a00\u3046\u3002 ### scriptPubKey scriptSig \u306e\u7d50\u679c\u3001\u30b9\u30bf\u30c3\u30af\u6700\u4e0a\u6bb5\u306b redeem script \u304c\u3042\u308b\u72b6\u614b\u3067 scriptPubKey \u306e\u5b9f\u884c\u306b\u79fb\u308b\u3002 scriptPubKey \u306f\u3001\u5148\u306b\u793a\u3057\u305f\u3088\u3046\u306b\u3001 OP_HASH160 [20-byte-hash-value] OP_EQUAL 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u3067\u3042\u308b\u3002 redeem script \u306e hash160(= ripemd160(sha256(redeem_script)) \u3092\u53d6\u308a\u3001\u305d\u308c\u304c [20-byte-hash-value] \u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u5224\u5b9a\u3057\u3066\u3044\u308b\u3002 \u6574\u7406\u3059\u308b\u3068\u3001 a. scriptPubKey \u306b\u306f hash\u5024\u304c\u5165\u3063\u3066\u3044\u308b b. scriptSig \u306b\u306f\u3001hash \u5024\u304c a \u306e\u5024\u3068\u4e00\u81f4\u3059\u308b redeem script \u304c\u5165\u308b \u901a\u5e38(P2PKH)\u306e scriptPubKey \u3068\u7570\u306a\u308a\u3001P2SH \u306e scriptPubKey \u306b\u306f\u516c\u958b\u9375\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304c\u3001redeem script \u306e\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u542b\u3081\u3089\u308c\u3066\u3044\u308b\u3002\u5b9f\u8cea\u7684\u306b\u3001\u7279\u5b9a\u306e redeem script \u304c\u5165\u308b\u3053\u3068\u3092\u5f37\u5236\u3057\u3066\u3044\u308b\u308f\u3051\u3060\u3002 redeem script \u306b\u516c\u958b\u9375\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u3001utxo \u4f7f\u7528\u306e\u305f\u3081\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306f P2PKH \u3068\u540c\u69d8\u306b\u78ba\u4fdd\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u3002 ### redeem script redeem script \u306f\u666e\u901a\u306b\u5b9f\u884c\u3059\u308c\u3070\u3088\u3044\u3002 \u305f\u3060\u3057 redeem script \u306f\u5b9f\u8cea\u7684\u306b scriptPubKey \u3067\u6c7a\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u3001transaction \u751f\u6210\u6642\u306b\u5206\u304b\u308b\u3088\u3046\u306a\u60c5\u5831\u3001\u4f8b\u3048\u3070\u7f72\u540d\u3092\u542b\u3081\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\u305d\u3046\u3044\u3046\u306e\u306f scriptSig \u306b\u5165\u308c\u308b\u3002 \u305f\u3068\u3048\u3070\u3001\u5358\u7d14\u306a checksig \u3092\u3059\u308b redeem script \u3068 scriptSig \u306f\u6b21\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u3088\u3044: scriptSig: [sign] [redeem script] redeemScr: [pubkey] CHECKSIG 1 2 3 4 5 6 7 8 9 10 // \u5b9f\u969b\u306b\u4f7f\u3046\u306e\u306a\u3089\u3001P2PKH \u306e\u3088\u3046\u306b\u516c\u958b\u9375\u306e\u30cf\u30c3\u30b7\u30e5\u78ba\u8a8d\u3092\u5165\u308c\u305f\u65b9\u304c\u3088\u3044 redeem script \u3092\u5b9f\u884c\u3059\u308b\u6642\u306e\u30b9\u30bf\u30c3\u30af\u306f\u3001signature \u304c\u4e00\u3064\u3042\u308b\u3060\u3051\u3002 \u305d\u306e\u5f8c redeem script \u306e\u5b9f\u884c\u3067\u3001pubkey \u3092\u7a4d\u3093\u3067\u3001CHECKSIG \u3092\u5b9f\u884c\u3059\u308b\u3002 CHECKSIG \u5b9f\u884c\u6642\u306b\u306f\u3001\u30b9\u30bf\u30c3\u30af\u306f\u4e0b\u304b\u3089 sign,pubkey \u3068\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6b63\u3057\u304f\u691c\u8a3c\u3067\u304d\u308b\u3002 \u306a\u304a\u3001\u4e0a\u306e\u4f8b\u306e\u3088\u3046\u306b pubkey \u3092 redeem script \u306b\u7f6e\u3044\u3066\u5236\u9650\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3002scriptSig \u306e\u6700\u5f8c\u306b\u7f6e\u3044\u3066\u3082\u52d5\u4f5c\u3059\u308b\u304c\u3001\u305d\u308c\u3060\u3068\u7f72\u540d\u691c\u8a3c\u306b\u7528\u3044\u308b\u516c\u958b\u9375\u3092\u4efb\u610f\u306b\u6307\u5b9a\u3067\u304d\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002 2-of-3 multisig \u306e\u5834\u5408\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b: scriptSig: OP_0 [sign1] [sign2] [redeem script] redeemScr: OP_2 [pubkey1] [pubkey2] [pubkey3] OP_3 CHECKMULTISIG 1 CHECKMULTISIG \u5b9f\u884c\u6642\u306e\u30b9\u30bf\u30c3\u30af\u306f\u4e0b\u304b\u3089\u3001 <0> <2> <3> ``` \u3068\u306a\u3063\u3066\u3044\u308b\u3002 \u3053\u308c\u306f\u6b63\u3057\u3044 CHECKMULTISIG \u306e\u4e26\u3073\u306b\u306a\u3063\u3066\u3044\u308b\u3002 // \u6700\u521d\u306e 0 \u306f CHECKMULTISIG \u306e\u30d0\u30b0\u306b\u3088\u308a\u5fc5\u8981\u306a\u30c0\u30df\u30fc\u306e\u5024 P2PKH \u3067 multisig \u3092\u884c\u3046\u3068\u3001\u516c\u958b\u9375\u304c\u3059\u3079\u3066 scriptPubKey \u306b\u5165\u308b\u306e\u3067\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u30de\u30eb\u30c1\u30b7\u30b0\u7528\u306e\u30a2\u30c9\u30ec\u30b9\u3082\u305d\u308c\u306b\u4f34\u3063\u3066\u9577\u304f\u306a\u308b\u3002 P2SH \u306e\u5834\u5408\u3001redeem script \u306e\u9577\u3055\u306b\u95a2\u308f\u3089\u305a\u3001scriptPubKey \u306e\u9577\u3055\u306f 23byte \u3067\u56fa\u5b9a\u306b\u306a\u308b\u3002 P2SH \u30a2\u30c9\u30ec\u30b9 BIP13 P2SH \u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u901a\u5e38\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u540c\u69d8\u306b base58check \u3067\u4f5c\u6210\u3059\u308b\u3002 \u305f\u3060\u3057\u4ee5\u4e0b\u306e\u9055\u3044\u304c\u3042\u308b: P2PKH \u30a2\u30c9\u30ec\u30b9\u3067\u306f\u516c\u958b\u9375\u306e hash160 \u306b\u5bfe\u3057\u3066 base58check \u3092\u304b\u3051\u308b\u304c\u3001P2SH \u30a2\u30c9\u30ec\u30b9\u3067\u306f redeem script \u306e hash160 \u3092\u4f7f\u3046\u3002 (scriptPubKey \u306e 20byte hash \u3068\u540c\u3058\u5024) version byte \u306f\u3001main-net \u3067\u306f 5, testnet \u3067\u306f 196. base58 \u5f8c\u306e\u5148\u982d\u6587\u5b57\u306f\u3001\u305d\u308c\u305e\u308c '3' \u3068 '2' \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u7f72\u540d\u5bfe\u8c61 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u7f72\u540d\u3092\u4f5c\u308b\u969b\u306b\u306f\u3001\u5bfe\u5fdc\u3059\u308b UTXO \u306e scriptPubKey \u3067 scriptSig \u3092\u7f6e\u304d\u63db\u3048\u308b\u304c\u3001 P2SH \u306e\u5834\u5408\u306f redeem script \u3067\u7f6e\u304d\u63db\u3048\u308b\u3002","title":"P2SH \u307e\u3068\u3081"},{"location":"topics/Blockchain/2016-12-24--p2sh/#_1","text":"2016-12-24 \u4eee\u60f3\u901a\u8ca8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3 Advent Calendar 2016 \u304c\u7a7a\u3044\u3066\u3044\u305f\u306e\u3067\u3001\u6700\u8fd1\u8abf\u3079\u305f P2SH \u306b\u3064\u3044\u3066\u306e\u307e\u3068\u3081\u3092\u66f8\u3044\u3066\u304a\u304f\u3002","title":"\u306f\u3058\u3081\u306b"},{"location":"topics/Blockchain/2016-12-24--p2sh/#p2sh","text":"Pay to Script Hash \u306e\u7565\u3002 Bitcoin \u306e\u652f\u6255\u3044\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e00\u7a2e\u3002","title":"P2SH"},{"location":"topics/Blockchain/2016-12-24--p2sh/#scriptpubkey","text":"P2SH \u306e scriptPubKey \u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002 1 OP_HASH160 [20-byte-hash-value] OP_EQUAL \u3053\u306e\u5224\u5b9a\u306f\u53b3\u3057\u304f\u3001OP_EQUAL \u306e\u5f8c\u306b\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u305f\u308a\u300120byte \u30c7\u30fc\u30bf\u3092\u7a4d\u3080\u306e\u306b 0x14 \u4ee5\u5916\u306e\u30aa\u30da\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u305f\u308a\u3057\u305f\u3089 P2SH \u3068\u306f\u89e3\u91c8\u3055\u308c\u306a\u3044\u3002 bitcoin-core 0.13.1 \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u306f\u3001script/script.cpp \u306b IsPayToScriptHash \u3068\u3044\u3046\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002 \u30b3\u30fc\u30c9\u3092\u8aad\u3081\u3070\u53b3\u5bc6\u306b\u30c1\u30a7\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u304b\u3068\u3002 ```cpp:script/script.cpp bool CScript::IsPayToScriptHash() const { // Extra-fast test for pay-to-script-hash CScripts: return (this->size() == 23 && ( this)[0] == OP_HASH160 && ( this)[1] == 0x14 && (*this)[22] == OP_EQUAL); } 1 2 3 4 5 6 7 0x14 \u306f \u3001 \u6b21\u306e 20 byte \u3092\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\u547d\u4ee4 \u3002 ## scriptSig P2SH \u306b\u5bfe\u3059\u308b scriptSig \u306b\u3082\u6b21\u306e\u5236\u7d04\u304c\u304b\u304b\u308b : - PUSH\u7cfb\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u306e\u307f\u3067\u69cb\u6210\u3055\u308c\u308b \u3053\u3061\u3089\u306e\u5b9f\u88c5\u306f script / script . cpp \u306e [ IsPushOnly ] ( https : // github . com / bitcoin / bitcoin / blob / v0 .13.1 / src / script / script . cpp#L239 ) \u306b\u3042\u308b bool CScript::IsPushOnly(const_iterator pc) const { while (pc < end()) { opcodetype opcode; if (!GetOp(pc, opcode)) return false; // Note that IsPushOnly() does consider OP_RESERVED to be a // push-type opcode, however execution of OP_RESERVED fails, so // it's not relevant to P2SH/BIP62 as the scriptSig would fail prior to // the P2SH special validation code being executed. if (opcode > OP_16) return false; } return true; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u5f15\u6570 pc \u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5148\u982d\u304c\u4e0e\u3048\u3089\u308c\u308b\u3068\u601d\u3044\u306d\u3047(\u8a73\u7d30\u306f [VerifyScript \u95a2\u6570](https://github.com/bitcoin/bitcoin/blob/v0.13.1/src/script/interpreter.cpp#L1460))\u3002 OP_16 \u307e\u3067\u3068\u3044\u3046\u3053\u3068\u306f\u3001https://en.bitcoin.it/wiki/Script \u306b\u3088\u308b\u3068\u3001 - OP_0 - OP_pushx - OP_PUSHDATAx - OP_1_NEGATIVE, OP_1 - OP_16 \u304c\u8a31\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002 ## script \u306e\u5b9f\u884c scriptPubKey \u304c P2SH \u306e\u5834\u5408\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u306f\u6b21\u306e\u3088\u3046\u306a\u7279\u6b8a\u306a\u624b\u9806\u306b\u306a\u308b\u3002 1. scriptSig \u3092\u5b9f\u884c 2. \u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u3092\u4fdd\u5b58 3. scriptPubKey \u3092\u5b9f\u884c 4. 2\u3067\u4fdd\u5b58\u3057\u305f\u30b9\u30bf\u30c3\u30af\u306b\u623b\u3059 5. \u30b9\u30bf\u30c3\u30af\u306e\u9802\u4e0a\u3092\u53d6\u308a\u51fa\u3059 6. 5\u3067\u53d6\u308a\u51fa\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u307f\u306a\u3057\u3066\u5b9f\u884c\u3059\u308b 1,3 \u306f\u901a\u5e38\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u3068\u540c\u3058\u3002 2 \u3067\u4fdd\u5b58\u3057\u305f\u30b9\u30bf\u30c3\u30af\u306b\u5bfe\u3057\u3066\u30014-6 \u3063\u3067\u305d\u306e\u6700\u4e0a\u6bb5\u306e\u5024\u306b\u3042\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002 scriptSig \u306e\u5b9f\u884c\u7d50\u679c\u306e\u30b9\u30bf\u30c3\u30af\u306b\u306f\u6700\u4e0a\u6bb5\u306b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3001\u3064\u307e\u308a\u5c11\u306a\u304f\u3068\u3082\u4e00\u3064\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3053\u3068\u304c\u8981\u8acb\u3055\u308c\u3066\u3044\u308b\u3002 \u3055\u3089\u306b\u3001\u3053\u306e\u6700\u4e0a\u6bb5\u306e\u30c7\u30fc\u30bf\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3042\u308a\u3001\u5f8c\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092 redeem script \u3068\u8a00\u3046\u3002 ### scriptPubKey scriptSig \u306e\u7d50\u679c\u3001\u30b9\u30bf\u30c3\u30af\u6700\u4e0a\u6bb5\u306b redeem script \u304c\u3042\u308b\u72b6\u614b\u3067 scriptPubKey \u306e\u5b9f\u884c\u306b\u79fb\u308b\u3002 scriptPubKey \u306f\u3001\u5148\u306b\u793a\u3057\u305f\u3088\u3046\u306b\u3001 OP_HASH160 [20-byte-hash-value] OP_EQUAL 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u3067\u3042\u308b\u3002 redeem script \u306e hash160(= ripemd160(sha256(redeem_script)) \u3092\u53d6\u308a\u3001\u305d\u308c\u304c [20-byte-hash-value] \u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u5224\u5b9a\u3057\u3066\u3044\u308b\u3002 \u6574\u7406\u3059\u308b\u3068\u3001 a. scriptPubKey \u306b\u306f hash\u5024\u304c\u5165\u3063\u3066\u3044\u308b b. scriptSig \u306b\u306f\u3001hash \u5024\u304c a \u306e\u5024\u3068\u4e00\u81f4\u3059\u308b redeem script \u304c\u5165\u308b \u901a\u5e38(P2PKH)\u306e scriptPubKey \u3068\u7570\u306a\u308a\u3001P2SH \u306e scriptPubKey \u306b\u306f\u516c\u958b\u9375\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304c\u3001redeem script \u306e\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u542b\u3081\u3089\u308c\u3066\u3044\u308b\u3002\u5b9f\u8cea\u7684\u306b\u3001\u7279\u5b9a\u306e redeem script \u304c\u5165\u308b\u3053\u3068\u3092\u5f37\u5236\u3057\u3066\u3044\u308b\u308f\u3051\u3060\u3002 redeem script \u306b\u516c\u958b\u9375\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u3001utxo \u4f7f\u7528\u306e\u305f\u3081\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306f P2PKH \u3068\u540c\u69d8\u306b\u78ba\u4fdd\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u3002 ### redeem script redeem script \u306f\u666e\u901a\u306b\u5b9f\u884c\u3059\u308c\u3070\u3088\u3044\u3002 \u305f\u3060\u3057 redeem script \u306f\u5b9f\u8cea\u7684\u306b scriptPubKey \u3067\u6c7a\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u3001transaction \u751f\u6210\u6642\u306b\u5206\u304b\u308b\u3088\u3046\u306a\u60c5\u5831\u3001\u4f8b\u3048\u3070\u7f72\u540d\u3092\u542b\u3081\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002\u305d\u3046\u3044\u3046\u306e\u306f scriptSig \u306b\u5165\u308c\u308b\u3002 \u305f\u3068\u3048\u3070\u3001\u5358\u7d14\u306a checksig \u3092\u3059\u308b redeem script \u3068 scriptSig \u306f\u6b21\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u3088\u3044: scriptSig: [sign] [redeem script] redeemScr: [pubkey] CHECKSIG 1 2 3 4 5 6 7 8 9 10 // \u5b9f\u969b\u306b\u4f7f\u3046\u306e\u306a\u3089\u3001P2PKH \u306e\u3088\u3046\u306b\u516c\u958b\u9375\u306e\u30cf\u30c3\u30b7\u30e5\u78ba\u8a8d\u3092\u5165\u308c\u305f\u65b9\u304c\u3088\u3044 redeem script \u3092\u5b9f\u884c\u3059\u308b\u6642\u306e\u30b9\u30bf\u30c3\u30af\u306f\u3001signature \u304c\u4e00\u3064\u3042\u308b\u3060\u3051\u3002 \u305d\u306e\u5f8c redeem script \u306e\u5b9f\u884c\u3067\u3001pubkey \u3092\u7a4d\u3093\u3067\u3001CHECKSIG \u3092\u5b9f\u884c\u3059\u308b\u3002 CHECKSIG \u5b9f\u884c\u6642\u306b\u306f\u3001\u30b9\u30bf\u30c3\u30af\u306f\u4e0b\u304b\u3089 sign,pubkey \u3068\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6b63\u3057\u304f\u691c\u8a3c\u3067\u304d\u308b\u3002 \u306a\u304a\u3001\u4e0a\u306e\u4f8b\u306e\u3088\u3046\u306b pubkey \u3092 redeem script \u306b\u7f6e\u3044\u3066\u5236\u9650\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3002scriptSig \u306e\u6700\u5f8c\u306b\u7f6e\u3044\u3066\u3082\u52d5\u4f5c\u3059\u308b\u304c\u3001\u305d\u308c\u3060\u3068\u7f72\u540d\u691c\u8a3c\u306b\u7528\u3044\u308b\u516c\u958b\u9375\u3092\u4efb\u610f\u306b\u6307\u5b9a\u3067\u304d\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002 2-of-3 multisig \u306e\u5834\u5408\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b: scriptSig: OP_0 [sign1] [sign2] [redeem script] redeemScr: OP_2 [pubkey1] [pubkey2] [pubkey3] OP_3 CHECKMULTISIG 1 CHECKMULTISIG \u5b9f\u884c\u6642\u306e\u30b9\u30bf\u30c3\u30af\u306f\u4e0b\u304b\u3089\u3001 <0> <2> <3> ``` \u3068\u306a\u3063\u3066\u3044\u308b\u3002 \u3053\u308c\u306f\u6b63\u3057\u3044 CHECKMULTISIG \u306e\u4e26\u3073\u306b\u306a\u3063\u3066\u3044\u308b\u3002 // \u6700\u521d\u306e 0 \u306f CHECKMULTISIG \u306e\u30d0\u30b0\u306b\u3088\u308a\u5fc5\u8981\u306a\u30c0\u30df\u30fc\u306e\u5024 P2PKH \u3067 multisig \u3092\u884c\u3046\u3068\u3001\u516c\u958b\u9375\u304c\u3059\u3079\u3066 scriptPubKey \u306b\u5165\u308b\u306e\u3067\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u30de\u30eb\u30c1\u30b7\u30b0\u7528\u306e\u30a2\u30c9\u30ec\u30b9\u3082\u305d\u308c\u306b\u4f34\u3063\u3066\u9577\u304f\u306a\u308b\u3002 P2SH \u306e\u5834\u5408\u3001redeem script \u306e\u9577\u3055\u306b\u95a2\u308f\u3089\u305a\u3001scriptPubKey \u306e\u9577\u3055\u306f 23byte \u3067\u56fa\u5b9a\u306b\u306a\u308b\u3002","title":"scriptPubKey"},{"location":"topics/Blockchain/2016-12-24--p2sh/#p2sh_1","text":"BIP13 P2SH \u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u901a\u5e38\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u540c\u69d8\u306b base58check \u3067\u4f5c\u6210\u3059\u308b\u3002 \u305f\u3060\u3057\u4ee5\u4e0b\u306e\u9055\u3044\u304c\u3042\u308b: P2PKH \u30a2\u30c9\u30ec\u30b9\u3067\u306f\u516c\u958b\u9375\u306e hash160 \u306b\u5bfe\u3057\u3066 base58check \u3092\u304b\u3051\u308b\u304c\u3001P2SH \u30a2\u30c9\u30ec\u30b9\u3067\u306f redeem script \u306e hash160 \u3092\u4f7f\u3046\u3002 (scriptPubKey \u306e 20byte hash \u3068\u540c\u3058\u5024) version byte \u306f\u3001main-net \u3067\u306f 5, testnet \u3067\u306f 196. base58 \u5f8c\u306e\u5148\u982d\u6587\u5b57\u306f\u3001\u305d\u308c\u305e\u308c '3' \u3068 '2'","title":"P2SH \u30a2\u30c9\u30ec\u30b9"},{"location":"topics/Blockchain/2016-12-24--p2sh/#_2","text":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u7f72\u540d\u3092\u4f5c\u308b\u969b\u306b\u306f\u3001\u5bfe\u5fdc\u3059\u308b UTXO \u306e scriptPubKey \u3067 scriptSig \u3092\u7f6e\u304d\u63db\u3048\u308b\u304c\u3001 P2SH \u306e\u5834\u5408\u306f redeem script \u3067\u7f6e\u304d\u63db\u3048\u308b\u3002","title":"\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u7f72\u540d\u5bfe\u8c61"},{"location":"topics/Blockchain/2017-07-21--uasf/","tags":["Tech","Bitcoin"],"text":"\u5206\u5c90\u307e\u3068\u3081 2017-07-21 \u95a2\u9023\u3059\u308b\u30d5\u30a9\u30fc\u30af\u306f\u4ee5\u4e0b\u306e\u3082\u306e\u304c\u3042\u308b: Segwit or BIP141. BIP9 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 Segwit2x. BIP91 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 UASF. BIP148 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 BitcoinCash or BitcoinUnlimited or UAHF. http://www.bitcoincash.org/ \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 Segwit and BIP9 sigScript \u3092 tx \u304b\u3089\u5206\u96e2\u3059\u308b\u4ed5\u69d8(BIP141). \u30c7\u30d7\u30ed\u30a4\u624b\u9806\u306f BIP9 \u3067\u3001bit \u306f 1, \u671f\u9593\u306f 2016\u5e7411\u670815\u65e5\u304b\u3089\u4e00\u5e74\u9593\u3002 BIP9 \u306f\u3001\u30c1\u30a7\u30fc\u30f3\u30d6\u30ed\u30c3\u30af\u3092 2016 \u6bce\u306b\u533a\u5207\u308a\u3001\u3042\u308b\u30d6\u30ed\u30c3\u30af\u7fa4\u306e\u72b6\u614b\u306f\u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u306e\u72b6\u614b\u306b\u3088\u3063\u3066\u6c7a\u3081\u308b\u3002 \u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u306e 1916 \u30d6\u30ed\u30c3\u30af(95%)\u304c\u6307\u5b9a\u306e bit \u3092\u7acb\u3066\u3066\u3044\u305f\u5834\u5408\u3001\u30ed\u30c3\u30af\u30a4\u30f3\u72b6\u614b\u3068\u3059\u308b\u3002 \u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u304c\u30ed\u30c3\u30af\u30a4\u30f3\u72b6\u614b\u306e\u5834\u5408\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u72b6\u614b\u3068\u3059\u308b\u3002 \u8981\u3059\u308b\u306b\u30012016\u30d6\u30ed\u30c3\u30af\u7fa4\u4e2d\u306e95%\u304c bit \u3092\u7acb\u3066\u3066\u3044\u305f\u3089\u3001\u3055\u3089\u306b2016\u30d6\u30ed\u30c3\u30af\u7d4c\u904e\u306e\u3061\u306b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u308b\u3002 UASF and BIP148 bit1 \u304c\u7acb\u3063\u3066\u3044\u306a\u3044(\u6b63\u78ba\u306b\u306f3,2,1bit \u304c 001 \u3067\u306f\u306a\u3044)\u30d6\u30ed\u30c3\u30af\u3092\u7121\u52b9\u3068\u3059\u308b\u3002 \u5fc5\u7136\u7684\u306b 100% \u306e\u30d6\u30ed\u30c3\u30af\u3067 bit1 \u304c\u7acb\u3064\u306e\u3067\u3001Segwit \u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 \u30c7\u30d7\u30ed\u30a4\u306f 2017\u5e748\u67081\u65e5\u304b\u3089 2017\u5e7411\u670817\u65e5\u306e\u30d5\u30e9\u30b0\u30c7\u30a4\u65b9\u5f0f\u3002 \u6b63\u78ba\u306a\u958b\u59cb\u6642\u523b\u306f unixtime 1501545600 = 2017-08-01T09:00:00+09:00 \u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067 Segwit deploy \u304c\u30ed\u30c3\u30af\u30a4\u30f3\u307e\u305f\u306f\u30a2\u30af\u30c6\u30a3\u30d6\u72b6\u614b\u3067\u7121\u3044\u5834\u5408\u306b\u767a\u52d5\u3059\u308b\u3002 Segwit2x and BIP91 BIP148 \u3068\u540c\u69d8\u306b\u3001bit1 \u304c\u7acb\u3063\u3066\u3044\u306a\u3044\u30d6\u30ed\u30c3\u30af\u3092\u7121\u52b9\u3068\u3059\u308b\u3002 \u30c7\u30d7\u30ed\u30a4\u65b9\u6cd5\u306f BIP9 \u306b\u4f3c\u3066\u3001336\u30d6\u30ed\u30c3\u30af\u4e2d\u306e 269\u30d6\u30ed\u30c3\u30af(80%)\u3067\u30ed\u30c3\u30af\u30a4\u30f3\u3002\u30d5\u30e9\u30b0\u306f bit4. \u671f\u9593\u306f 2017\u5e747\u67081\u65e5\u304b\u30892017\u5e7411\u670815\u65e5\u3002 BitcoinCash \u30cf\u30fc\u30c9\u30d5\u30a9\u30fc\u30af\u3002 \u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092 1MB\u8d858MB\u4ee5\u4e0b\u306b\u3059\u308b\u3002 \u3055\u3089\u306b\u65b0\u305f\u306b SIGHASH_FORKID(=0) \u3092\u8ffd\u52a0\u3057\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u3092\u9632\u6b62\u3002 \u30c7\u30d7\u30ed\u30a4\u306f 1501590000 = 2017-08-01T21:20:00+0900 \u306e\u30d5\u30e9\u30b0\u30c7\u30a4\u3002 \u72b6\u6cc1 http://bitcoin.sipa.be/versions.html 2017\u5e747\u670820\u65e5\u73fe\u5728\u3001 Segwit (flag1) \u306f 45% \u307b\u3069\u3067\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u9054\u6210\u306e\u898b\u8fbc\u307f\u306f\u306a\u3044\u3002 Segwit2x (flag4) \u306f 80% \u306b\u9054\u3057\u3001\u73fe\u30d4\u30ea\u30aa\u30c9\u3067\u30ed\u30c3\u30af\u30a4\u30f3\u306e\u53ef\u80fd\u6027\u9ad8\u3044\u3002 UASF \u306f\u30018/1\u307e\u3067\u306b Segwit \u30ed\u30c3\u30af\u30a4\u30f3\u3055\u308c\u306a\u3044\u306e\u3067\u3001UASF \u30ed\u30c3\u30af\u30a4\u30f3\u306e\u898b\u8fbc\u307f\u3002 UAHF \u306f Jihan \u306e\u8a00\u52d5\u3088\u308a\u767a\u52d5\u306e\u898b\u8fbc\u307f\u3002 \u3088\u308a\u7cbe\u78ba\u306a\u65e5\u4ed8\u3092\u8abf\u3079\u308b\u3002 https://blockchain.info/ja 2017-07-20 12:46:15 UTC(=@1500554775) \u306b 476700 \u30d6\u30ed\u30c3\u30af\u304c\u6398\u3089\u308c\u3066\u3044\u308b\u3002 https://blockchain.info/ja/block/000000000000000000bd6ed8a9f5f2b1f2708e8c7eefb33a14ba95726bbf0810 336\u30d6\u30ed\u30c3\u30af\u671f\u9593\u306e\u59cb\u307e\u308a\u306f\u3001476784, 477120, 477456, ... \u3068\u306a\u308b\u3002 \u540c\u69d8\u306b 2016 \u30d6\u30ed\u30c3\u30af\u671f\u9593\u306f\u3001477792, 479808, 481824, ... 1\u30d6\u30ed\u30c3\u30af10\u5206\u3068\u3057\u3066\u3001\u5404\u30d6\u30ed\u30c3\u30af\u306e\u6642\u523b\u3092\u4e88\u6e2c\u3059\u308b\u3068\u3001 %336 %2016 unixtime JST 476784 1500605175 2017-07-21 11:46:15 477120 1500806775 2017-07-23 19:46:15 477456 1501008375 2017-07-26 03:46:15 477792 477792 1501209975 2017-07-28 11:46:15 478128 1501411575 2017-07-30 19:46:15 1501545600 2017-08-01 09:00:00 1501590000 2017-08-01 21:20:00 478464 1501613175 2017-08-02 03:46:15 478800 1501814775 2017-08-04 11:46:15 479808 481824 483840 \u307e\u305a Segwit2x \u3060\u304c\u3001\u73fe\u30d4\u30ea\u30aa\u30c9\u3067 80% \u3092\u5360\u3081\u308c\u3070\u30017\u670821\u65e5\u306b\u30ed\u30c3\u30af\u30a4\u30f3\u30017\u670823\u65e5\u306b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u308b\u3002 \u73fe\u30d4\u30ea\u30aa\u30c9\u3067\u672a\u9054\u3067\u3042\u308c\u3070\u3001\u6b21\u306e\u30d4\u30ea\u30aa\u30c9\u306b\u9806\u306b\u305a\u308c\u308b\u3002 \u4eee\u306b\u73fe\u30d4\u30ea\u30aa\u30c9\u3067 Segwit2x \u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3082\u3001Segwit \u306e\u73fe\u884c\u30d4\u30ea\u30aa\u30c9\u3067 flag1 \u3092 90% \u306b\u3059\u308b\u306e\u306f\u7121\u7406\u3002\u6b21\u306e Segwit \u30d4\u30ea\u30aa\u30c9\u306f block 477792 \u304a\u3088\u305d 7\u670828\u65e5\u304b\u3089\u59cb\u307e\u308a\u3001\u3053\u306e\u671f\u9593\u304c\u7d42\u308f\u3063\u3066\u3088\u3046\u3084\u304f\u30ed\u30c3\u30af\u30a4\u30f3\u306b\u306a\u308b\u3002 \u3068\u3053\u308d\u304c\u3053\u306e\u671f\u9593\u4e2d\u306b UASF \u306e\u30d5\u30e9\u30b0\u30c7\u30a4 8\u67081\u65e5\u304c\u542b\u307e\u308c\u308b\u306e\u3067\u3001Segwit2x \u306e\u72b6\u6cc1\u306b\u304b\u304b\u308f\u3089\u305a UASF \u304c\u767a\u52d5\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3060\u308d\u3046\u3002 \u305f\u3060\u3057\u3001Segwit2x \u304c\u767a\u52d5\u6e08\u3067\u3042\u308c\u3070\u3001Segwit2x \u30ce\u30fc\u30c9\u3068 UASF \u30ce\u30fc\u30c9\u3067\u52d5\u4f5c\u306f\u540c\u4e00\u306b\u306a\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001\u767a\u751f\u3059\u308b\u30d5\u30a9\u30fc\u30af\u306f\u3001 Segwit2x \u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u305f\u6642\u306e Segwit2x \u3068\u73fe\u884c\u30c1\u30a7\u30fc\u30f3\u3067\u306e\u30d5\u30a9\u30fc\u30af\u306e\u307f\u306b\u306a\u308b(UAHF\u306f\u9664\u304f)\u3002 Segwit2x \u306e\u30bd\u30d5\u30c8\u30d5\u30a9\u30fc\u30af Segwit2x \u306e\u307f\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001 Segwit2x\u30ce\u30fc\u30c9: flag1 \u306e\u7acb\u3063\u3066\u3044\u306a\u3044\u30d6\u30ed\u30c3\u30af\u3092\u62d2\u5426\u3059\u308b(flag1\u30c1\u30a7\u30fc\u30f3) \u975eSegwit2x\u30ce\u30fc\u30c9: flag1 \u306b\u95a2\u308f\u3089\u305a\u53d7\u3051\u5165\u308c\u308b(core\u30c1\u30a7\u30fc\u30f3) \u3068\u3044\u3046\u4e8c\u3064\u306e\u30c1\u30a7\u30fc\u30f3\u304c\u4e26\u3073\u7acb\u3064\u3002 flag1 \u30d6\u30ed\u30c3\u30af\u306f\u4e21\u65b9\u306e\u30c1\u30a7\u30fc\u30f3\u3067\u6709\u52b9\u3067\u3042\u308a\u3001\u975eflag1\u30d6\u30ed\u30c3\u30af\u306fcore\u30c1\u30a7\u30fc\u30f3\u306e\u307f\u3067\u6709\u52b9\u306b\u306a\u308b\u3002 \u975eSegwit2x\u30ce\u30fc\u30c9\u304b\u3089\u3059\u308b\u3068\u6709\u52b9\u306a\u4e8c\u3064\u306e\u30c1\u30a7\u30fc\u30f3\u304c\u3042\u308b\u72b6\u614b\u306b\u306a\u308b\u3002 core\u30c1\u30a7\u30fc\u30f3\u304c\u9577\u3044\u72b6\u614b\u304b\u3089 flag1\u30c1\u30a7\u30fc\u30f3\u304c\u9577\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u3001flag1\u30c1\u30a7\u30fc\u30f3\u304c\u30e1\u30a4\u30f3\u30c1\u30a7\u30fc\u30f3\u306b\u683c\u4e0a\u3052\u3055\u308c\u3001core\u30c1\u30a7\u30fc\u30f3\u4e0a\u306e\u53d6\u5f15\u304c\u7121\u304b\u3063\u305f\u3053\u3068\u306b\u306a\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002 \u307e\u305f\u3001\u30c1\u30a7\u30fc\u30f3\u304c\u4e26\u7acb\u3057\u3066\u3044\u308b\u72b6\u6cc1\u3060\u3068\u3001\u3069\u3061\u3089\u306e\u30c1\u30a7\u30fc\u30f3\u3082\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u3092\u53d7\u3051\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002 \u30d6\u30ed\u30c3\u30af\u306e\u6d41\u901a\u304c\u5341\u5206\u3067\u3001\u304b\u3064 Segwit2x \u30ce\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u304c\u591a\u3051\u308c\u3070\u3001core\u30c1\u30a7\u30fc\u30f3\u3088\u308a\u3082 flag1 \u30c1\u30a7\u30fc\u30f3\u306e\u65b9\u304c\u9577\u304f\u306a\u308b\u306e\u3067\u518d\u69cb\u6210\u306f\u767a\u751f\u3057\u306a\u3044\u3067\u3059\u3080\u3002 \u4e00\u5fdc Segwit2x \u304c\u6709\u52b9\u306b\u306a\u308b\u306e\u306f 80% \u304c\u6761\u4ef6\u306a\u306e\u3067\u3001\u5f7c\u3089\u304c\u305d\u306e\u307e\u307e Segwit2x \u3092\u6709\u52b9\u306b\u3057\u7d9a\u3051\u308c\u3070\u3053\u306e\u3088\u3046\u306a\u72b6\u6cc1\u306b\u306a\u308b\u3060\u308d\u3046\u3002 \u3082\u3057 Segwit2x \u5074\u306e\u30b7\u30b0\u30ca\u30eb\u304c\u507d\u88c5\u306e\u5834\u5408\u3001flag1 \u30c1\u30a7\u30fc\u30f3\u3068 core \u30c1\u30a7\u30fc\u30f3\u306e\u518d\u69cb\u6210\u304c\u8d77\u304d\u308b\u72b6\u614b\u306b\u306a\u308b\u3002UASF \u304c\u8d77\u304d\u3066\u3082\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u30d0\u30e9\u30f3\u30b9\u306f\u5909\u308f\u308b\u304c\u3001\u3084\u306f\u308a\u5727\u5012\u7684\u306a\u5dee\u304c\u4ed8\u304b\u306a\u3044\u5834\u5408\u306f\u5e38\u306b\u518d\u69cb\u6210\u304c\u8d77\u304d\u3046\u308b\u72b6\u614b\u306b\u306a\u308b\u3002 \u307e\u305f\u3001Segwit2x \u30ce\u30fc\u30c9\u304c\u5c11\u6570(\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u3067\u306f\u306a\u304f\u3066\u30ce\u30fc\u30c9\u6570)\u3067\u4e92\u3044\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3082\u5225\u306e\u554f\u984c\u304c\u3042\u308b\u3002 \u975eflag1\u30d6\u30ed\u30c3\u30af\u304c\u9577\u304f\u306a\u308b\u3068\u3001\u65b0\u305f\u306b\u6398\u3089\u308c\u305fflag1\u30d6\u30ed\u30c3\u30af\u306f\u77ed\u3044\u30c1\u30a7\u30fc\u30f3\u306e\u3082\u306e\u306a\u306e\u3067\u975eSegwit2x\u30ce\u30fc\u30c9\u306f\u4f1d\u642c\u3057\u306a\u3044\u3002 \u5b64\u7acb\u3057\u305f Segwit2x \u30ce\u30fc\u30c9\u304c\u3069\u3093\u3069\u3093\u65b0\u898f\u30d6\u30ed\u30c3\u30af\u3092\u6398\u3063\u3066\u3082\u305d\u308c\u306f\u4f1d\u642c\u3055\u308c\u305a\u3001\u305d\u306e\u30ce\u30fc\u30c9\u56fa\u6709\u306e\u30c1\u30a7\u30fc\u30f3\u3068\u306a\u308b\u3002\u307e\u305f\u5225\u306e\u5b64\u7acb\u3057\u305f Segwit2x \u30ce\u30fc\u30c9\u306f\u72ec\u81ea\u306e\u30c1\u30a7\u30fc\u30f3\u3092\u5ef6\u3070\u3059\u3002\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u306f\u5b9f\u8cea\u7684\u306b\u30ce\u30fc\u30c9\u5358\u4e00\u306e\u3082\u306e\u306b\u306a\u308b\u306e\u3067\u3001\u6b21\u306e\u96e3\u6613\u5ea6\u8abf\u6574\u307e\u3067\u30d6\u30ed\u30c3\u30af\u304c\u307b\u3068\u3093\u3069\u6398\u3089\u308c\u306a\u3044\u72b6\u614b\u306b\u306a\u308b\u3060\u308d\u3046\u3002 UAHF BitcoinCash \u306f segwit \u304c\u6709\u52b9\u7121\u52b9\u3069\u3061\u3089\u306b\u305b\u3088 core \u306e\u30d6\u30ed\u30c3\u30af\u3068\u4e92\u63db\u6027\u304c\u7121\u3044\u3002 \u518d\u69cb\u6210\u306e\u53ef\u80fd\u6027\u306f\u7121\u304f\u3001\u5b8c\u5168\u306b\u5225\u306e\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u3057\u3066\u6271\u3048\u308b\u3002 \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306e\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u5bfe\u7b56\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002 UAHF \u30c1\u30a7\u30fc\u30f3\u306e\u307f\u3067\u6709\u52b9\u306a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3(SIGHASH_FORKID)\u3092\u4f5c\u308b\u65b9\u6cd5\u3068\u3001UAHF\u30c1\u30a7\u30fc\u30f3\u3067\u7121\u52b9\u306a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3(OP_RETURN \u306b\u7279\u5b9a\u6587\u5b57\u5217\u3092\u5165\u308c\u308b)\u65b9\u6cd5\u306e\u4e8c\u901a\u308a\u3002 \u203b\u975esegwit\u306a\u901a\u5e38\u306ecore\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306fUAHF\u3067\u3082\u6709\u52b9\u306a\u306e\u304b\u306a\uff1f \u3060\u3063\u305f\u3089\u30ea\u30d7\u30ec\u30a4\u3055\u308c\u3061\u3083\u3044\u305d\u3046\u3060\u3002 \u306a\u304a\u3001\u5206\u5c90\u524d\u306b\u5b58\u5728\u3057\u3066\u3044\u305f UTXO \u306f\u3001\u5206\u5c90\u5f8c\u3082\u6709\u52b9\u3067\u3042\u308b\u3002 \u30e6\u30fc\u30b6\u30fc\u304b\u3089\u898b\u308b\u3068\u3001\u5206\u5c90\u524d\u306e BTC \u3068\u540c\u984d\u306e BCC \u3092\u4fdd\u6709\u3057\u305f\u72b6\u614b\u306b\u306a\u308b\u3002","title":"Bitcoin \u306e segwit fork \u306e\u307e\u3068\u3081"},{"location":"topics/Blockchain/2017-07-21--uasf/#_1","text":"2017-07-21 \u95a2\u9023\u3059\u308b\u30d5\u30a9\u30fc\u30af\u306f\u4ee5\u4e0b\u306e\u3082\u306e\u304c\u3042\u308b: Segwit or BIP141. BIP9 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 Segwit2x. BIP91 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 UASF. BIP148 \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 BitcoinCash or BitcoinUnlimited or UAHF. http://www.bitcoincash.org/ \u306e\u624b\u9806\u3067\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002","title":"\u5206\u5c90\u307e\u3068\u3081"},{"location":"topics/Blockchain/2017-07-21--uasf/#segwit-and-bip9","text":"sigScript \u3092 tx \u304b\u3089\u5206\u96e2\u3059\u308b\u4ed5\u69d8(BIP141). \u30c7\u30d7\u30ed\u30a4\u624b\u9806\u306f BIP9 \u3067\u3001bit \u306f 1, \u671f\u9593\u306f 2016\u5e7411\u670815\u65e5\u304b\u3089\u4e00\u5e74\u9593\u3002 BIP9 \u306f\u3001\u30c1\u30a7\u30fc\u30f3\u30d6\u30ed\u30c3\u30af\u3092 2016 \u6bce\u306b\u533a\u5207\u308a\u3001\u3042\u308b\u30d6\u30ed\u30c3\u30af\u7fa4\u306e\u72b6\u614b\u306f\u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u306e\u72b6\u614b\u306b\u3088\u3063\u3066\u6c7a\u3081\u308b\u3002 \u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u306e 1916 \u30d6\u30ed\u30c3\u30af(95%)\u304c\u6307\u5b9a\u306e bit \u3092\u7acb\u3066\u3066\u3044\u305f\u5834\u5408\u3001\u30ed\u30c3\u30af\u30a4\u30f3\u72b6\u614b\u3068\u3059\u308b\u3002 \u76f4\u524d\u306e\u30d6\u30ed\u30c3\u30af\u7fa4\u304c\u30ed\u30c3\u30af\u30a4\u30f3\u72b6\u614b\u306e\u5834\u5408\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u72b6\u614b\u3068\u3059\u308b\u3002 \u8981\u3059\u308b\u306b\u30012016\u30d6\u30ed\u30c3\u30af\u7fa4\u4e2d\u306e95%\u304c bit \u3092\u7acb\u3066\u3066\u3044\u305f\u3089\u3001\u3055\u3089\u306b2016\u30d6\u30ed\u30c3\u30af\u7d4c\u904e\u306e\u3061\u306b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u308b\u3002","title":"Segwit and BIP9"},{"location":"topics/Blockchain/2017-07-21--uasf/#uasf-and-bip148","text":"bit1 \u304c\u7acb\u3063\u3066\u3044\u306a\u3044(\u6b63\u78ba\u306b\u306f3,2,1bit \u304c 001 \u3067\u306f\u306a\u3044)\u30d6\u30ed\u30c3\u30af\u3092\u7121\u52b9\u3068\u3059\u308b\u3002 \u5fc5\u7136\u7684\u306b 100% \u306e\u30d6\u30ed\u30c3\u30af\u3067 bit1 \u304c\u7acb\u3064\u306e\u3067\u3001Segwit \u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002 \u30c7\u30d7\u30ed\u30a4\u306f 2017\u5e748\u67081\u65e5\u304b\u3089 2017\u5e7411\u670817\u65e5\u306e\u30d5\u30e9\u30b0\u30c7\u30a4\u65b9\u5f0f\u3002 \u6b63\u78ba\u306a\u958b\u59cb\u6642\u523b\u306f unixtime 1501545600 = 2017-08-01T09:00:00+09:00 \u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067 Segwit deploy \u304c\u30ed\u30c3\u30af\u30a4\u30f3\u307e\u305f\u306f\u30a2\u30af\u30c6\u30a3\u30d6\u72b6\u614b\u3067\u7121\u3044\u5834\u5408\u306b\u767a\u52d5\u3059\u308b\u3002","title":"UASF and BIP148"},{"location":"topics/Blockchain/2017-07-21--uasf/#segwit2x-and-bip91","text":"BIP148 \u3068\u540c\u69d8\u306b\u3001bit1 \u304c\u7acb\u3063\u3066\u3044\u306a\u3044\u30d6\u30ed\u30c3\u30af\u3092\u7121\u52b9\u3068\u3059\u308b\u3002 \u30c7\u30d7\u30ed\u30a4\u65b9\u6cd5\u306f BIP9 \u306b\u4f3c\u3066\u3001336\u30d6\u30ed\u30c3\u30af\u4e2d\u306e 269\u30d6\u30ed\u30c3\u30af(80%)\u3067\u30ed\u30c3\u30af\u30a4\u30f3\u3002\u30d5\u30e9\u30b0\u306f bit4. \u671f\u9593\u306f 2017\u5e747\u67081\u65e5\u304b\u30892017\u5e7411\u670815\u65e5\u3002","title":"Segwit2x and BIP91"},{"location":"topics/Blockchain/2017-07-21--uasf/#bitcoincash","text":"\u30cf\u30fc\u30c9\u30d5\u30a9\u30fc\u30af\u3002 \u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092 1MB\u8d858MB\u4ee5\u4e0b\u306b\u3059\u308b\u3002 \u3055\u3089\u306b\u65b0\u305f\u306b SIGHASH_FORKID(=0) \u3092\u8ffd\u52a0\u3057\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u3092\u9632\u6b62\u3002 \u30c7\u30d7\u30ed\u30a4\u306f 1501590000 = 2017-08-01T21:20:00+0900 \u306e\u30d5\u30e9\u30b0\u30c7\u30a4\u3002","title":"BitcoinCash"},{"location":"topics/Blockchain/2017-07-21--uasf/#_2","text":"http://bitcoin.sipa.be/versions.html 2017\u5e747\u670820\u65e5\u73fe\u5728\u3001 Segwit (flag1) \u306f 45% \u307b\u3069\u3067\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u9054\u6210\u306e\u898b\u8fbc\u307f\u306f\u306a\u3044\u3002 Segwit2x (flag4) \u306f 80% \u306b\u9054\u3057\u3001\u73fe\u30d4\u30ea\u30aa\u30c9\u3067\u30ed\u30c3\u30af\u30a4\u30f3\u306e\u53ef\u80fd\u6027\u9ad8\u3044\u3002 UASF \u306f\u30018/1\u307e\u3067\u306b Segwit \u30ed\u30c3\u30af\u30a4\u30f3\u3055\u308c\u306a\u3044\u306e\u3067\u3001UASF \u30ed\u30c3\u30af\u30a4\u30f3\u306e\u898b\u8fbc\u307f\u3002 UAHF \u306f Jihan \u306e\u8a00\u52d5\u3088\u308a\u767a\u52d5\u306e\u898b\u8fbc\u307f\u3002 \u3088\u308a\u7cbe\u78ba\u306a\u65e5\u4ed8\u3092\u8abf\u3079\u308b\u3002 https://blockchain.info/ja 2017-07-20 12:46:15 UTC(=@1500554775) \u306b 476700 \u30d6\u30ed\u30c3\u30af\u304c\u6398\u3089\u308c\u3066\u3044\u308b\u3002 https://blockchain.info/ja/block/000000000000000000bd6ed8a9f5f2b1f2708e8c7eefb33a14ba95726bbf0810 336\u30d6\u30ed\u30c3\u30af\u671f\u9593\u306e\u59cb\u307e\u308a\u306f\u3001476784, 477120, 477456, ... \u3068\u306a\u308b\u3002 \u540c\u69d8\u306b 2016 \u30d6\u30ed\u30c3\u30af\u671f\u9593\u306f\u3001477792, 479808, 481824, ... 1\u30d6\u30ed\u30c3\u30af10\u5206\u3068\u3057\u3066\u3001\u5404\u30d6\u30ed\u30c3\u30af\u306e\u6642\u523b\u3092\u4e88\u6e2c\u3059\u308b\u3068\u3001 %336 %2016 unixtime JST 476784 1500605175 2017-07-21 11:46:15 477120 1500806775 2017-07-23 19:46:15 477456 1501008375 2017-07-26 03:46:15 477792 477792 1501209975 2017-07-28 11:46:15 478128 1501411575 2017-07-30 19:46:15 1501545600 2017-08-01 09:00:00 1501590000 2017-08-01 21:20:00 478464 1501613175 2017-08-02 03:46:15 478800 1501814775 2017-08-04 11:46:15 479808 481824 483840 \u307e\u305a Segwit2x \u3060\u304c\u3001\u73fe\u30d4\u30ea\u30aa\u30c9\u3067 80% \u3092\u5360\u3081\u308c\u3070\u30017\u670821\u65e5\u306b\u30ed\u30c3\u30af\u30a4\u30f3\u30017\u670823\u65e5\u306b\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u308b\u3002 \u73fe\u30d4\u30ea\u30aa\u30c9\u3067\u672a\u9054\u3067\u3042\u308c\u3070\u3001\u6b21\u306e\u30d4\u30ea\u30aa\u30c9\u306b\u9806\u306b\u305a\u308c\u308b\u3002 \u4eee\u306b\u73fe\u30d4\u30ea\u30aa\u30c9\u3067 Segwit2x \u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3082\u3001Segwit \u306e\u73fe\u884c\u30d4\u30ea\u30aa\u30c9\u3067 flag1 \u3092 90% \u306b\u3059\u308b\u306e\u306f\u7121\u7406\u3002\u6b21\u306e Segwit \u30d4\u30ea\u30aa\u30c9\u306f block 477792 \u304a\u3088\u305d 7\u670828\u65e5\u304b\u3089\u59cb\u307e\u308a\u3001\u3053\u306e\u671f\u9593\u304c\u7d42\u308f\u3063\u3066\u3088\u3046\u3084\u304f\u30ed\u30c3\u30af\u30a4\u30f3\u306b\u306a\u308b\u3002 \u3068\u3053\u308d\u304c\u3053\u306e\u671f\u9593\u4e2d\u306b UASF \u306e\u30d5\u30e9\u30b0\u30c7\u30a4 8\u67081\u65e5\u304c\u542b\u307e\u308c\u308b\u306e\u3067\u3001Segwit2x \u306e\u72b6\u6cc1\u306b\u304b\u304b\u308f\u3089\u305a UASF \u304c\u767a\u52d5\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3060\u308d\u3046\u3002 \u305f\u3060\u3057\u3001Segwit2x \u304c\u767a\u52d5\u6e08\u3067\u3042\u308c\u3070\u3001Segwit2x \u30ce\u30fc\u30c9\u3068 UASF \u30ce\u30fc\u30c9\u3067\u52d5\u4f5c\u306f\u540c\u4e00\u306b\u306a\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001\u767a\u751f\u3059\u308b\u30d5\u30a9\u30fc\u30af\u306f\u3001 Segwit2x \u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u305f\u6642\u306e Segwit2x \u3068\u73fe\u884c\u30c1\u30a7\u30fc\u30f3\u3067\u306e\u30d5\u30a9\u30fc\u30af\u306e\u307f\u306b\u306a\u308b(UAHF\u306f\u9664\u304f)\u3002","title":"\u72b6\u6cc1"},{"location":"topics/Blockchain/2017-07-21--uasf/#segwit2x","text":"Segwit2x \u306e\u307f\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001 Segwit2x\u30ce\u30fc\u30c9: flag1 \u306e\u7acb\u3063\u3066\u3044\u306a\u3044\u30d6\u30ed\u30c3\u30af\u3092\u62d2\u5426\u3059\u308b(flag1\u30c1\u30a7\u30fc\u30f3) \u975eSegwit2x\u30ce\u30fc\u30c9: flag1 \u306b\u95a2\u308f\u3089\u305a\u53d7\u3051\u5165\u308c\u308b(core\u30c1\u30a7\u30fc\u30f3) \u3068\u3044\u3046\u4e8c\u3064\u306e\u30c1\u30a7\u30fc\u30f3\u304c\u4e26\u3073\u7acb\u3064\u3002 flag1 \u30d6\u30ed\u30c3\u30af\u306f\u4e21\u65b9\u306e\u30c1\u30a7\u30fc\u30f3\u3067\u6709\u52b9\u3067\u3042\u308a\u3001\u975eflag1\u30d6\u30ed\u30c3\u30af\u306fcore\u30c1\u30a7\u30fc\u30f3\u306e\u307f\u3067\u6709\u52b9\u306b\u306a\u308b\u3002 \u975eSegwit2x\u30ce\u30fc\u30c9\u304b\u3089\u3059\u308b\u3068\u6709\u52b9\u306a\u4e8c\u3064\u306e\u30c1\u30a7\u30fc\u30f3\u304c\u3042\u308b\u72b6\u614b\u306b\u306a\u308b\u3002 core\u30c1\u30a7\u30fc\u30f3\u304c\u9577\u3044\u72b6\u614b\u304b\u3089 flag1\u30c1\u30a7\u30fc\u30f3\u304c\u9577\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u3001flag1\u30c1\u30a7\u30fc\u30f3\u304c\u30e1\u30a4\u30f3\u30c1\u30a7\u30fc\u30f3\u306b\u683c\u4e0a\u3052\u3055\u308c\u3001core\u30c1\u30a7\u30fc\u30f3\u4e0a\u306e\u53d6\u5f15\u304c\u7121\u304b\u3063\u305f\u3053\u3068\u306b\u306a\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002 \u307e\u305f\u3001\u30c1\u30a7\u30fc\u30f3\u304c\u4e26\u7acb\u3057\u3066\u3044\u308b\u72b6\u6cc1\u3060\u3068\u3001\u3069\u3061\u3089\u306e\u30c1\u30a7\u30fc\u30f3\u3082\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u3092\u53d7\u3051\u308b\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002 \u30d6\u30ed\u30c3\u30af\u306e\u6d41\u901a\u304c\u5341\u5206\u3067\u3001\u304b\u3064 Segwit2x \u30ce\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u304c\u591a\u3051\u308c\u3070\u3001core\u30c1\u30a7\u30fc\u30f3\u3088\u308a\u3082 flag1 \u30c1\u30a7\u30fc\u30f3\u306e\u65b9\u304c\u9577\u304f\u306a\u308b\u306e\u3067\u518d\u69cb\u6210\u306f\u767a\u751f\u3057\u306a\u3044\u3067\u3059\u3080\u3002 \u4e00\u5fdc Segwit2x \u304c\u6709\u52b9\u306b\u306a\u308b\u306e\u306f 80% \u304c\u6761\u4ef6\u306a\u306e\u3067\u3001\u5f7c\u3089\u304c\u305d\u306e\u307e\u307e Segwit2x \u3092\u6709\u52b9\u306b\u3057\u7d9a\u3051\u308c\u3070\u3053\u306e\u3088\u3046\u306a\u72b6\u6cc1\u306b\u306a\u308b\u3060\u308d\u3046\u3002 \u3082\u3057 Segwit2x \u5074\u306e\u30b7\u30b0\u30ca\u30eb\u304c\u507d\u88c5\u306e\u5834\u5408\u3001flag1 \u30c1\u30a7\u30fc\u30f3\u3068 core \u30c1\u30a7\u30fc\u30f3\u306e\u518d\u69cb\u6210\u304c\u8d77\u304d\u308b\u72b6\u614b\u306b\u306a\u308b\u3002UASF \u304c\u8d77\u304d\u3066\u3082\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u30d0\u30e9\u30f3\u30b9\u306f\u5909\u308f\u308b\u304c\u3001\u3084\u306f\u308a\u5727\u5012\u7684\u306a\u5dee\u304c\u4ed8\u304b\u306a\u3044\u5834\u5408\u306f\u5e38\u306b\u518d\u69cb\u6210\u304c\u8d77\u304d\u3046\u308b\u72b6\u614b\u306b\u306a\u308b\u3002 \u307e\u305f\u3001Segwit2x \u30ce\u30fc\u30c9\u304c\u5c11\u6570(\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u3067\u306f\u306a\u304f\u3066\u30ce\u30fc\u30c9\u6570)\u3067\u4e92\u3044\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3082\u5225\u306e\u554f\u984c\u304c\u3042\u308b\u3002 \u975eflag1\u30d6\u30ed\u30c3\u30af\u304c\u9577\u304f\u306a\u308b\u3068\u3001\u65b0\u305f\u306b\u6398\u3089\u308c\u305fflag1\u30d6\u30ed\u30c3\u30af\u306f\u77ed\u3044\u30c1\u30a7\u30fc\u30f3\u306e\u3082\u306e\u306a\u306e\u3067\u975eSegwit2x\u30ce\u30fc\u30c9\u306f\u4f1d\u642c\u3057\u306a\u3044\u3002 \u5b64\u7acb\u3057\u305f Segwit2x \u30ce\u30fc\u30c9\u304c\u3069\u3093\u3069\u3093\u65b0\u898f\u30d6\u30ed\u30c3\u30af\u3092\u6398\u3063\u3066\u3082\u305d\u308c\u306f\u4f1d\u642c\u3055\u308c\u305a\u3001\u305d\u306e\u30ce\u30fc\u30c9\u56fa\u6709\u306e\u30c1\u30a7\u30fc\u30f3\u3068\u306a\u308b\u3002\u307e\u305f\u5225\u306e\u5b64\u7acb\u3057\u305f Segwit2x \u30ce\u30fc\u30c9\u306f\u72ec\u81ea\u306e\u30c1\u30a7\u30fc\u30f3\u3092\u5ef6\u3070\u3059\u3002\u30cf\u30c3\u30b7\u30e5\u30ec\u30fc\u30c8\u306f\u5b9f\u8cea\u7684\u306b\u30ce\u30fc\u30c9\u5358\u4e00\u306e\u3082\u306e\u306b\u306a\u308b\u306e\u3067\u3001\u6b21\u306e\u96e3\u6613\u5ea6\u8abf\u6574\u307e\u3067\u30d6\u30ed\u30c3\u30af\u304c\u307b\u3068\u3093\u3069\u6398\u3089\u308c\u306a\u3044\u72b6\u614b\u306b\u306a\u308b\u3060\u308d\u3046\u3002","title":"Segwit2x \u306e\u30bd\u30d5\u30c8\u30d5\u30a9\u30fc\u30af"},{"location":"topics/Blockchain/2017-07-21--uasf/#uahf","text":"BitcoinCash \u306f segwit \u304c\u6709\u52b9\u7121\u52b9\u3069\u3061\u3089\u306b\u305b\u3088 core \u306e\u30d6\u30ed\u30c3\u30af\u3068\u4e92\u63db\u6027\u304c\u7121\u3044\u3002 \u518d\u69cb\u6210\u306e\u53ef\u80fd\u6027\u306f\u7121\u304f\u3001\u5b8c\u5168\u306b\u5225\u306e\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u3057\u3066\u6271\u3048\u308b\u3002 \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306e\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u5bfe\u7b56\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002 UAHF \u30c1\u30a7\u30fc\u30f3\u306e\u307f\u3067\u6709\u52b9\u306a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3(SIGHASH_FORKID)\u3092\u4f5c\u308b\u65b9\u6cd5\u3068\u3001UAHF\u30c1\u30a7\u30fc\u30f3\u3067\u7121\u52b9\u306a\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3(OP_RETURN \u306b\u7279\u5b9a\u6587\u5b57\u5217\u3092\u5165\u308c\u308b)\u65b9\u6cd5\u306e\u4e8c\u901a\u308a\u3002 \u203b\u975esegwit\u306a\u901a\u5e38\u306ecore\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306fUAHF\u3067\u3082\u6709\u52b9\u306a\u306e\u304b\u306a\uff1f \u3060\u3063\u305f\u3089\u30ea\u30d7\u30ec\u30a4\u3055\u308c\u3061\u3083\u3044\u305d\u3046\u3060\u3002 \u306a\u304a\u3001\u5206\u5c90\u524d\u306b\u5b58\u5728\u3057\u3066\u3044\u305f UTXO \u306f\u3001\u5206\u5c90\u5f8c\u3082\u6709\u52b9\u3067\u3042\u308b\u3002 \u30e6\u30fc\u30b6\u30fc\u304b\u3089\u898b\u308b\u3068\u3001\u5206\u5c90\u524d\u306e BTC \u3068\u540c\u984d\u306e BCC \u3092\u4fdd\u6709\u3057\u305f\u72b6\u614b\u306b\u306a\u308b\u3002","title":"UAHF"},{"location":"topics/Blockchain/2018-04-13--bip32/","tags":["Tech","Bitcoin"],"text":"BIP32 2018-04-13 BIP32: Hierarchical Deterministic Wallets https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki Bitcoin \u7b49\u3067\u4f7f\u308f\u308c\u308b\u30a2\u30c9\u30ec\u30b9=\u9375\u30da\u30a2\u3092\u591a\u6570\u6271\u3044\u305f\u3044\u5834\u5408\u306b\u3001\u4e00\u500b\u4e00\u500b\u30e9\u30f3\u30c0\u30e0\u306b\u751f\u6210\u3059\u308b\u3068\u5168\u90e8\u304d\u3061\u3093\u3068\u7ba1\u7406\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 \u30b7\u30fc\u30c9\u5024\u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089\u3001\u6c7a\u5b9a\u7684\u306a\u8a08\u7b97\u306b\u3088\u3063\u3066\u9375\u3092\u751f\u6210\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3092\u7528\u610f\u3059\u308c\u3070\u3001 1 KeyX = f(Seed, X) \u305d\u306e\u30b7\u30fc\u30c9\u5024\u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6271\u3046\u3053\u3068\u3067\u7121\u6570\u306e\u9375\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u697d\u3002 \u3055\u3089\u306b\u8af8\u3005\u306e\u5de5\u592b\u3092\u52a0\u3048\u3066\u3001\u9375\u6d3e\u751f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4ed5\u69d8\u5316\u3057\u305f\u3082\u306e\u304c BIP32. Deterministic \u3068\u3044\u3046\u306e\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u308c\u3070\u9375\u30c7\u30fc\u30bf\u304c\u6c7a\u5b9a\u7684\u306b\u8a08\u7b97\u3067\u304d\u308b\u3068\u3044\u3046\u610f\u5473\u3002 Hierarchical \u3068\u3044\u3046\u306e\u306f\u3001\u305d\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u968e\u5c64\u69cb\u9020\u3092\u6210\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u610f\u5473\u3002 Wallet \u3068\u3044\u3046\u306e\u306f\u3001\u3053\u306e\u9375\u7fa4\u306f\u30a6\u30a9\u30ec\u30c3\u30c8\u3078\u306e\u5229\u7528\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3042\u308d\u3046\u3002 \u9375\u6d3e\u751f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0 \u6e96\u5099 \u5bfe\u79f0\u3068\u3059\u308b\u9375\u306f Bitcoin \u306e CHECKSIG, \u3064\u307e\u308a secp256k1 \u306e\u516c\u958b\u9375/\u79d8\u5bc6\u9375\u30da\u30a2\u3002 http://www.secg.org/sec2-v2.pdf BIP32 \u306e\u6d3e\u751f\u6f14\u7b97\u3067\u306f\u3001secp256k1 \u306e\u9375\u9577 256bit \u306b\u52a0\u3048\u3066\u3001\u3055\u3089\u306b chain code \u3068\u547c\u3070\u308c\u308b 256bit \u306e\u5024\u3092\u7528\u610f\u3059\u308b\u3002 \u9375\u3068 chain code \u3092\u5408\u308f\u305b\u3066\u62e1\u5f35\u9375(extended keys)\u3068\u547c\u3073\u3001\u9375 k \u3068 chain code c \u304b\u3089\u6210\u308b\u62e1\u5f35\u9375\u3092 (k,c) \u3068\u8a18\u8ff0\u3059\u308b\u3002 \u9375\u30da\u30a2 k,K \u306b\u5bfe\u3059\u308b\u62e1\u5f35\u9375\u306f\u540c\u4e00\u306e chain code \u3092\u7528\u3044\u308b\u3002 1 2 3 \u9375\u30da\u30a2 k,K \u62e1\u5f35\u79d8\u5bc6\u9375 (k, c) \u62e1\u5f35\u516c\u958b\u9375 (K, c) \u62e1\u5f35\u9375\u304b\u3089\u65b0\u305f\u306a\u62e1\u5f35\u9375\u3092\u5c0e\u51fa\u3059\u308b\u6f14\u7b97 CKD(Child Key Derivation) \u3092\u5b9a\u7fa9\u3059\u308b\u3002 CKD \u306e\u5165\u529b\u306f\u3001\u6d3e\u751f\u5143\u306e\u62e1\u5f35\u9375\u306832bit\u6574\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u308b\u3002 (k,c) \u3068\u30d1\u30e9\u30e1\u30fc\u30bf i \u304b\u3089\u751f\u6210\u3057\u305f\u5b50\u62e1\u5f35\u9375\u3092 (ki,ci) \u3068\u3059\u308b\u3068\u3001 1 CKD (( k , c ), i ) -> ( ki , ci ) \u3068\u8a18\u8ff0\u3067\u304d\u308b\u3002 CKD \u306f\u3001\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u751f\u6210\u3059\u308b\u6f14\u7b97 CKDpri \u3068\u3001\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u62e1\u5f35\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u6f14\u7b97 CKDpub \u306b\u5206\u3051\u308b\u3002 CKD \u3067\u751f\u6210\u3055\u308c\u308b\u5b50\u62e1\u5f35\u9375\u306f\u3001\u62e1\u5f35\u9375\u306e\u5236\u7d04\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002 \u3064\u307e\u308a\u3001 1 2 CKDpri (( k , c ), i ) -> ( ki , ci ) CKDpub (( K , c ), i ) -> ( Ki , Ci ) \u306b\u5bfe\u3057\u3066\u3001 1 2 Ki = point(ki) //point\u306f\u6955\u5186\u66f2\u7dda\u306e\u79d8\u5bc6\u9375\u304b\u3089\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 ci == Ci \u3068\u3044\u3046\u95a2\u4fc2\u304c\u6210\u308a\u7acb\u3064\u3088\u3046\u306b CKD \u3092\u5b9a\u7fa9\u3059\u308b\u3002 normal \u3068 hardened \u9375\u6d3e\u751f\u95a2\u6570\u306f 32bit\u6574\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u3068\u308b\u3002 \u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u534a\u5206\u306b\u308f\u3051\u3001CKD \u306e\u5b9a\u7fa9\u3092\u4e8c\u7a2e\u985e\u306b\u5206\u304b\u308c\u308b\u3002 0 \u304b\u3089 2^31-1 \u307e\u3067\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u5c0e\u51fa\u3055\u308c\u305f\u5b50\u3092 normal child key, 2^31 \u304b\u3089 2^32-1 \u3067\u5c0e\u51fa\u3055\u308c\u305f\u5b50\u3092 hardened child key \u3068\u3044\u3046\u3002 normal child key \u516c\u958b\u9375 K \u306e SEC1 \u5727\u7e2e\u8868\u73fe 33byte \u306b\u3001\u30d1\u30e9\u30e1\u30fc\u30bf i \u306e 4byte \u3092\u9023\u7d50\u3057\u305f\u30d0\u30a4\u30c8\u5217\u306b\u5bfe\u3057\u3066\u3001c \u3092\u9375\u3068\u3057\u3066 HMAC-SHA512 \u3092\u53d6\u3063\u305f\u30d0\u30a4\u30c8\u5217\u3092 I \u3068\u3059\u308b\u3002 1 I = HMAC-SHA512(Key = c, Data = K || i) I \u306f HMAC-SHA512 \u306e\u51fa\u529b\u306a\u306e\u3067 512bit \u306b\u306a\u308b\u3002 \u3053\u308c\u3092\u4e0a\u4f4d(\u5de6=IL)\u4e0b\u4f4d(\u53f3=IR)\u306e 256bit \u305a\u3064\u306b\u5206\u3051\u308b\u3002 IL \u3092\u30d3\u30c3\u30b0\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\u6574\u6570\u3068\u3057\u3066\u89e3\u91c8\u3057\u305f\u5024(parse256)\u3068 k \u3092\u8db3\u3057\u305f\u5024\u3092\u3001secp256k1 \u306e\u5b9a\u6570 n (\u79d8\u5bc6\u9375\u306e\u6700\u5927\u5024)\u3067\u5272\u3063\u305f\u4f59\u308a\u3092 ki \u3068\u3059\u308b\u3002 ci \u306f IR \u306e\u5024\u305d\u306e\u307e\u307e\u3002 1 2 ki = parse256(IL) + k (mod n) ci = IR \u3053\u3053\u3067\u3001parse256(IL) >= n \u307e\u305f\u306f ki = 0 \u3068\u306a\u308b\u5834\u5408\u3001\u3053\u306e CDKpri \u306f\u7121\u52b9\u3068\u3057\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u307e\u305f\u5225\u306e i \u3092\u7528\u3044\u308b\u3002 // n \u306f\u4e0a\u4f4d128bit \u304c 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE \u3067\u3001256bit\u6574\u6570\u306e\u6700\u5927\u5024\u306b\u8fd1\u3044 Ki \u306f\u516c\u958b\u9375\u3067\u3042\u308b\u304b\u3089\u3001\u79d8\u5bc6\u9375 ki \u306b point \u95a2\u6570\u3092\u9069\u7528\u3057\u305f\u5024\u3067\u3042\u308b\u3002 1 2 Ki = point(ki) = point( parse256(IL) + k (mod n) ) \u6955\u5186\u66f2\u7dda\u6697\u53f7\u306e\u516c\u958b\u9375\u5c0e\u51fa\u6f14\u7b97\u306f\u6955\u5186\u66f2\u7dda\u306e\u30b9\u30ab\u30e9\u30fc\u500d\u7b97\u3067\u3042\u308a\u3001\u3053\u308c\u306f\u52a0\u6cd5\u306b\u5bfe\u3057\u3066\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 1 2 Ki = point( parse256(IL) ) + point(k) = point( parse256(IL) ) + K \u3053\u308c\u3092 Ki \u306e\u5c0e\u51fa\u5f0f\u3068\u3059\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 1 2 3 4 IL || IR == HMAC-SHA512(Key = c, Data = K || i) ki = parse256(IL) + k (mod n) Ki = point( parse256(IL) ) + K ci = IR \u5b50\u62e1\u5f35\u79d8\u5bc6\u9375 (ki,ci) \u306e\u5c0e\u51fa ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,k \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd\u3002 \u3088\u3063\u3066\u3001(ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002 \u5b50\u62e1\u5f35\u516c\u958b\u9375 (Ki,ci) \u306e\u5c0e\u51fa Ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,K \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 \u3088\u3063\u3066\u3001(Ki,ci) \u306e\u8a08\u7b97\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u307e\u305f\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u306f\u8a08\u7b97\u53ef\u80fd\u306a\u306e\u3067\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3057\u3001\u305d\u3053\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002 1 CKDpub((K,c),i) = point(CKDpri((k,c),i)) \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001K,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u308c\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u89aa/\u5b50 private public private \u53ef \u53ef public \u4e0d\u53ef \u53ef \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u6ce8\u610f \u3068\u3053\u308d\u3067\u3001\u5b50\u306e\u79d8\u5bc6\u9375\u5c0e\u51fa\u306e\u5f0f 1 ki = parse256(IL) + k (mod n) \u306b\u306f\u89aa\u306e\u79d8\u5bc6\u9375k \u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u3002 \u3053\u306e\u6f14\u7b97\u306f\u9006\u7b97\u304c\u5bb9\u6613\u306a\u306e\u3067\u3001IL \u3068 ki \u304c\u5206\u304b\u308b\u3068 k \u304c\u8a08\u7b97\u3067\u304d\u3066\u3057\u307e\u3046\u3002 \u307e\u305f\u3001IL \u306f\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375 (K,c) \u304b\u3089\u8a08\u7b97\u3067\u304d\u308b\u3002 \u3064\u307e\u308a\u3001\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375(K,c)\u3068\u5b50\u306e\u79d8\u5bc6\u9375ki \u304b\u3089\u3001\u89aa\u306e\u79d8\u5bc6\u9375k \u304c\u8a08\u7b97\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002 normal child key \u3092\u4f7f\u3046\u969b\u306f\u3001\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375\u3092\u516c\u958b\u3057\u3066\u306f\u306a\u3089\u306a\u3044\u3002 \u305f\u3068\u3048\u3070\u3001\u516c\u958b\u9375 K \u3092\u516c\u958b\u3059\u308b\u969b\u306b\u3001\u62e1\u5f35\u516c\u958b\u9375\u5168\u4f53\u3092\u516c\u958b\u3057\u306a\u3044\u3088\u3046\u306b\u7559\u610f\u3059\u308b\u3002 hardened child key 0x00 \u306e\u5f8c\u306b\u3001\u79d8\u5bc6\u9375 k \u306e 32byte \u3068\u30d1\u30e9\u30e1\u30fc\u30bf i \u306e 4byte \u3092\u9023\u7d50\u3057\u305f\u30d0\u30a4\u30c8\u5217\u306b\u5bfe\u3057\u3066\u3001c \u3092\u9375\u3068\u3057\u3066 HMAC-SHA512 \u3092\u53d6\u3063\u305f\u30d0\u30a4\u30c8\u5217\u3092 I, I \u306e\u4e0a\u4f4d\u4e0b\u4f4d\u534a\u5206\u3092\u305d\u308c\u305e\u308c IL, IR \u3068\u3059\u308b\u3002 1 IL || IR = HMAC-SHA512(Key = c, Data = 0x00 || k || i) \u5b50\u306e\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u3001 1 2 ki = parse256(IL) + k (mod n) ci = IR \u3068\u5b9a\u7fa9\u3059\u308b\u3002 \u5b50\u306e\u516c\u958b\u9375\u306f\u3001\u5b50\u306e\u79d8\u5bc6\u9375\u306b point \u95a2\u6570\u3092\u9069\u7528\u3057\u305f\u3082\u306e\u3067\u3042\u308b: 1 2 3 4 Ki = point(ki) = point(parse256(IL) + k) = point(parse256(IL)) + point(k) = point(parse256(IL)) + K \u5b50\u62e1\u5f35\u79d8\u5bc6\u9375 (ki,ci) \u306e\u5c0e\u51fa ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,k \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u3088\u3063\u3066\u3001(ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002 \u5b50\u62e1\u5f35\u516c\u958b\u9375 (Ki,ci) \u306e\u5c0e\u51fa Ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,K \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd \u3088\u3063\u3066\u3001(Ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002 \u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u307e\u305f\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u306f\u8a08\u7b97\u53ef\u80fd\u306a\u306e\u3067\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3057\u3001\u305d\u3053\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002 1 CKDpub((K,c),i) = point(CKDpri((k,c),i)) \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002 \u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u89aa/\u5b50 private public private \u53ef \u53ef public \u4e0d\u53ef \u4e0d\u53ef normal key derivation \u3068\u306f\u3001\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3067\u304d\u306a\u3044\u70b9\u304c\u7570\u306a\u308b\u3002","title":"BIP32 \u9375\u6d3e\u751f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"},{"location":"topics/Blockchain/2018-04-13--bip32/#bip32","text":"2018-04-13 BIP32: Hierarchical Deterministic Wallets https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki Bitcoin \u7b49\u3067\u4f7f\u308f\u308c\u308b\u30a2\u30c9\u30ec\u30b9=\u9375\u30da\u30a2\u3092\u591a\u6570\u6271\u3044\u305f\u3044\u5834\u5408\u306b\u3001\u4e00\u500b\u4e00\u500b\u30e9\u30f3\u30c0\u30e0\u306b\u751f\u6210\u3059\u308b\u3068\u5168\u90e8\u304d\u3061\u3093\u3068\u7ba1\u7406\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 \u30b7\u30fc\u30c9\u5024\u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089\u3001\u6c7a\u5b9a\u7684\u306a\u8a08\u7b97\u306b\u3088\u3063\u3066\u9375\u3092\u751f\u6210\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3092\u7528\u610f\u3059\u308c\u3070\u3001 1 KeyX = f(Seed, X) \u305d\u306e\u30b7\u30fc\u30c9\u5024\u3068\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6271\u3046\u3053\u3068\u3067\u7121\u6570\u306e\u9375\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u697d\u3002 \u3055\u3089\u306b\u8af8\u3005\u306e\u5de5\u592b\u3092\u52a0\u3048\u3066\u3001\u9375\u6d3e\u751f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4ed5\u69d8\u5316\u3057\u305f\u3082\u306e\u304c BIP32. Deterministic \u3068\u3044\u3046\u306e\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u308c\u3070\u9375\u30c7\u30fc\u30bf\u304c\u6c7a\u5b9a\u7684\u306b\u8a08\u7b97\u3067\u304d\u308b\u3068\u3044\u3046\u610f\u5473\u3002 Hierarchical \u3068\u3044\u3046\u306e\u306f\u3001\u305d\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u968e\u5c64\u69cb\u9020\u3092\u6210\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u610f\u5473\u3002 Wallet \u3068\u3044\u3046\u306e\u306f\u3001\u3053\u306e\u9375\u7fa4\u306f\u30a6\u30a9\u30ec\u30c3\u30c8\u3078\u306e\u5229\u7528\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3042\u308d\u3046\u3002","title":"BIP32"},{"location":"topics/Blockchain/2018-04-13--bip32/#_1","text":"","title":"\u9375\u6d3e\u751f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"},{"location":"topics/Blockchain/2018-04-13--bip32/#_2","text":"\u5bfe\u79f0\u3068\u3059\u308b\u9375\u306f Bitcoin \u306e CHECKSIG, \u3064\u307e\u308a secp256k1 \u306e\u516c\u958b\u9375/\u79d8\u5bc6\u9375\u30da\u30a2\u3002 http://www.secg.org/sec2-v2.pdf BIP32 \u306e\u6d3e\u751f\u6f14\u7b97\u3067\u306f\u3001secp256k1 \u306e\u9375\u9577 256bit \u306b\u52a0\u3048\u3066\u3001\u3055\u3089\u306b chain code \u3068\u547c\u3070\u308c\u308b 256bit \u306e\u5024\u3092\u7528\u610f\u3059\u308b\u3002 \u9375\u3068 chain code \u3092\u5408\u308f\u305b\u3066\u62e1\u5f35\u9375(extended keys)\u3068\u547c\u3073\u3001\u9375 k \u3068 chain code c \u304b\u3089\u6210\u308b\u62e1\u5f35\u9375\u3092 (k,c) \u3068\u8a18\u8ff0\u3059\u308b\u3002 \u9375\u30da\u30a2 k,K \u306b\u5bfe\u3059\u308b\u62e1\u5f35\u9375\u306f\u540c\u4e00\u306e chain code \u3092\u7528\u3044\u308b\u3002 1 2 3 \u9375\u30da\u30a2 k,K \u62e1\u5f35\u79d8\u5bc6\u9375 (k, c) \u62e1\u5f35\u516c\u958b\u9375 (K, c) \u62e1\u5f35\u9375\u304b\u3089\u65b0\u305f\u306a\u62e1\u5f35\u9375\u3092\u5c0e\u51fa\u3059\u308b\u6f14\u7b97 CKD(Child Key Derivation) \u3092\u5b9a\u7fa9\u3059\u308b\u3002 CKD \u306e\u5165\u529b\u306f\u3001\u6d3e\u751f\u5143\u306e\u62e1\u5f35\u9375\u306832bit\u6574\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u308b\u3002 (k,c) \u3068\u30d1\u30e9\u30e1\u30fc\u30bf i \u304b\u3089\u751f\u6210\u3057\u305f\u5b50\u62e1\u5f35\u9375\u3092 (ki,ci) \u3068\u3059\u308b\u3068\u3001 1 CKD (( k , c ), i ) -> ( ki , ci ) \u3068\u8a18\u8ff0\u3067\u304d\u308b\u3002 CKD \u306f\u3001\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u751f\u6210\u3059\u308b\u6f14\u7b97 CKDpri \u3068\u3001\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u62e1\u5f35\u516c\u958b\u9375\u3092\u751f\u6210\u3059\u308b\u6f14\u7b97 CKDpub \u306b\u5206\u3051\u308b\u3002 CKD \u3067\u751f\u6210\u3055\u308c\u308b\u5b50\u62e1\u5f35\u9375\u306f\u3001\u62e1\u5f35\u9375\u306e\u5236\u7d04\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002 \u3064\u307e\u308a\u3001 1 2 CKDpri (( k , c ), i ) -> ( ki , ci ) CKDpub (( K , c ), i ) -> ( Ki , Ci ) \u306b\u5bfe\u3057\u3066\u3001 1 2 Ki = point(ki) //point\u306f\u6955\u5186\u66f2\u7dda\u306e\u79d8\u5bc6\u9375\u304b\u3089\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 ci == Ci \u3068\u3044\u3046\u95a2\u4fc2\u304c\u6210\u308a\u7acb\u3064\u3088\u3046\u306b CKD \u3092\u5b9a\u7fa9\u3059\u308b\u3002","title":"\u6e96\u5099"},{"location":"topics/Blockchain/2018-04-13--bip32/#normal-hardened","text":"\u9375\u6d3e\u751f\u95a2\u6570\u306f 32bit\u6574\u6570\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u3068\u308b\u3002 \u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u534a\u5206\u306b\u308f\u3051\u3001CKD \u306e\u5b9a\u7fa9\u3092\u4e8c\u7a2e\u985e\u306b\u5206\u304b\u308c\u308b\u3002 0 \u304b\u3089 2^31-1 \u307e\u3067\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u5c0e\u51fa\u3055\u308c\u305f\u5b50\u3092 normal child key, 2^31 \u304b\u3089 2^32-1 \u3067\u5c0e\u51fa\u3055\u308c\u305f\u5b50\u3092 hardened child key \u3068\u3044\u3046\u3002","title":"normal \u3068 hardened"},{"location":"topics/Blockchain/2018-04-13--bip32/#normal-child-key","text":"\u516c\u958b\u9375 K \u306e SEC1 \u5727\u7e2e\u8868\u73fe 33byte \u306b\u3001\u30d1\u30e9\u30e1\u30fc\u30bf i \u306e 4byte \u3092\u9023\u7d50\u3057\u305f\u30d0\u30a4\u30c8\u5217\u306b\u5bfe\u3057\u3066\u3001c \u3092\u9375\u3068\u3057\u3066 HMAC-SHA512 \u3092\u53d6\u3063\u305f\u30d0\u30a4\u30c8\u5217\u3092 I \u3068\u3059\u308b\u3002 1 I = HMAC-SHA512(Key = c, Data = K || i) I \u306f HMAC-SHA512 \u306e\u51fa\u529b\u306a\u306e\u3067 512bit \u306b\u306a\u308b\u3002 \u3053\u308c\u3092\u4e0a\u4f4d(\u5de6=IL)\u4e0b\u4f4d(\u53f3=IR)\u306e 256bit \u305a\u3064\u306b\u5206\u3051\u308b\u3002 IL \u3092\u30d3\u30c3\u30b0\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\u6574\u6570\u3068\u3057\u3066\u89e3\u91c8\u3057\u305f\u5024(parse256)\u3068 k \u3092\u8db3\u3057\u305f\u5024\u3092\u3001secp256k1 \u306e\u5b9a\u6570 n (\u79d8\u5bc6\u9375\u306e\u6700\u5927\u5024)\u3067\u5272\u3063\u305f\u4f59\u308a\u3092 ki \u3068\u3059\u308b\u3002 ci \u306f IR \u306e\u5024\u305d\u306e\u307e\u307e\u3002 1 2 ki = parse256(IL) + k (mod n) ci = IR \u3053\u3053\u3067\u3001parse256(IL) >= n \u307e\u305f\u306f ki = 0 \u3068\u306a\u308b\u5834\u5408\u3001\u3053\u306e CDKpri \u306f\u7121\u52b9\u3068\u3057\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u307e\u305f\u5225\u306e i \u3092\u7528\u3044\u308b\u3002 // n \u306f\u4e0a\u4f4d128bit \u304c 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE \u3067\u3001256bit\u6574\u6570\u306e\u6700\u5927\u5024\u306b\u8fd1\u3044 Ki \u306f\u516c\u958b\u9375\u3067\u3042\u308b\u304b\u3089\u3001\u79d8\u5bc6\u9375 ki \u306b point \u95a2\u6570\u3092\u9069\u7528\u3057\u305f\u5024\u3067\u3042\u308b\u3002 1 2 Ki = point(ki) = point( parse256(IL) + k (mod n) ) \u6955\u5186\u66f2\u7dda\u6697\u53f7\u306e\u516c\u958b\u9375\u5c0e\u51fa\u6f14\u7b97\u306f\u6955\u5186\u66f2\u7dda\u306e\u30b9\u30ab\u30e9\u30fc\u500d\u7b97\u3067\u3042\u308a\u3001\u3053\u308c\u306f\u52a0\u6cd5\u306b\u5bfe\u3057\u3066\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 1 2 Ki = point( parse256(IL) ) + point(k) = point( parse256(IL) ) + K \u3053\u308c\u3092 Ki \u306e\u5c0e\u51fa\u5f0f\u3068\u3059\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 1 2 3 4 IL || IR == HMAC-SHA512(Key = c, Data = K || i) ki = parse256(IL) + k (mod n) Ki = point( parse256(IL) ) + K ci = IR","title":"normal child key"},{"location":"topics/Blockchain/2018-04-13--bip32/#kici","text":"ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,k \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd\u3002 \u3088\u3063\u3066\u3001(ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002","title":"\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375 (ki,ci) \u306e\u5c0e\u51fa"},{"location":"topics/Blockchain/2018-04-13--bip32/#kici_1","text":"Ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,K \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 \u3088\u3063\u3066\u3001(Ki,ci) \u306e\u8a08\u7b97\u306b\u306f K,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u307e\u305f\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u306f\u8a08\u7b97\u53ef\u80fd\u306a\u306e\u3067\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3057\u3001\u305d\u3053\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002 1 CKDpub((K,c),i) = point(CKDpri((k,c),i)) \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001K,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u308c\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u89aa/\u5b50 private public private \u53ef \u53ef public \u4e0d\u53ef \u53ef","title":"\u5b50\u62e1\u5f35\u516c\u958b\u9375 (Ki,ci) \u306e\u5c0e\u51fa"},{"location":"topics/Blockchain/2018-04-13--bip32/#_3","text":"\u3068\u3053\u308d\u3067\u3001\u5b50\u306e\u79d8\u5bc6\u9375\u5c0e\u51fa\u306e\u5f0f 1 ki = parse256(IL) + k (mod n) \u306b\u306f\u89aa\u306e\u79d8\u5bc6\u9375k \u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u3002 \u3053\u306e\u6f14\u7b97\u306f\u9006\u7b97\u304c\u5bb9\u6613\u306a\u306e\u3067\u3001IL \u3068 ki \u304c\u5206\u304b\u308b\u3068 k \u304c\u8a08\u7b97\u3067\u304d\u3066\u3057\u307e\u3046\u3002 \u307e\u305f\u3001IL \u306f\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375 (K,c) \u304b\u3089\u8a08\u7b97\u3067\u304d\u308b\u3002 \u3064\u307e\u308a\u3001\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375(K,c)\u3068\u5b50\u306e\u79d8\u5bc6\u9375ki \u304b\u3089\u3001\u89aa\u306e\u79d8\u5bc6\u9375k \u304c\u8a08\u7b97\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002 normal child key \u3092\u4f7f\u3046\u969b\u306f\u3001\u89aa\u306e\u62e1\u5f35\u516c\u958b\u9375\u3092\u516c\u958b\u3057\u3066\u306f\u306a\u3089\u306a\u3044\u3002 \u305f\u3068\u3048\u3070\u3001\u516c\u958b\u9375 K \u3092\u516c\u958b\u3059\u308b\u969b\u306b\u3001\u62e1\u5f35\u516c\u958b\u9375\u5168\u4f53\u3092\u516c\u958b\u3057\u306a\u3044\u3088\u3046\u306b\u7559\u610f\u3059\u308b\u3002","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u6ce8\u610f"},{"location":"topics/Blockchain/2018-04-13--bip32/#hardened-child-key","text":"0x00 \u306e\u5f8c\u306b\u3001\u79d8\u5bc6\u9375 k \u306e 32byte \u3068\u30d1\u30e9\u30e1\u30fc\u30bf i \u306e 4byte \u3092\u9023\u7d50\u3057\u305f\u30d0\u30a4\u30c8\u5217\u306b\u5bfe\u3057\u3066\u3001c \u3092\u9375\u3068\u3057\u3066 HMAC-SHA512 \u3092\u53d6\u3063\u305f\u30d0\u30a4\u30c8\u5217\u3092 I, I \u306e\u4e0a\u4f4d\u4e0b\u4f4d\u534a\u5206\u3092\u305d\u308c\u305e\u308c IL, IR \u3068\u3059\u308b\u3002 1 IL || IR = HMAC-SHA512(Key = c, Data = 0x00 || k || i) \u5b50\u306e\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u3001 1 2 ki = parse256(IL) + k (mod n) ci = IR \u3068\u5b9a\u7fa9\u3059\u308b\u3002 \u5b50\u306e\u516c\u958b\u9375\u306f\u3001\u5b50\u306e\u79d8\u5bc6\u9375\u306b point \u95a2\u6570\u3092\u9069\u7528\u3057\u305f\u3082\u306e\u3067\u3042\u308b: 1 2 3 4 Ki = point(ki) = point(parse256(IL) + k) = point(parse256(IL)) + point(k) = point(parse256(IL)) + K","title":"hardened child key"},{"location":"topics/Blockchain/2018-04-13--bip32/#kici_2","text":"ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,k \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u3088\u3063\u3066\u3001(ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002\u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002","title":"\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375 (ki,ci) \u306e\u5c0e\u51fa"},{"location":"topics/Blockchain/2018-04-13--bip32/#kici_3","text":"Ki \u306e\u8a08\u7b97\u306b\u306f\u3001IL,K \u304c\u3001ci \u306e\u8a08\u7b97\u306b\u306f IR \u304c\u5fc5\u8981\u3002 IL,IR \u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 K \u306f k \u304b\u3089\u8a08\u7b97\u53ef\u80fd \u3088\u3063\u3066\u3001(Ki,ci) \u306e\u8a08\u7b97\u306b\u306f k,c,i \u304c\u5fc5\u8981\u3002 \u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u306f\u3001k,c \u3092\u77e5\u3063\u3066\u3044\u308b\u3002i \u306f\u5916\u90e8\u304b\u3089\u4e0e\u3048\u3089\u3048\u308b\u3002 \u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u53ef\u80fd\u3002 \u307e\u305f\u3001\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u306f\u8a08\u7b97\u53ef\u80fd\u306a\u306e\u3067\u3001\u89aa\u62e1\u5f35\u79d8\u5bc6\u9375\u304b\u3089\u5b50\u62e1\u5f35\u79d8\u5bc6\u9375\u3092\u8a08\u7b97\u3057\u3001\u305d\u3053\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002 1 CKDpub((K,c),i) = point(CKDpri((k,c),i)) \u89aa\u62e1\u5f35\u516c\u958b\u9375\u306f\u3001k \u3092\u77e5\u3089\u306a\u3044\u3002 \u3088\u3063\u3066\u3001\u89aa\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u3001\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u89aa/\u5b50 private public private \u53ef \u53ef public \u4e0d\u53ef \u4e0d\u53ef normal key derivation \u3068\u306f\u3001\u62e1\u5f35\u516c\u958b\u9375\u304b\u3089\u5b50\u62e1\u5f35\u516c\u958b\u9375\u3092\u8a08\u7b97\u3067\u304d\u306a\u3044\u70b9\u304c\u7570\u306a\u308b\u3002","title":"\u5b50\u62e1\u5f35\u516c\u958b\u9375 (Ki,ci) \u306e\u5c0e\u51fa"},{"location":"topics/Blockchain/2019-03-13--gg18/","tags":["Tech","crypto"],"text":".katex img { object-fit: fill; padding: unset; display: block; position: absolute; width: 100%; height: inherit; } Fast Multiparty Threshold ECDSA with Fast Trustless Setup 2019-03-13 Rosario Gennaro, Steven Goldfeder. 2018. \u8ad6\u6587\u3002 \u8457\u8005\u306e\u30a4\u30cb\u30b7\u30e3\u30eb\u3068\u767a\u8868\u5e74\u3092\u3068\u3063\u3066 GG18 \u3068\u547c\u79f0\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u5023\u3046\u3002 \u96e2\u6563\u5bfe\u6570\u6697\u53f7\u306e DSA \u5f62\u5f0f\u306e\u7f72\u540d\u306b\u304a\u3051\u308b\u591a\u4eba\u6570\u306e threshold signatures \u306e\u554f\u984c\u3078\u306e\u89e3\u6cd5\u304c\u8ff0\u3079\u3089\u308c\u3066\u3044\u308b\u3002 DSA \u306e threshold signatures threshold signing / threshold signatures \u3068\u306f\u3001 n n n \u4eba\u3067\u79d8\u5bc6\u9375\u3092\u5206\u5272\u4fdd\u6709\u3057\u3001\u305d\u306e\u3046\u3061 t + 1 t+1 t + 1 \u4eba\u96c6\u307e\u308c\u3070\u7f72\u540d\u3092\u4f5c\u6210\u3067\u304d\u308b\u3068\u3044\u3046\u30b7\u30b9\u30c6\u30e0\u3002\u3044\u308f\u3086\u308b\u30de\u30eb\u30c1\u30b7\u30b0\u3002 \u96e2\u6563\u5bfe\u6570\u306e DSA \u306f\u4e00\u822c\u7684\u306b R = g 1 k r = H \u2032 ( R ) s = k ( H ( m ) + x r ) \\begin{aligned} R &= g^{\\frac{1}{k}} \\\\ r &= H'(R) \\\\ s &= k(H(m) + xr) \\\\ \\end{aligned} R r s \u200b = g k 1 \u200b = H \u2032 ( R ) = k ( H ( m ) + x r ) \u200b \u3068\u8868\u3055\u308c\u308b\u3002 \u3053\u3053\u3067\u3001 x x x \u306f\u79d8\u5bc6\u9375 k , r , s k,r,s k , r , s \u306f\u7f72\u540d\u306b\u7528\u3044\u308b\u4e00\u6642\u7684\u306a\u5024 M M M \u306f\u7f72\u540d\u5bfe\u8c61\u306e\u30e1\u30c3\u30bb\u30fc\u30b8 H H H \u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u3092\u5f97\u308b\u95a2\u6570 H \u2032 H' H \u2032 \u306f\u5de1\u56de\u7fa4 G G G \u304b\u3089\u30b9\u30ab\u30e9 Z q Zq Zq \u3078\u5909\u63db\u3059\u308b\u95a2\u6570 \u305f\u3068\u3048\u3070 ECDSA \u306a\u3089\u5ea7\u6a19 P P P \u306e x x x \u5ea7\u6a19\u3092\u5f97\u308b\u95a2\u6570 \u3067\u3042\u308b\u3002 threshold signing \u306e\u305f\u3081\u306b\u306f\u3001x,k \u3092\u5206\u6563\u3057\u3066\u4fdd\u6709\u3057\u3001r,s \u3092\u751f\u6210\u3067\u304d\u308c\u3070\u3088\u3044\u306e\u3060\u304c\u3001\u5206\u6563\u4fdd\u6709\u3057\u305f\u5024\u304b\u3089\u3001k\u306e\u9006\u6570\u306e\u6307\u6570\u6f14\u7b97\u3068\u3001\u4e8c\u3064\u306e\u79d8\u5bc6\u6570 x,k \u306e\u7a4d\u3092\u6c42\u3081\u308b\u306e\u304c\u96e3\u3057\u3044\u3002 MtA \u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001GG18 \u8ad6\u6587\u3067\u306f Multitive to Addaptive \u3068\u3044\u3046\u30c6\u30af\u30cb\u30c3\u30af\u3092\u9069\u7528\u3057\u3066\u3044\u308b\u3002\u7a4d\u548c\u5909\u63db\u3068\u3067\u3082\u8a33\u305b\u3070\u3088\u3044\u304b\u3002 Alice, Bob \u304c\u305d\u308c\u305e\u308c\u79d8\u5bc6\u6570 a , b a, b a , b \u3092\u6301\u3063\u3066\u3044\u308b\u3068\u3059\u308b\u3002 Alice \u306f\u81ea\u8eab\u306e\u516c\u958b\u9375 A A A \u3067 a a a \u3092\u52a0\u6cd5\u6e96\u540c\u578b\u6697\u53f7\u5316\u3057\u305f\u5024 c A = E A ( a ) c_A = E_A(a) c A \u200b = E A \u200b ( a ) \u3092 Bob \u3078\u9001\u308b Bob \u306f\u30e9\u30f3\u30c0\u30e0\u306a\u5024 \u03b2 \u2032 \\beta' \u03b2 \u2032 \u3092\u9078\u3073\u3001 c B = b \u00d7 E c A + E E A ( \u03b2 \u2032 ) c_B = b \\times_E c_A +_E E_A(\\beta') c B \u200b = b \u00d7 E \u200b c A \u200b + E \u200b E A \u200b ( \u03b2 \u2032 ) \u3092\u8a08\u7b97\u3057\u3066 Alice \u3078\u9001\u308b\u3002 \u3053\u3053\u3067\u3001 \u00d7 E , + E \\times_E, +_E \u00d7 E \u200b , + E \u200b \u306f\u3001\u6697\u53f7\u5316\u3055\u308c\u305f\u5024\u306b\u5bfe\u3059\u308b\u6f14\u7b97\u3002 Alice \u306f\u5f97\u305f c A c_A c A \u200b \u3092\u79d8\u5bc6\u9375\u3067\u8907\u5408\u3057\u3001 \u03b1 \u2032 \\alpha' \u03b1 \u2032 \u3092\u5f97\u308b\u3002 \u305d\u308c\u305e\u308c \u03b2 = \u2212 \u03b2 \u2032 ( m o d q ) , \u03b1 = \u03b1 \u2032 ( m o d q ) \\beta = -\\beta'\\ (mod\\ q), \\alpha = \\alpha'\\ (mod\\ q) \u03b2 = \u2212 \u03b2 \u2032 ( m o d q ) , \u03b1 = \u03b1 \u2032 ( m o d q ) \u3092\u8a08\u7b97\u3059\u308b\u3002 a b = \u03b1 + \u03b2 ab = \\alpha + \\beta ab = \u03b1 + \u03b2 \u3067\u3042\u308b\u3002 \u9014\u4e2d\u306b\u51fa\u3066\u304d\u305f c B c_B c B \u200b \u3092\u5c55\u958b\u3059\u308b\u3068\u3001 c B = b \u00d7 E c A + E E A ( \u03b2 \u2032 ) = b \u00d7 E E A ( a ) + E E A ( \u03b2 \u2032 ) E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 c B = E A ( a b + \u03b2 \u2032 ) \\begin{aligned} c_B &= b \\times_E c_A &+_E E_A(\\beta') \\\\ &= b \\times_E E_A(a) &+_E E_A(\\beta') \\\\ E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001\\\\ c_B &= E_A(ab + \\beta') \\\\ \\end{aligned} c B \u200b E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 c B \u200b \u200b = b \u00d7 E \u200b c A \u200b = b \u00d7 E \u200b E A \u200b ( a ) = E A \u200b ( ab + \u03b2 \u2032 ) \u200b + E \u200b E A \u200b ( \u03b2 \u2032 ) + E \u200b E A \u200b ( \u03b2 \u2032 ) c B c_B c B \u200b \u3092\u8907\u5408\u3057\u305f\u5024\u304c \u03b1 \u2032 \\alpha' \u03b1 \u2032 \u3067\u3042\u308b\u304b\u3089\u3001 \u03b1 \u2032 = a b + \u03b2 \u2032 a b = \u03b1 \u2032 \u2212 \u03b2 \u2032 = \u03b1 + \u03b2 \\begin{aligned} \\alpha' &= ab + \\beta' \\\\ ab &= \\alpha' - \\beta' = \\alpha + \\beta \\end{aligned} \u03b1 \u2032 ab \u200b = ab + \u03b2 \u2032 = \u03b1 \u2032 \u2212 \u03b2 \u2032 = \u03b1 + \u03b2 \u200b MtA \u3092\u7528\u3044\u305f\u79d8\u5bc6\u6570\u306e\u7a4d\u306e\u5206\u6563 k k k \u306e\u52a0\u6cd5\u5206\u6563 k 1 , k 2 , . . . , k n k_1, k_2, ..., k_n k 1 \u200b , k 2 \u200b , ... , k n \u200b \u3092 n\u4eba\u306e\u30d7\u30ec\u30fc\u30e4\u30fc P 0 , P 1 , . . . P n P_0, P_1, ... P_n P 0 \u200b , P 1 \u200b , ... P n \u200b \u305d\u308c\u305e\u308c\u306b\u79d8\u5bc6\u5171\u6709\u3059\u308b\u3002 \u540c\u69d8\u306b \u03b3 \\gamma \u03b3 \u3082\u79d8\u5bc6\u5171\u6709\u3059\u308b\u3002 k = k 1 + k 2 + . . . + k n \u03b3 = \u03b3 1 + \u03b3 2 + . . . + \u03b3 n \\begin{aligned} k &= k_1 + k_2 + ... + k_n \\\\ \\gamma &= \\gamma_1 + \\gamma_2 + ... + \\gamma_n \\\\ \\end{aligned} k \u03b3 \u200b = k 1 \u200b + k 2 \u200b + ... + k n \u200b = \u03b3 1 \u200b + \u03b3 2 \u200b + ... + \u03b3 n \u200b \u200b k k k \u3068 \u03b3 \\gamma \u03b3 \u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u3068\u3001 k \u00d7 \u03b3 = ( k 1 + . . . k n ) \u00d7 ( \u03b3 1 + . . . + \u03b3 n ) = + k 1 \u03b3 1 + k 1 \u03b3 2 + . . . + k 1 \u03b3 n + k 2 \u03b3 1 + k 2 \u03b3 2 + . . . + k 2 \u03b3 n + . . . + k n \u03b3 1 + k 2 \u03b3 2 + . . . + k n \u03b3 n = \u2211 i , j n k i \u03b3 j \\begin{aligned} k \\times \\gamma &=& &(k_1 + ... k_n) \\times (\\gamma_1 + ... + \\gamma_n) \\\\ &=&+&\\ k_1\\gamma_1 + k_1\\gamma_2 + ... + k_1\\gamma_n \\\\ & &+&\\ k_2\\gamma_1 + k_2\\gamma_2 + ... + k_2\\gamma_n \\\\ & &+&\\ ... \\\\ & &+&\\ k_n\\gamma_1 + k_2\\gamma_2 + ... + k_n\\gamma_n \\\\ &=& & \\sum_{i,j}^n k_i\\gamma_j \\end{aligned} k \u00d7 \u03b3 \u200b = = = \u200b + + + + \u200b ( k 1 \u200b + ... k n \u200b ) \u00d7 ( \u03b3 1 \u200b + ... + \u03b3 n \u200b ) k 1 \u200b \u03b3 1 \u200b + k 1 \u200b \u03b3 2 \u200b + ... + k 1 \u200b \u03b3 n \u200b k 2 \u200b \u03b3 1 \u200b + k 2 \u200b \u03b3 2 \u200b + ... + k 2 \u200b \u03b3 n \u200b ... k n \u200b \u03b3 1 \u200b + k 2 \u200b \u03b3 2 \u200b + ... + k n \u200b \u03b3 n \u200b i , j \u2211 n \u200b k i \u200b \u03b3 j \u200b \u200b \u3053\u3053\u3067\u3001 k i r j = \u03b1 i j + \u03b2 i j k_i r_j = \\alpha_{ij} + \\beta_{ij} k i \u200b r j \u200b = \u03b1 ij \u200b + \u03b2 ij \u200b \u3068\u3057\u3066\u3001\u4e0a\u306e\u5f0f\u3092\u5c55\u958b\u3059\u308b\u3068\u3001 k \u00d7 \u03b3 = \u2211 i , j n ( \u03b1 i j + \u03b2 i j ) = \u2211 j n \u2211 i n ( \u03b1 i j + \u03b2 j i ) \u53f3\u306e\u7dcf\u548c\u3092 \u03b4 i = \u2211 j n ( \u03b1 i j + \u03b2 j i ) \u3068\u7f6e\u304f\u3068\u3001 k \u00d7 \u03b3 = \u2211 i n \u03b4 i \u03b4 i \u3092\u5c55\u958b\u3057\u3066\u3001 \u03b4 i = \u2211 j n ( \u03b1 i j + \u03b2 j i ) = ( \u03b1 i i + \u03b2 i i ) + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) = k i \u00d7 \u03b3 i + + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) \\begin{aligned} k \\times \\gamma &=& \\sum_{i,j}^n (\\alpha_{ij}+\\beta_{ij}) \\\\ &=& \\sum_j^n \\sum_i^n (\\alpha_{ij}+\\beta{ji}) \\\\ \u53f3\u306e\u7dcf\u548c\u3092 \\\\ \\delta_i &=& \\sum_j^n (\\alpha_{ij}+\\beta_{ji}) \\\\ \u3068\u7f6e\u304f\u3068\u3001 \\\\ k \\times \\gamma &=& \\sum_i^n \\delta_i \\\\ \\delta_i \u3092\u5c55\u958b\u3057\u3066\u3001\\\\ \\delta_i &=& \\sum_j^n (\\alpha_{ij}+\\beta_{ji}) \\\\ &=& (\\alpha_{ii}+\\beta_{ii}) + \\sum_{j\\neq i}^n (\\alpha_{ij}+\\beta_{ji}) \\\\ &=& k_i \\times \\gamma_i + + \\sum_{j\\neq i}^n (\\alpha_{ij}+\\beta_{ji}) \\\\ \\end{aligned} k \u00d7 \u03b3 \u53f3\u306e\u7dcf\u548c\u3092 \u03b4 i \u200b \u3068\u7f6e\u304f\u3068\u3001 k \u00d7 \u03b3 \u03b4 i \u200b \u3092\u5c55\u958b\u3057\u3066\u3001 \u03b4 i \u200b \u200b = = = = = = = \u200b i , j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ij \u200b ) j \u2211 n \u200b i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji ) j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) i \u2211 n \u200b \u03b4 i \u200b j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) ( \u03b1 ii \u200b + \u03b2 ii \u200b ) + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) k i \u200b \u00d7 \u03b3 i \u200b + + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) \u200b \u3059\u3079\u3066\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u540c\u58eb P i , P j P_i, P_j P i \u200b , P j \u200b \u3067 k i \u00d7 \u03b3 j k_i \\times \\gamma_j k i \u200b \u00d7 \u03b3 j \u200b \u3068 k j \u00d7 \u03b3 i k_j \\times \\gamma_i k j \u200b \u00d7 \u03b3 i \u200b \u3092 MtA \u3059\u308b\u3068\u3001\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 \u03b1 i j ; j \u2260 i \\alpha_{ij; j\\neq i} \u03b1 ij ; j \ue020 = i \u200b \u3068 \u03b2 j i ; j \u2260 i \\beta_{ji; j\\neq i} \u03b2 ji ; j \ue020 = i \u200b \u3092\u6240\u6709\u3059\u308b\u3002 P i P_i P i \u200b \u306f\u5f53\u7136 k i , \u03b3 i k_i, \\gamma_i k i \u200b , \u03b3 i \u200b \u3082\u4fdd\u6709\u3057\u3066\u3044\u308b\u306e\u3067\u3001 \u03b4 i \\delta_i \u03b4 i \u200b \u3092\u8a08\u7b97\u3067\u304d\u308b\u3002 \u3064\u307e\u308a\u3001\u4e8c\u3064\u306e\u79d8\u5bc6\u6570\u306e\u52a0\u6cd5\u5206\u6563\u5171\u6709\u304b\u3089\u3001\u305d\u306e\u7a4d\u306e\u52a0\u6cd5\u5206\u6563\u5171\u6709\u3078\u3068\u5909\u63db\u3067\u304d\u308b\u3002 \u5206\u6563\u9375\u751f\u6210 \u8ad6\u6587\u3067\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u304c\u3001joint-Feldman VSS \u3092\u7528\u3044\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002 \u3053\u3053\u3067\u306f\u9375\u751f\u6210\u306f\u7701\u7565\u3057\u3001\u4ee5\u4e0b\u306e\u6027\u8cea\u306e\u79d8\u5bc6\u5206\u6563\u304c\u51fa\u6765\u3066\u3044\u308b\u3068\u3057\u3066\u9032\u3081\u308b\u3002 \u79d8\u5bc6\u9375\u3092 x x x \u3068\u3057\u3001\u5404\u30d1\u30fc\u30c6\u30a3 P i P_i P i \u200b \u306f\u305d\u306e\u52a0\u6cd5\u5206\u6563 u i u_i u i \u200b \u3092\u6301\u3064\u3002 x = \u2211 i n u i x = \\sum_i^n u_i x = i \u2211 n \u200b u i \u200b \u516c\u958b\u9375 y y y \u306f\u3001 y = g x = g \u2211 i n u i = \u220f i n g u i y = g^x = g^{\\sum_i^n u_i} = \\prod_i^n g^{u_i} y = g x = g \u2211 i n \u200b u i \u200b = i \u220f n \u200b g u i \u200b \u7f72\u540d\u751f\u6210\u30d7\u30ed\u30c8\u30b3\u30eb \u4ee5\u4e0a\u3092\u8e0f\u307e\u3048\u3066\u7f72\u540d\u751f\u6210\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u8aac\u660e\u3059\u308b\u3002 \u8ad6\u6587\u3067\u306f\u60aa\u610f\u3042\u308b\u30d7\u30ec\u30fc\u30e4\u30fc\u3078\u306e\u8010\u6027\u3084\u3001\u4e00\u822c\u7684\u306a (t,n) threshold signining \u306b\u3064\u3044\u3066\u8ff0\u3079\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u5584\u610f\u306e\u30d1\u30fc\u30c6\u30a3\u306b\u3088\u308b (n-1,n) threshold signing \u306b\u7c21\u7565\u5316\u3059\u308b\u3002 Phase 1 \u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u30e9\u30f3\u30c0\u30e0\u306a\u5024 k i , \u03b3 i k_i, \\gamma_i k i \u200b , \u03b3 i \u200b \u3092\u9078\u3076\u3002 \u3055\u3089\u306b\u3001 g u i g^{u_i} g u i \u200b \u304a\u3088\u3073 g \u03b3 i g^{\\gamma_i} g \u03b3 i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002 Phase 2 \u5168\u3066\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u30da\u30a2 P i , P j P_i, P_j P i \u200b , P j \u200b \u3067 k i , \u03b3 j k_i, \\gamma_j k i \u200b , \u03b3 j \u200b \u306e MtA \u3092\u884c\u3044\u3001 \u03b4 i = k i \u03b3 i + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) \\delta_i = k_i\\gamma_i + \\sum_{j\\neq i}^n (\\alpha_{ij} + \\beta_{ji}) \u03b4 i \u200b = k i \u200b \u03b3 i \u200b + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) \u3092\u8a08\u7b97\u3059\u308b\u3002 \u540c\u69d8\u306b\u3001 k i u i = \u03bc i j + \u03bd i j k_iu_i = \\mu_{ij} + \\nu_{ij} k i \u200b u i \u200b = \u03bc ij \u200b + \u03bd ij \u200b \u306e MtA \u3092\u884c\u3044\u3001 \u03c3 i = k i u i + \u2211 j \u2260 i n ( \u03bc i j + \u03bd j i ) \\sigma_i = k_iu_i + \\sum_{j\\neq i}^n (\\mu_{ij} + \\nu_{ji}) \u03c3 i \u200b = k i \u200b u i \u200b + j \ue020 = i \u2211 n \u200b ( \u03bc ij \u200b + \u03bd ji \u200b ) \u3092\u8a08\u7b97\u3059\u308b\u3002 Phase 3 \u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 \u03b4 i \\delta_i \u03b4 i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002 \u81ea\u8eab\u306e\u6301\u3064 \u03b4 i \\delta_i \u03b4 i \u200b \u3068\u3001\u53d7\u3051\u53d6\u3063\u305f \u03b4 j \\delta_j \u03b4 j \u200b \u3092\u8db3\u3057\u3066\u3001 \u03b4 = k \u03b3 = \u2211 i \u03b4 i \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002 \\delta = k\\gamma = \\sum_i{\\delta_i} \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002 \u03b4 = k\u03b3 = i \u2211 \u200b \u03b4 i \u200b \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002 Phase 4 \u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 R = ( \u220f i n g \u03b3 i ) \u03b4 \u2212 1 R=(\\prod_i^n g^{\\gamma_i})^{\\delta^{-1}} R = ( \u220f i n \u200b g \u03b3 i \u200b ) \u03b4 \u2212 1 \u3092\u8a08\u7b97\u3059\u308b\u3002\u306a\u304a\u3001 g \u03b3 i g^{\\gamma_i} g \u03b3 i \u200b \u306f Phase1 \u3067\u53d7\u3051\u53d6\u3063\u3066\u3044\u308b\u3002 \u3053\u306e\u5f0f\u3092\u5c55\u958b\u3059\u308b\u3068\u3001 R = ( \u220f i n g \u03b3 i ) \u03b4 \u2212 1 = ( g \u2211 i n \u03b3 i ) ( k \u03b3 ) \u2212 1 = g \u03b3 \u00d7 ( k \u03b3 ) \u2212 1 = g k \u2212 1 \\begin{aligned} R &= (\\prod_i^n g^{\\gamma_i})^{\\delta^{-1}} \\\\ &= (g^{\\sum_i^n \\gamma_i})^{(k\\gamma)^{-1}} \\\\ &= g^{\\gamma \\times (k\\gamma)~{-1}} \\\\ &= g^{k^{-1}} \\\\ \\end{aligned} R \u200b = ( i \u220f n \u200b g \u03b3 i \u200b ) \u03b4 \u2212 1 = ( g \u2211 i n \u200b \u03b3 i \u200b ) ( k\u03b3 ) \u2212 1 = g \u03b3 \u00d7 ( k\u03b3 ) \u2212 1 = g k \u2212 1 \u200b \u306b\u306a\u308b\u3002 H \u2032 H' H \u2032 \u95a2\u6570\u3092\u7528\u3044\u3066\u3001 r = H \u2032 ( R ) r = H'(R) r = H \u2032 ( R ) \u3082\u8a08\u7b97\u3059\u308b\u3002\u3053\u308c\u304c\u7f72\u540d\u306e\u4e00\u3064 r r r \u306e\u5024\u3067\u3042\u308b\u3002 Phase 5 \u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f s i = m k i + r \u03c3 i s_i = mk_i + r\\sigma_i s i \u200b = m k i \u200b + r \u03c3 i \u200b \u3092\u8a08\u7b97\u3059\u308b\u3002 \u3055\u3089\u306b\u3001\u8a08\u7b97\u3057\u305f s i s_i s i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3057\u3001\u53d7\u3051\u53d6\u3063\u305f s j s_j s j \u200b \u3092\u7528\u3044\u3066\u7dcf\u548c\u3092\u8a08\u7b97\u3059\u308b\u3002\u3053\u306e\u7dcf\u548c\u306f\u3001 s = \u2211 i n s i = \u2211 i n ( m k i + r \u03c3 i ) = m \u2211 i n k i + r \u2211 i n \u03c3 i = m k + r k x = k ( m + r x ) \\begin{aligned} s &= \\sum_i^n s_i \\\\ &= \\sum_i^n(mk_i + r\\sigma_i) \\\\ &= m\\sum_i^n k_i + r\\sum_i^n \\sigma_i \\\\ &= mk + rkx \\\\ &= k(m + rx) \\\\ \\end{aligned} s \u200b = i \u2211 n \u200b s i \u200b = i \u2211 n \u200b ( m k i \u200b + r \u03c3 i \u200b ) = m i \u2211 n \u200b k i \u200b + r i \u2211 n \u200b \u03c3 i \u200b = mk + r k x = k ( m + r x ) \u200b \u3067\u3042\u308a\u3001\u7f72\u540d\u306e s s s \u5024\u306b\u4e00\u81f4\u3059\u308b\u3002 \u691c\u8a3c DSA \u3068\u540c\u3058\u304f g m s + y r s = R g^{\\frac{m}{s}} + y^{\\frac{r}{s}} = R g s m \u200b + y s r \u200b = R \u3092\u78ba\u8a8d\u3059\u308c\u3070\u3088\u3044\u3002 g m s + y r s = g m s + ( g x ) r s = g m + r x s = g 1 k = R \\begin{aligned} g^{\\frac{m}{s}} + y^{\\frac{r}{s}} &= g^{\\frac{m}{s}} + (g^{x})^{\\frac{r}{s}} \\\\ &= g^{\\frac{m+rx}{s}} \\\\ &= g^{\\frac{1}{k}} \\\\ &= R \\\\ \\end{aligned} g s m \u200b + y s r \u200b \u200b = g s m \u200b + ( g x ) s r \u200b = g s m + r x \u200b = g k 1 \u200b = R \u200b \u30ea\u30f3\u30af \u8ad6\u6587 http://stevengoldfeder.com/papers/GG18.pdf \u4ee5\u4e0a\u3092\u78ba\u8a8d\u3057\u305f\u30b3\u30fc\u30c9 https://github.com/dai1975/gg18-etude \u7701\u7565\u3057\u305f\u60aa\u610f\u3042\u308b\u30d7\u30ec\u30fc\u30e4\u30fc\u5bfe\u7b56\u3082\u542b\u3093\u3060\u4e00\u822c\u7684\u306a\u5b9f\u88c5(\u4e0a\u306e\u30b3\u30fc\u30c9\u306e\u6955\u5186\u66f2\u7dda\u8a08\u7b97\u306b\u3082\u5229\u7528) https://github.com/KZen-networks/multi-party-ecdsa","title":"Fast Multiparty Threshold ECDSA with Fast Trustless Setup"},{"location":"topics/Blockchain/2019-03-13--gg18/#fast-multiparty-threshold-ecdsa-with-fast-trustless-setup","text":"2019-03-13 Rosario Gennaro, Steven Goldfeder. 2018. \u8ad6\u6587\u3002 \u8457\u8005\u306e\u30a4\u30cb\u30b7\u30e3\u30eb\u3068\u767a\u8868\u5e74\u3092\u3068\u3063\u3066 GG18 \u3068\u547c\u79f0\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u5023\u3046\u3002 \u96e2\u6563\u5bfe\u6570\u6697\u53f7\u306e DSA \u5f62\u5f0f\u306e\u7f72\u540d\u306b\u304a\u3051\u308b\u591a\u4eba\u6570\u306e threshold signatures \u306e\u554f\u984c\u3078\u306e\u89e3\u6cd5\u304c\u8ff0\u3079\u3089\u308c\u3066\u3044\u308b\u3002","title":"Fast Multiparty Threshold ECDSA with Fast Trustless Setup"},{"location":"topics/Blockchain/2019-03-13--gg18/#dsa-threshold-signatures","text":"threshold signing / threshold signatures \u3068\u306f\u3001 n n n \u4eba\u3067\u79d8\u5bc6\u9375\u3092\u5206\u5272\u4fdd\u6709\u3057\u3001\u305d\u306e\u3046\u3061 t + 1 t+1 t + 1 \u4eba\u96c6\u307e\u308c\u3070\u7f72\u540d\u3092\u4f5c\u6210\u3067\u304d\u308b\u3068\u3044\u3046\u30b7\u30b9\u30c6\u30e0\u3002\u3044\u308f\u3086\u308b\u30de\u30eb\u30c1\u30b7\u30b0\u3002 \u96e2\u6563\u5bfe\u6570\u306e DSA \u306f\u4e00\u822c\u7684\u306b R = g 1 k r = H \u2032 ( R ) s = k ( H ( m ) + x r ) \\begin{aligned} R &= g^{\\frac{1}{k}} \\\\ r &= H'(R) \\\\ s &= k(H(m) + xr) \\\\ \\end{aligned} R r s \u200b = g k 1 \u200b = H \u2032 ( R ) = k ( H ( m ) + x r ) \u200b \u3068\u8868\u3055\u308c\u308b\u3002 \u3053\u3053\u3067\u3001 x x x \u306f\u79d8\u5bc6\u9375 k , r , s k,r,s k , r , s \u306f\u7f72\u540d\u306b\u7528\u3044\u308b\u4e00\u6642\u7684\u306a\u5024 M M M \u306f\u7f72\u540d\u5bfe\u8c61\u306e\u30e1\u30c3\u30bb\u30fc\u30b8 H H H \u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u3092\u5f97\u308b\u95a2\u6570 H \u2032 H' H \u2032 \u306f\u5de1\u56de\u7fa4 G G G \u304b\u3089\u30b9\u30ab\u30e9 Z q Zq Zq \u3078\u5909\u63db\u3059\u308b\u95a2\u6570 \u305f\u3068\u3048\u3070 ECDSA \u306a\u3089\u5ea7\u6a19 P P P \u306e x x x \u5ea7\u6a19\u3092\u5f97\u308b\u95a2\u6570 \u3067\u3042\u308b\u3002 threshold signing \u306e\u305f\u3081\u306b\u306f\u3001x,k \u3092\u5206\u6563\u3057\u3066\u4fdd\u6709\u3057\u3001r,s \u3092\u751f\u6210\u3067\u304d\u308c\u3070\u3088\u3044\u306e\u3060\u304c\u3001\u5206\u6563\u4fdd\u6709\u3057\u305f\u5024\u304b\u3089\u3001k\u306e\u9006\u6570\u306e\u6307\u6570\u6f14\u7b97\u3068\u3001\u4e8c\u3064\u306e\u79d8\u5bc6\u6570 x,k \u306e\u7a4d\u3092\u6c42\u3081\u308b\u306e\u304c\u96e3\u3057\u3044\u3002","title":"DSA \u306e threshold signatures"},{"location":"topics/Blockchain/2019-03-13--gg18/#mta","text":"\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001GG18 \u8ad6\u6587\u3067\u306f Multitive to Addaptive \u3068\u3044\u3046\u30c6\u30af\u30cb\u30c3\u30af\u3092\u9069\u7528\u3057\u3066\u3044\u308b\u3002\u7a4d\u548c\u5909\u63db\u3068\u3067\u3082\u8a33\u305b\u3070\u3088\u3044\u304b\u3002 Alice, Bob \u304c\u305d\u308c\u305e\u308c\u79d8\u5bc6\u6570 a , b a, b a , b \u3092\u6301\u3063\u3066\u3044\u308b\u3068\u3059\u308b\u3002 Alice \u306f\u81ea\u8eab\u306e\u516c\u958b\u9375 A A A \u3067 a a a \u3092\u52a0\u6cd5\u6e96\u540c\u578b\u6697\u53f7\u5316\u3057\u305f\u5024 c A = E A ( a ) c_A = E_A(a) c A \u200b = E A \u200b ( a ) \u3092 Bob \u3078\u9001\u308b Bob \u306f\u30e9\u30f3\u30c0\u30e0\u306a\u5024 \u03b2 \u2032 \\beta' \u03b2 \u2032 \u3092\u9078\u3073\u3001 c B = b \u00d7 E c A + E E A ( \u03b2 \u2032 ) c_B = b \\times_E c_A +_E E_A(\\beta') c B \u200b = b \u00d7 E \u200b c A \u200b + E \u200b E A \u200b ( \u03b2 \u2032 ) \u3092\u8a08\u7b97\u3057\u3066 Alice \u3078\u9001\u308b\u3002 \u3053\u3053\u3067\u3001 \u00d7 E , + E \\times_E, +_E \u00d7 E \u200b , + E \u200b \u306f\u3001\u6697\u53f7\u5316\u3055\u308c\u305f\u5024\u306b\u5bfe\u3059\u308b\u6f14\u7b97\u3002 Alice \u306f\u5f97\u305f c A c_A c A \u200b \u3092\u79d8\u5bc6\u9375\u3067\u8907\u5408\u3057\u3001 \u03b1 \u2032 \\alpha' \u03b1 \u2032 \u3092\u5f97\u308b\u3002 \u305d\u308c\u305e\u308c \u03b2 = \u2212 \u03b2 \u2032 ( m o d q ) , \u03b1 = \u03b1 \u2032 ( m o d q ) \\beta = -\\beta'\\ (mod\\ q), \\alpha = \\alpha'\\ (mod\\ q) \u03b2 = \u2212 \u03b2 \u2032 ( m o d q ) , \u03b1 = \u03b1 \u2032 ( m o d q ) \u3092\u8a08\u7b97\u3059\u308b\u3002 a b = \u03b1 + \u03b2 ab = \\alpha + \\beta ab = \u03b1 + \u03b2 \u3067\u3042\u308b\u3002 \u9014\u4e2d\u306b\u51fa\u3066\u304d\u305f c B c_B c B \u200b \u3092\u5c55\u958b\u3059\u308b\u3068\u3001 c B = b \u00d7 E c A + E E A ( \u03b2 \u2032 ) = b \u00d7 E E A ( a ) + E E A ( \u03b2 \u2032 ) E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 c B = E A ( a b + \u03b2 \u2032 ) \\begin{aligned} c_B &= b \\times_E c_A &+_E E_A(\\beta') \\\\ &= b \\times_E E_A(a) &+_E E_A(\\beta') \\\\ E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001\\\\ c_B &= E_A(ab + \\beta') \\\\ \\end{aligned} c B \u200b E \u306f\u52a0\u6cd5\u3067\u6e96\u540c\u578b\u306a\u306e\u3067\u3001 c B \u200b \u200b = b \u00d7 E \u200b c A \u200b = b \u00d7 E \u200b E A \u200b ( a ) = E A \u200b ( ab + \u03b2 \u2032 ) \u200b + E \u200b E A \u200b ( \u03b2 \u2032 ) + E \u200b E A \u200b ( \u03b2 \u2032 ) c B c_B c B \u200b \u3092\u8907\u5408\u3057\u305f\u5024\u304c \u03b1 \u2032 \\alpha' \u03b1 \u2032 \u3067\u3042\u308b\u304b\u3089\u3001 \u03b1 \u2032 = a b + \u03b2 \u2032 a b = \u03b1 \u2032 \u2212 \u03b2 \u2032 = \u03b1 + \u03b2 \\begin{aligned} \\alpha' &= ab + \\beta' \\\\ ab &= \\alpha' - \\beta' = \\alpha + \\beta \\end{aligned} \u03b1 \u2032 ab \u200b = ab + \u03b2 \u2032 = \u03b1 \u2032 \u2212 \u03b2 \u2032 = \u03b1 + \u03b2 \u200b","title":"MtA"},{"location":"topics/Blockchain/2019-03-13--gg18/#mta_1","text":"k k k \u306e\u52a0\u6cd5\u5206\u6563 k 1 , k 2 , . . . , k n k_1, k_2, ..., k_n k 1 \u200b , k 2 \u200b , ... , k n \u200b \u3092 n\u4eba\u306e\u30d7\u30ec\u30fc\u30e4\u30fc P 0 , P 1 , . . . P n P_0, P_1, ... P_n P 0 \u200b , P 1 \u200b , ... P n \u200b \u305d\u308c\u305e\u308c\u306b\u79d8\u5bc6\u5171\u6709\u3059\u308b\u3002 \u540c\u69d8\u306b \u03b3 \\gamma \u03b3 \u3082\u79d8\u5bc6\u5171\u6709\u3059\u308b\u3002 k = k 1 + k 2 + . . . + k n \u03b3 = \u03b3 1 + \u03b3 2 + . . . + \u03b3 n \\begin{aligned} k &= k_1 + k_2 + ... + k_n \\\\ \\gamma &= \\gamma_1 + \\gamma_2 + ... + \\gamma_n \\\\ \\end{aligned} k \u03b3 \u200b = k 1 \u200b + k 2 \u200b + ... + k n \u200b = \u03b3 1 \u200b + \u03b3 2 \u200b + ... + \u03b3 n \u200b \u200b k k k \u3068 \u03b3 \\gamma \u03b3 \u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u3068\u3001 k \u00d7 \u03b3 = ( k 1 + . . . k n ) \u00d7 ( \u03b3 1 + . . . + \u03b3 n ) = + k 1 \u03b3 1 + k 1 \u03b3 2 + . . . + k 1 \u03b3 n + k 2 \u03b3 1 + k 2 \u03b3 2 + . . . + k 2 \u03b3 n + . . . + k n \u03b3 1 + k 2 \u03b3 2 + . . . + k n \u03b3 n = \u2211 i , j n k i \u03b3 j \\begin{aligned} k \\times \\gamma &=& &(k_1 + ... k_n) \\times (\\gamma_1 + ... + \\gamma_n) \\\\ &=&+&\\ k_1\\gamma_1 + k_1\\gamma_2 + ... + k_1\\gamma_n \\\\ & &+&\\ k_2\\gamma_1 + k_2\\gamma_2 + ... + k_2\\gamma_n \\\\ & &+&\\ ... \\\\ & &+&\\ k_n\\gamma_1 + k_2\\gamma_2 + ... + k_n\\gamma_n \\\\ &=& & \\sum_{i,j}^n k_i\\gamma_j \\end{aligned} k \u00d7 \u03b3 \u200b = = = \u200b + + + + \u200b ( k 1 \u200b + ... k n \u200b ) \u00d7 ( \u03b3 1 \u200b + ... + \u03b3 n \u200b ) k 1 \u200b \u03b3 1 \u200b + k 1 \u200b \u03b3 2 \u200b + ... + k 1 \u200b \u03b3 n \u200b k 2 \u200b \u03b3 1 \u200b + k 2 \u200b \u03b3 2 \u200b + ... + k 2 \u200b \u03b3 n \u200b ... k n \u200b \u03b3 1 \u200b + k 2 \u200b \u03b3 2 \u200b + ... + k n \u200b \u03b3 n \u200b i , j \u2211 n \u200b k i \u200b \u03b3 j \u200b \u200b \u3053\u3053\u3067\u3001 k i r j = \u03b1 i j + \u03b2 i j k_i r_j = \\alpha_{ij} + \\beta_{ij} k i \u200b r j \u200b = \u03b1 ij \u200b + \u03b2 ij \u200b \u3068\u3057\u3066\u3001\u4e0a\u306e\u5f0f\u3092\u5c55\u958b\u3059\u308b\u3068\u3001 k \u00d7 \u03b3 = \u2211 i , j n ( \u03b1 i j + \u03b2 i j ) = \u2211 j n \u2211 i n ( \u03b1 i j + \u03b2 j i ) \u53f3\u306e\u7dcf\u548c\u3092 \u03b4 i = \u2211 j n ( \u03b1 i j + \u03b2 j i ) \u3068\u7f6e\u304f\u3068\u3001 k \u00d7 \u03b3 = \u2211 i n \u03b4 i \u03b4 i \u3092\u5c55\u958b\u3057\u3066\u3001 \u03b4 i = \u2211 j n ( \u03b1 i j + \u03b2 j i ) = ( \u03b1 i i + \u03b2 i i ) + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) = k i \u00d7 \u03b3 i + + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) \\begin{aligned} k \\times \\gamma &=& \\sum_{i,j}^n (\\alpha_{ij}+\\beta_{ij}) \\\\ &=& \\sum_j^n \\sum_i^n (\\alpha_{ij}+\\beta{ji}) \\\\ \u53f3\u306e\u7dcf\u548c\u3092 \\\\ \\delta_i &=& \\sum_j^n (\\alpha_{ij}+\\beta_{ji}) \\\\ \u3068\u7f6e\u304f\u3068\u3001 \\\\ k \\times \\gamma &=& \\sum_i^n \\delta_i \\\\ \\delta_i \u3092\u5c55\u958b\u3057\u3066\u3001\\\\ \\delta_i &=& \\sum_j^n (\\alpha_{ij}+\\beta_{ji}) \\\\ &=& (\\alpha_{ii}+\\beta_{ii}) + \\sum_{j\\neq i}^n (\\alpha_{ij}+\\beta_{ji}) \\\\ &=& k_i \\times \\gamma_i + + \\sum_{j\\neq i}^n (\\alpha_{ij}+\\beta_{ji}) \\\\ \\end{aligned} k \u00d7 \u03b3 \u53f3\u306e\u7dcf\u548c\u3092 \u03b4 i \u200b \u3068\u7f6e\u304f\u3068\u3001 k \u00d7 \u03b3 \u03b4 i \u200b \u3092\u5c55\u958b\u3057\u3066\u3001 \u03b4 i \u200b \u200b = = = = = = = \u200b i , j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ij \u200b ) j \u2211 n \u200b i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji ) j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) i \u2211 n \u200b \u03b4 i \u200b j \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) ( \u03b1 ii \u200b + \u03b2 ii \u200b ) + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) k i \u200b \u00d7 \u03b3 i \u200b + + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) \u200b \u3059\u3079\u3066\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u540c\u58eb P i , P j P_i, P_j P i \u200b , P j \u200b \u3067 k i \u00d7 \u03b3 j k_i \\times \\gamma_j k i \u200b \u00d7 \u03b3 j \u200b \u3068 k j \u00d7 \u03b3 i k_j \\times \\gamma_i k j \u200b \u00d7 \u03b3 i \u200b \u3092 MtA \u3059\u308b\u3068\u3001\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 \u03b1 i j ; j \u2260 i \\alpha_{ij; j\\neq i} \u03b1 ij ; j \ue020 = i \u200b \u3068 \u03b2 j i ; j \u2260 i \\beta_{ji; j\\neq i} \u03b2 ji ; j \ue020 = i \u200b \u3092\u6240\u6709\u3059\u308b\u3002 P i P_i P i \u200b \u306f\u5f53\u7136 k i , \u03b3 i k_i, \\gamma_i k i \u200b , \u03b3 i \u200b \u3082\u4fdd\u6709\u3057\u3066\u3044\u308b\u306e\u3067\u3001 \u03b4 i \\delta_i \u03b4 i \u200b \u3092\u8a08\u7b97\u3067\u304d\u308b\u3002 \u3064\u307e\u308a\u3001\u4e8c\u3064\u306e\u79d8\u5bc6\u6570\u306e\u52a0\u6cd5\u5206\u6563\u5171\u6709\u304b\u3089\u3001\u305d\u306e\u7a4d\u306e\u52a0\u6cd5\u5206\u6563\u5171\u6709\u3078\u3068\u5909\u63db\u3067\u304d\u308b\u3002","title":"MtA \u3092\u7528\u3044\u305f\u79d8\u5bc6\u6570\u306e\u7a4d\u306e\u5206\u6563"},{"location":"topics/Blockchain/2019-03-13--gg18/#_1","text":"\u8ad6\u6587\u3067\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u304c\u3001joint-Feldman VSS \u3092\u7528\u3044\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002 \u3053\u3053\u3067\u306f\u9375\u751f\u6210\u306f\u7701\u7565\u3057\u3001\u4ee5\u4e0b\u306e\u6027\u8cea\u306e\u79d8\u5bc6\u5206\u6563\u304c\u51fa\u6765\u3066\u3044\u308b\u3068\u3057\u3066\u9032\u3081\u308b\u3002 \u79d8\u5bc6\u9375\u3092 x x x \u3068\u3057\u3001\u5404\u30d1\u30fc\u30c6\u30a3 P i P_i P i \u200b \u306f\u305d\u306e\u52a0\u6cd5\u5206\u6563 u i u_i u i \u200b \u3092\u6301\u3064\u3002 x = \u2211 i n u i x = \\sum_i^n u_i x = i \u2211 n \u200b u i \u200b \u516c\u958b\u9375 y y y \u306f\u3001 y = g x = g \u2211 i n u i = \u220f i n g u i y = g^x = g^{\\sum_i^n u_i} = \\prod_i^n g^{u_i} y = g x = g \u2211 i n \u200b u i \u200b = i \u220f n \u200b g u i \u200b","title":"\u5206\u6563\u9375\u751f\u6210"},{"location":"topics/Blockchain/2019-03-13--gg18/#_2","text":"\u4ee5\u4e0a\u3092\u8e0f\u307e\u3048\u3066\u7f72\u540d\u751f\u6210\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u8aac\u660e\u3059\u308b\u3002 \u8ad6\u6587\u3067\u306f\u60aa\u610f\u3042\u308b\u30d7\u30ec\u30fc\u30e4\u30fc\u3078\u306e\u8010\u6027\u3084\u3001\u4e00\u822c\u7684\u306a (t,n) threshold signining \u306b\u3064\u3044\u3066\u8ff0\u3079\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u5584\u610f\u306e\u30d1\u30fc\u30c6\u30a3\u306b\u3088\u308b (n-1,n) threshold signing \u306b\u7c21\u7565\u5316\u3059\u308b\u3002","title":"\u7f72\u540d\u751f\u6210\u30d7\u30ed\u30c8\u30b3\u30eb"},{"location":"topics/Blockchain/2019-03-13--gg18/#phase-1","text":"\u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u30e9\u30f3\u30c0\u30e0\u306a\u5024 k i , \u03b3 i k_i, \\gamma_i k i \u200b , \u03b3 i \u200b \u3092\u9078\u3076\u3002 \u3055\u3089\u306b\u3001 g u i g^{u_i} g u i \u200b \u304a\u3088\u3073 g \u03b3 i g^{\\gamma_i} g \u03b3 i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002","title":"Phase 1"},{"location":"topics/Blockchain/2019-03-13--gg18/#phase-2","text":"\u5168\u3066\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u30da\u30a2 P i , P j P_i, P_j P i \u200b , P j \u200b \u3067 k i , \u03b3 j k_i, \\gamma_j k i \u200b , \u03b3 j \u200b \u306e MtA \u3092\u884c\u3044\u3001 \u03b4 i = k i \u03b3 i + \u2211 j \u2260 i n ( \u03b1 i j + \u03b2 j i ) \\delta_i = k_i\\gamma_i + \\sum_{j\\neq i}^n (\\alpha_{ij} + \\beta_{ji}) \u03b4 i \u200b = k i \u200b \u03b3 i \u200b + j \ue020 = i \u2211 n \u200b ( \u03b1 ij \u200b + \u03b2 ji \u200b ) \u3092\u8a08\u7b97\u3059\u308b\u3002 \u540c\u69d8\u306b\u3001 k i u i = \u03bc i j + \u03bd i j k_iu_i = \\mu_{ij} + \\nu_{ij} k i \u200b u i \u200b = \u03bc ij \u200b + \u03bd ij \u200b \u306e MtA \u3092\u884c\u3044\u3001 \u03c3 i = k i u i + \u2211 j \u2260 i n ( \u03bc i j + \u03bd j i ) \\sigma_i = k_iu_i + \\sum_{j\\neq i}^n (\\mu_{ij} + \\nu_{ji}) \u03c3 i \u200b = k i \u200b u i \u200b + j \ue020 = i \u2211 n \u200b ( \u03bc ij \u200b + \u03bd ji \u200b ) \u3092\u8a08\u7b97\u3059\u308b\u3002","title":"Phase 2"},{"location":"topics/Blockchain/2019-03-13--gg18/#phase-3","text":"\u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 \u03b4 i \\delta_i \u03b4 i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002 \u81ea\u8eab\u306e\u6301\u3064 \u03b4 i \\delta_i \u03b4 i \u200b \u3068\u3001\u53d7\u3051\u53d6\u3063\u305f \u03b4 j \\delta_j \u03b4 j \u200b \u3092\u8db3\u3057\u3066\u3001 \u03b4 = k \u03b3 = \u2211 i \u03b4 i \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002 \\delta = k\\gamma = \\sum_i{\\delta_i} \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002 \u03b4 = k\u03b3 = i \u2211 \u200b \u03b4 i \u200b \u3092\u8a08\u7b97\u3057\u3001\u305d\u306e\u5de1\u56de\u7fa4\u4e0a\u306e\u9006\u6570\u3082\u8a08\u7b97\u3059\u308b\u3002","title":"Phase 3"},{"location":"topics/Blockchain/2019-03-13--gg18/#phase-4","text":"\u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f\u3001 R = ( \u220f i n g \u03b3 i ) \u03b4 \u2212 1 R=(\\prod_i^n g^{\\gamma_i})^{\\delta^{-1}} R = ( \u220f i n \u200b g \u03b3 i \u200b ) \u03b4 \u2212 1 \u3092\u8a08\u7b97\u3059\u308b\u3002\u306a\u304a\u3001 g \u03b3 i g^{\\gamma_i} g \u03b3 i \u200b \u306f Phase1 \u3067\u53d7\u3051\u53d6\u3063\u3066\u3044\u308b\u3002 \u3053\u306e\u5f0f\u3092\u5c55\u958b\u3059\u308b\u3068\u3001 R = ( \u220f i n g \u03b3 i ) \u03b4 \u2212 1 = ( g \u2211 i n \u03b3 i ) ( k \u03b3 ) \u2212 1 = g \u03b3 \u00d7 ( k \u03b3 ) \u2212 1 = g k \u2212 1 \\begin{aligned} R &= (\\prod_i^n g^{\\gamma_i})^{\\delta^{-1}} \\\\ &= (g^{\\sum_i^n \\gamma_i})^{(k\\gamma)^{-1}} \\\\ &= g^{\\gamma \\times (k\\gamma)~{-1}} \\\\ &= g^{k^{-1}} \\\\ \\end{aligned} R \u200b = ( i \u220f n \u200b g \u03b3 i \u200b ) \u03b4 \u2212 1 = ( g \u2211 i n \u200b \u03b3 i \u200b ) ( k\u03b3 ) \u2212 1 = g \u03b3 \u00d7 ( k\u03b3 ) \u2212 1 = g k \u2212 1 \u200b \u306b\u306a\u308b\u3002 H \u2032 H' H \u2032 \u95a2\u6570\u3092\u7528\u3044\u3066\u3001 r = H \u2032 ( R ) r = H'(R) r = H \u2032 ( R ) \u3082\u8a08\u7b97\u3059\u308b\u3002\u3053\u308c\u304c\u7f72\u540d\u306e\u4e00\u3064 r r r \u306e\u5024\u3067\u3042\u308b\u3002","title":"Phase 4"},{"location":"topics/Blockchain/2019-03-13--gg18/#phase-5","text":"\u5404\u30d7\u30ec\u30fc\u30e4\u30fc P i P_i P i \u200b \u306f s i = m k i + r \u03c3 i s_i = mk_i + r\\sigma_i s i \u200b = m k i \u200b + r \u03c3 i \u200b \u3092\u8a08\u7b97\u3059\u308b\u3002 \u3055\u3089\u306b\u3001\u8a08\u7b97\u3057\u305f s i s_i s i \u200b \u3092\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u3057\u3001\u53d7\u3051\u53d6\u3063\u305f s j s_j s j \u200b \u3092\u7528\u3044\u3066\u7dcf\u548c\u3092\u8a08\u7b97\u3059\u308b\u3002\u3053\u306e\u7dcf\u548c\u306f\u3001 s = \u2211 i n s i = \u2211 i n ( m k i + r \u03c3 i ) = m \u2211 i n k i + r \u2211 i n \u03c3 i = m k + r k x = k ( m + r x ) \\begin{aligned} s &= \\sum_i^n s_i \\\\ &= \\sum_i^n(mk_i + r\\sigma_i) \\\\ &= m\\sum_i^n k_i + r\\sum_i^n \\sigma_i \\\\ &= mk + rkx \\\\ &= k(m + rx) \\\\ \\end{aligned} s \u200b = i \u2211 n \u200b s i \u200b = i \u2211 n \u200b ( m k i \u200b + r \u03c3 i \u200b ) = m i \u2211 n \u200b k i \u200b + r i \u2211 n \u200b \u03c3 i \u200b = mk + r k x = k ( m + r x ) \u200b \u3067\u3042\u308a\u3001\u7f72\u540d\u306e s s s \u5024\u306b\u4e00\u81f4\u3059\u308b\u3002","title":"Phase 5"},{"location":"topics/Blockchain/2019-03-13--gg18/#_3","text":"DSA \u3068\u540c\u3058\u304f g m s + y r s = R g^{\\frac{m}{s}} + y^{\\frac{r}{s}} = R g s m \u200b + y s r \u200b = R \u3092\u78ba\u8a8d\u3059\u308c\u3070\u3088\u3044\u3002 g m s + y r s = g m s + ( g x ) r s = g m + r x s = g 1 k = R \\begin{aligned} g^{\\frac{m}{s}} + y^{\\frac{r}{s}} &= g^{\\frac{m}{s}} + (g^{x})^{\\frac{r}{s}} \\\\ &= g^{\\frac{m+rx}{s}} \\\\ &= g^{\\frac{1}{k}} \\\\ &= R \\\\ \\end{aligned} g s m \u200b + y s r \u200b \u200b = g s m \u200b + ( g x ) s r \u200b = g s m + r x \u200b = g k 1 \u200b = R \u200b","title":"\u691c\u8a3c"},{"location":"topics/Blockchain/2019-03-13--gg18/#_4","text":"\u8ad6\u6587 http://stevengoldfeder.com/papers/GG18.pdf \u4ee5\u4e0a\u3092\u78ba\u8a8d\u3057\u305f\u30b3\u30fc\u30c9 https://github.com/dai1975/gg18-etude \u7701\u7565\u3057\u305f\u60aa\u610f\u3042\u308b\u30d7\u30ec\u30fc\u30e4\u30fc\u5bfe\u7b56\u3082\u542b\u3093\u3060\u4e00\u822c\u7684\u306a\u5b9f\u88c5(\u4e0a\u306e\u30b3\u30fc\u30c9\u306e\u6955\u5186\u66f2\u7dda\u8a08\u7b97\u306b\u3082\u5229\u7528) https://github.com/KZen-networks/multi-party-ecdsa","title":"\u30ea\u30f3\u30af"},{"location":"topics/Blockchain/2019-12-10--bech32/","tags":["Tech","crypto"],"text":".katex img { object-fit: fill; padding: unset; display: block; position: absolute; width: 100%; height: inherit; } BECH32 \u306e\u30c1\u30a7\u30c3\u30af\u30b5\u30e0 2019-12-10 segwit \u30a2\u30c9\u30ec\u30b9\u306a\u3069\u306b\u4f7f\u308f\u308c\u308b BECH32 \u30a8\u30f3\u30b3\u30fc\u30c9\u306f BIP173 \u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u3066\u3001\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u90e8\u5206\u306f python \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u793a\u3055\u308c\u3066\u3044\u307e\u3059: 1 2 3 4 5 6 7 8 9 1 def bech32_polymod ( values ) : 2 GEN = [ 0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3 ] 3 chk = 1 4 for v in values : 5 b = ( chk >> 25 ) 6 chk = ( chk & 0x1ffffff ) << 5 ^ v 7 for i in range ( 5 ) : 8 chk ^= GEN [ i ] if (( b >> i ) & 1 ) else 0 9 return chk \u3053\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f BCH \u7b26\u53f7\u3067\u3042\u308a\u3001\u3053\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6c7a\u3081\u305f\u7406\u7531\u304c\u8272\u3005\u6319\u3052\u3089\u308c\u3066\u3044\u307e\u3059\u3002 bitcoin-core \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 \u306b\u306f\u3082\u3046\u3061\u3087\u3063\u3068\u8a73\u3057\u304f\u30b3\u30e1\u30f3\u30c8\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u3092\u624b\u639b\u304b\u308a\u306b\u3082\u3046\u5c11\u3057\u6df1\u304f\u7406\u89e3\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002 \u6709\u9650\u4f53 GF(2), GF(32) BCH \u7b26\u53f7\u306f\u6709\u9650\u4f53\u306e\u5270\u4f59\u306b\u306a\u308a\u307e\u3059\u3002\u6709\u9650\u4f53 GF(q) \u306f\u3001\u8981\u7d20\u6570\u304c q \u3067\u8981\u7d20\u9593\u306e\u56db\u5247\u6f14\u7b97\u306e\u7d50\u679c\u3082\u307e\u305f\u305d\u306e\u96c6\u5408\u306e\u8981\u7d20\u306b\u306a\u308b\u3088\u3046\u306a\u96c6\u5408\u3067\u3059\u3002 \u307e\u305a GF(2) \u306f 2\u306e\u5270\u4f59\u4f53\u3067\u8868\u3055\u308c\u307e\u3059\u3002\u6574\u6570\u3092 2 \u3067\u5272\u3063\u305f\u4f59\u308a\u306b\u4e38\u3081\u305f\u3082\u306e\u3067\u3059\u3002 \u305f\u3068\u3048\u3070 1 + 1 = 2 1+1 = 2 1 + 1 = 2 \u3067\u3059\u306e\u3067\u3001\u305d\u308c\u3092 2\u3067\u5272\u3063\u305f\u4f59\u308a\u306e 0 \u304c\u7d50\u679c\u3068\u306a\u308a\u307e\u3059\u3002 \u5dee\u306f\u548c\u306e\u9006\u6f14\u7b97\u3067\u30012 \u306e\u5270\u4f59\u306e\u5270\u4f59\u306e\u5834\u5408\u306f\u548c\u3068\u540c\u3058\u306b\u306a\u308a\u307e\u3059\u3002 \u3055\u3089\u306b 0,1 \u3092\u30d3\u30c3\u30c8\u3068\u307f\u306a\u3059\u3068\u3001\u548c\u3084\u5dee\u306f xor \u3068\u540c\u3058\u6f14\u7b97\u306b\u306a\u308a\u307e\u3059\u3002 \u7d9a\u3044\u3066 GF(32) \u3067\u3059\u304c\u3001\u3053\u308c\u306f\u4fc2\u6570\u304c GF(2) \u306e\u8981\u7d20\u304b\u3089\u306a\u308b\u591a\u9805\u5f0f\u306e\u96c6\u5408\u3092\u30015\u6b21\u306e\u7d20\u306a\u591a\u9805\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u3067\u8868\u305b\u307e\u3059\u3002BECH32 \u3067\u306f a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3092\u7528\u3044\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 5\u6b21\u306e\u591a\u9805\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u306a\u306e\u3067\u3001\u7d50\u679c\u306f 4\u6b21\u306b\u306a\u308a\u3001\u4fc2\u6570\u306f 5\u3064\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u4fc2\u6570\u3092\u4e26\u3079\u3066\u66f8\u304f\u3068\u3001\u4f8b\u3048\u3070 a 4 + a 3 + a a^4 + a^3 + a a 4 + a 3 + a \u306f 11001 11001 11001 \u3068\u8868\u8a18\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3055\u3089\u306b\u3053\u308c\u3092\u4e8c\u9032\u6570\u8868\u8a18\u3055\u308c\u305f\u6570\u5024\u3068\u307f\u306a\u3057\u3066\u5341\u9032\u6570\u3067\u8868\u3059\u3068\u3001\u3053\u306e\u4f8b\u3067\u306f 25 25 25 \u306b\u306a\u308a\u307e\u3059\u3002bitcoin-core \u3067\u306f\u3053\u308c\u3092\u6574\u6570\u3068\u533a\u5225\u3059\u308b\u305f\u3081\u3001 { 25 } \\{25\\} { 25 } \u3068\u66f8\u3044\u3066\u3044\u307e\u3059\u3002 GF(32) \u306e\u548c\u3068\u7a4d\u3092\u8003\u3048\u307e\u3057\u3087\u3046\u3002 \u5143\u3005\u304c\u591a\u9805\u5f0f\u306e\u4fc2\u6570\u3067\u3042\u308b\u308f\u3051\u3067\u3001\u5404\u30d3\u30c3\u30c8\u306f\u72ec\u7acb\u3057\u3066\u548c\u3092\u53d6\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3055\u3089\u306b\u4fc2\u6570\u306f GF(2) \u306e\u8981\u7d20\u3067\u3059\u304b\u3089\u3001\u548c\u306f xor \u3067\u3059\u3002\u3064\u307e\u308a\u3001GF(32) \u306e\u548c\u306f\u3001\u305d\u306e\u5024\u3092\u30d3\u30c3\u30c8 xor \u3059\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u3002\u30b3\u30e1\u30f3\u30c8\u306b\u3042\u308b\u3088\u3046\u306b\u3001 { 27 } + { 13 } = { 27 x o r 13 } = { 22 } \\{27\\} + \\{13\\} = \\{27 xor 13\\} = \\{22\\} { 27 } + { 13 } = { 27 x or 13 } = { 22 } \u6b21\u306b\u7a4d\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u7d20\u76f4\u306b\u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97\u3057\u3066 a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3067\u5272\u3063\u305f\u4f59\u308a\u3092\u53d6\u308a\u307e\u3059\u3002 { 5 } \u2217 { 26 } = ( a 2 + 1 ) \u2217 ( a 4 + a 3 + a ) = ( a 4 + a 3 + a ) \u2217 a 2 + ( a 4 + a 3 + a ) = a 6 + a 5 + a 4 + a = a 3 + 1 ( m o d a 5 + a 3 + 1 ) = { 9 } \\begin{aligned} \\{5\\} * \\{26\\} &= (a^2 + 1) * (a^4 + a^3 + a) \\\\ &= (a^4 + a^3 + a) * a^2 + (a^4 + a^3 + a) \\\\ &= a^6 + a^5 + a^4 + a \\\\ &= a^3 + 1 (mod a^5 + a^3 + 1)\\\\ &= \\{9\\} \\\\ \\end{aligned} { 5 } \u2217 { 26 } \u200b = ( a 2 + 1 ) \u2217 ( a 4 + a 3 + a ) = ( a 4 + a 3 + a ) \u2217 a 2 + ( a 4 + a 3 + a ) = a 6 + a 5 + a 4 + a = a 3 + 1 ( m o d a 5 + a 3 + 1 ) = { 9 } \u200b BCH \u306e\u751f\u6210\u591a\u9805\u5f0f BCH\u7b26\u53f7\u306f\u6709\u9650\u4f53\u306e\u5270\u4f59\u3067\u3057\u305f\u3002 \u6709\u9650\u4f53\u306e\u5927\u304d\u3055\u3084\u5270\u4f59\u306b\u4f7f\u3046\u591a\u9805\u5f0f(=\u751f\u6210\u591a\u9805\u5f0f)\u306f\u3001\u30a8\u30e9\u30fc\u306e\u767a\u898b\u80fd\u529b\u3067\u5236\u9650\u3055\u308c\u307e\u3059\u3002 BIP173 \u306b\u3042\u308b\u3088\u3046\u306b\u3001BECH32 \u3067\u306f 1023\u6587\u5b57\u4e2d\u306e 3\u3064\u306e\u30a8\u30e9\u30fc\u3092\u767a\u898b\u3059\u308b\u80fd\u529b\u3092\u9078\u3073\u307e\u3057\u305f\u3002 \u3053\u306e\u305f\u3081\u306b\u306f\u6709\u9650\u4f53 G F ( 1024 ) = G F ( 3 2 2 ) GF(1024) = GF(32^2) GF ( 1024 ) = GF ( 3 2 2 ) \u3092\u7528\u3044\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u751f\u6210\u591a\u9805\u5f0f\u306f G F ( 32 ) GF(32) GF ( 32 ) \u3092\u4fc2\u6570\u3068\u3059\u308b 2\u6b21\u306e\u591a\u9805\u5f0f 3\u3064\u306e\u7a4d\u306b\u306a\u308a\u307e\u3059(\u6b63\u3057\u304f\u306f\u3001\u9023\u7d9a\u3059\u308b\u539f\u59cb\u591a\u9805\u5f0f3\u3064\u306e\u6700\u5c0f\u516c\u500d\u6570)\u3002\u3053\u308c\u304c g ( x ) = x 6 + 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 g(x) = x^6 + {29}x^5 + {22}x^4 + {20}x^3 + {21}x^2 + {29}x + {18} g ( x ) = x 6 + 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 \u306b\u306a\u308b\u3088\u3046\u3067\u3059(\u5c0e\u51fa\u65b9\u6cd5\u306f\u5206\u304b\u3089\u306a\u304b\u3063\u305f)\u3002 \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0 \u5165\u529b\u30c7\u30fc\u30bf\u3092 G F ( 32 ) GF(32) GF ( 32 ) \u3092\u4fc2\u6570\u3068\u3059\u308b\u591a\u9805\u5f0f\u3068\u307f\u306a\u3057\u3001\u305d\u308c\u3092 g ( x ) g(x) g ( x ) \u3067\u5272\u3063\u305f\u4f59\u308a\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002 5\u30d3\u30c3\u30c8\u306e\u5024\u3092 G F ( 32 ) GF(32) GF ( 32 ) \u306e\u8981\u7d20\u3068\u307f\u306a\u3057\u3066\u53d6\u308a\u6271\u3044\u307e\u3059\u3002 \u591a\u9805\u5f0f\u306e\u9664\u7b97\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u7b46\u7b97\u3092\u60f3\u50cf\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u5206\u304b\u308a\u3084\u3059\u304f\u6574\u6570\u4fc2\u6570\u306e\u591a\u9805\u5f0f\u306e\u9664\u7b97\u3001 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) (12x^3 + 11x^2+7x+5) / (3x+2) ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) \u3092\u8003\u3048\u307e\u3057\u3087\u3046 1 2 3 4 5 6 4x^2 + 1x 3x+2 / 12x^3 + 11x^2 + 7x + 5 -12x^3 + 8x^2 3x^2 + 7x -3x^2 + 2x 5x + 5 \u3068\u7b46\u7b97\u3057\u3066\u3001 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) = 4 x 2 + 1 x \u2026 5 x + 5 (12x^3 + 11x^2 + 7x + 5) / (3x + 2) = 4x^2 + 1x \\ldots 5x+5 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) = 4 x 2 + 1 x \u2026 5 x + 5 \u3068\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002 \u7b46\u7b97\u306e\u8a08\u7b97\u306f\u3001 \u9664\u6570\u306e\u9805\u6570\u3068\u540c\u3058\u3060\u3051\u88ab\u9664\u6570\u306e\u4e0a\u304b\u3089\u53d6\u308a\u51fa\u3057\u3066\u9664\u7b97 ( ( 12 x 3 + 11 x 2 ) / ( 3 x + 2 ) = 4 x 2 \u2026 3 x 2 (12x^3 + 11x^2) / (3x+2) = 4x^2 \\ldots 3x^2 ( 12 x 3 + 11 x 2 ) / ( 3 x + 2 ) = 4 x 2 \u2026 3 x 2 ) \u3057\u3001 \u305d\u306e\u4f59\u308a\u306b\u88ab\u9664\u6570\u306e\u6b21\u306e\u6841\u3092\u8ffd\u52a0( 3 x 2 + 7 x 3x^2 + 7x 3 x 2 + 7 x )\u3057\u3066\u9664\u7b97\u3057\u2026 \u3068\u7e70\u308a\u8fd4\u3059\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 GF(32) \u4fc2\u6570\u591a\u9805\u5f0f\u306e\u4f59\u308a\u3082\u540c\u69d8\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059(\u9014\u4e2d\u3067\u51fa\u3066\u304f\u308b\u639b\u3051\u7b97\u3068\u5f15\u304d\u7b97\u306f GF(32) \u3067\u884c\u3044\u307e\u3059) \u3053\u308c\u3092\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3078\u843d\u3068\u3059\u3068\u3001\u4e00\u6841\u305a\u3064\u53d6\u308a\u51fa\u3057\u3066\u4e2d\u9593\u7d50\u679c\u306b\u8ffd\u8a18\u3059\u308b\u30eb\u30fc\u30d7\u306b\u306a\u308a\u307e\u3059\u3002 \u8ffd\u8a18\u51e6\u7406\u306f\u6841\u3092\u305a\u3089\u3057\u3066\u304b\u3089\u52a0\u7b97\u3059\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u30b7\u30d5\u30c8\u3057\u3066\u304b\u3089 xor \u3067\u3044\u3051\u307e\u3059\u3002 1 2 3 4 3 chk = 1 4 for v in val ues : 5 b = ( chk >> 25 ) 6 chk = ( chk & 0 x1ffffff ) << 5 ^ v chk \u306f\u9664\u7b97\u306e\u4e2d\u9593\u591a\u9805\u5f0f\u3067\u3059\u3002 \u591a\u9805\u5f0f\u306e\u4fc2\u6570\u306f GF(32) \u6570\u3067\u3001GF(32) \u6570\u306f 5bit \u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002 \u3088\u3063\u3066\u3001\u5404\u4fc2\u6570\u3092\u4e8c\u9032\u6570\u8868\u8a18\u3067\u305a\u3089\u3063\u3068\u4e26\u3079\u3066\u9023\u7d50\u3057\u305f\u6570\u5b57\u4f8b\u3092\u591a\u9805\u5f0f\u306e\u4fc2\u6570\u30ea\u30b9\u30c8\u3068\u307f\u306a\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u8a08\u7b97\u306e\u90fd\u5408\u4e0a\u3001\u4f4e\u4f4d\u30d3\u30c3\u30c8\u304c\u6b21\u6570\u306e\u9ad8\u3044\u9805\u306e\u4fc2\u6570\u306b\u306a\u308b\u3088\u3046\u306a\u4e26\u3073\u65b9\u306b\u306a\u308a\u307e\u3059\u3002 3\u884c\u76ee\u306e\u521d\u671f\u5024\u306e 1 \u306f\u3001\u5165\u529b\u591a\u9805\u5f0f\u306e\u6700\u5927\u9805\u306e\u4fc2\u6570\u3092 1 \u306b\u3059\u308b\u305f\u3081\u306e\u30c8\u30ea\u30c3\u30af\u3067\u3059\u3002 \u3053\u308c\u304c\u7121\u3044\u3068\u3001\u4f8b\u3048\u3070 101... \u3068 0101... \u306e\u533a\u5225\u304c\u3064\u304b\u306a\u304f\u306a\u308a\u307e\u3059\u3002 \u3055\u3066\u30016\u884c\u76ee\u3067\u306f\u307e\u305a chk \u306e\u4e0b\u4f4d25 \u30d3\u30c3\u30c8\u3092\u53d6\u308a\u51fa\u3057\u3066\u3044\u307e\u3059\u3002 \u4e0b\u4f4d25\u30d3\u30c3\u30c8\u3092\u53d6\u308a\u51fa\u3059\u3068\u3044\u3046\u306e\u306f\u3064\u307e\u308a\u3001\u5165\u529b\u591a\u9805\u5f0f\u306e\u6b21\u6570\u4e0a\u4f4d5\u9805\u306e\u4fc2\u6570\u3092\u53d6\u308a\u51fa\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002 \u3055\u3089\u306b 5\u30d3\u30c3\u30c8\u5de6\u30b7\u30d5\u30c8\u3057\u3066\u304b\u3089 v \u3092 xor \u3057\u3066\u3044\u307e\u3059\u3002 v \u3082 GF(32) \u6570\u306a\u306e\u3067 5\u30d3\u30c3\u30c8\u3067\u8868\u3055\u308c\u307e\u3059\u3002\u5de6\u30b7\u30d5\u30c8\u3057\u3066 00000 \u306b\u306a\u3063\u305f\u4e0b\u4f4d 5\u30d3\u30c3\u30c8\u90e8\u5206\u306b xor \u3059\u308b\u306e\u306f\u3001\u52a0\u7b97\u3068\u540c\u3058\u3067\u3059\u3002 \u3053\u308c\u306f\u7b46\u7b97\u51e6\u7406\u306b\u304a\u3051\u308b\u524d\u6bb5\u968e\u306e\u4f59\u308a\u306b\u88ab\u9664\u6570\u306e\u6b21\u9805\u3092\u52a0\u3048\u308b\u51e6\u7406\u306b\u76f8\u5f53\u3057\u3066\u3044\u307e\u3059\u3002 \u6b21\u306b\u5404\u6bb5\u968e\u306b\u304a\u3051\u308b\u9664\u7b97\u3092\u8003\u3048\u307e\u3059\u3002 f ( x ) f(x) f ( x ) \u3092 5\u6b21\u591a\u9805\u5f0f\u3068\u3057\u3066\u88ab\u9664\u6570 c ( x ) = c \u2217 x 6 + f ( x ) c(x) = c*x^6 + f(x) c ( x ) = c \u2217 x 6 + f ( x ) \u3068\u7f6e\u304d\u30016\u6b21\u591a\u9805\u5f0f g ( x ) g(x) g ( x ) \u3067\u306e\u4f59\u308a\u3092\u8a08\u7b97\u3059\u308b\u3068\u3001 c ( x ) m o d \u2009 \u2009 g ( x ) = ( c \u2217 x 6 + f ( x ) ) m o d \u2009 \u2009 g ( x ) = c \u2217 x 6 ( m o d \u2009 \u2009 g ( x ) ) + f ( x ) m o d \u2009 \u2009 g ( x ) \\begin{aligned} c(x) \\mod g(x) &= (c*x^6 + f(x)) \\mod g(x) \\\\ &= c*x^6 (\\mod g(x)) + f(x) \\mod g(x) \\\\ \\end{aligned} c ( x ) mod g ( x ) \u200b = ( c \u2217 x 6 + f ( x )) mod g ( x ) = c \u2217 x 6 ( mod g ( x )) + f ( x ) mod g ( x ) \u200b f(x) \u306f 5\u6b21\u306a\u306e\u3067\u30016\u6b21\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u306f\u81ea\u5206\u81ea\u8eab\u3060\u304b\u3089\u3001 c ( x ) m o d \u2009 \u2009 g ( x ) = ( c 0 \u2217 x 6 m o d \u2009 \u2009 g ( x ) ) + f ( x ) \\begin{aligned} c(x) \\mod g(x) &= (c_0*x^6 \\mod g(x)) + f(x) \\end{aligned} c ( x ) mod g ( x ) \u200b = ( c 0 \u200b \u2217 x 6 mod g ( x )) + f ( x ) \u200b \u3064\u307e\u308a\u30016\u6b21\u306e\u9805\u3092 g(x) \u3067\u5272\u3063\u305f\u4f59\u308a\u306b\u30015\u6b21\u4ee5\u4e0b\u306e\u9805\u3092\u52a0\u3048\u305f\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u8a00\u3048\u3070\u30016 \u884c\u76ee\u306e chk \u306b\u30015\u884c\u76ee\u306e b \u3092 6\u6b21\u306e\u4fc2\u6570\u3068\u3057\u305f\u5f0f\u306e\u5270\u4f59\u3092\u52a0\u3048\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u3002 \u6b21\u306e\u554f\u984c\u306f\u3001 c \u2217 x 6 m o d \u2009 \u2009 g ( x ) c * x^6 \\mod g(x) c \u2217 x 6 mod g ( x ) \u3067\u3059\u3002 c c c \u306f G F ( 32 ) GF(32) GF ( 32 ) \u306e\u8981\u7d20\u306a\u306e\u3067 5\u30d3\u30c3\u30c8\u306e\u30d9\u30af\u30c8\u30eb\u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3053\u306e\u30d9\u30af\u30c8\u30eb\u306e\u6210\u5206\u3092 c = ( c 4 , c 3 , c 2 , c 1 , c 0 ) c = (c_4, c_3, c_2, c_1, c_0) c = ( c 4 \u200b , c 3 \u200b , c 2 \u200b , c 1 \u200b , c 0 \u200b ) \u3068\u3059\u308b\u3068\u3001 c \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( c 4 , c 3 , c 2 , c 1 , c 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( c 4 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , c 3 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , c 2 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , 0 , c 1 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , 0 , 0 , c 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) \\begin{aligned} c * x^6 \\mod g(x) &= & &(&c_4&, &c_3&, &c_2&, &c_1&, &c_0&) * x^6 \\mod g(x) \\\\ &= & &(&c_4&, &0&, &0&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &c_3&, &0&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &c_2&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &0&, &c_1&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &0&, &0&, &c_0&) * x^6 \\mod g(x) \\end{aligned} c \u2217 x 6 mod g ( x ) \u200b = = \u200b + + + + \u200b ( ( ( ( ( ( \u200b c 4 \u200b c 4 \u200b 0 0 0 0 \u200b , , , , , , \u200b c 3 \u200b 0 c 3 \u200b 0 0 0 \u200b , , , , , , \u200b c 2 \u200b 0 0 c 2 \u200b 0 0 \u200b , , , , , , \u200b c 1 \u200b 0 0 0 c 1 \u200b 0 \u200b , , , , , , \u200b c 0 \u200b 0 0 0 0 c 0 \u200b \u200b ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) \u200b c 4 c_4 c 4 \u200b \u306f G F ( 2 ) GF(2) GF ( 2 ) \u306e\u8981\u7d20\u306a\u306e\u3067 0 \u304b 1 \u3067\u3059\u3002 0 \u306e\u5834\u5408\u306f ( 0 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( 0 , 0 , 0 , 0 , 0 ) m o d \u2009 \u2009 g ( x ) = { 0 } \\begin{aligned} (0,0,0,0,0) * x^6 \\mod g(x) &= (0,0,0,0,0) \\mod g(x) \\\\ &= \\{0\\} \\end{aligned} ( 0 , 0 , 0 , 0 , 0 ) \u2217 x 6 mod g ( x ) \u200b = ( 0 , 0 , 0 , 0 , 0 ) mod g ( x ) = { 0 } \u200b 1 \u306e\u5834\u5408\u306f ( 1 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = { 16 } x 6 m o d \u2009 \u2009 g ( x ) = { 16 } \u2217 ( x 6 m o d \u2009 \u2009 g ( x ) ) \\begin{aligned} (1,0,0,0,0) * x^6 \\mod g(x) &= \\{16\\}x^6 \\mod g(x) \\\\ &= \\{16\\} * (x^6 \\mod g(x)) \\end{aligned} ( 1 , 0 , 0 , 0 , 0 ) \u2217 x 6 mod g ( x ) \u200b = { 16 } x 6 mod g ( x ) = { 16 } \u2217 ( x 6 mod g ( x )) \u200b \u3068\u306a\u308a\u307e\u3059\u3002 \u5404\u9805\u3082\u540c\u69d8\u306b\u5c55\u958b\u3067\u304d\u307e\u3059\u3002 k ( x ) = x 6 m o d \u2009 \u2009 g ( x ) k(x) = x^6 \\mod g(x) k ( x ) = x 6 mod g ( x ) \u3068\u304a\u304d\u3001\u4e09\u9805\u6f14\u7b97\u5b50\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u306b\u66f8\u304d\u4e0b\u3059\u3068\u3001 c \u2217 x 6 ( m o d g ( x ) ) = ( ( c 0 = = 0 ) ? 0 : ( 1 \u2217 k ( x ) ) + ( ( c 1 = = 0 ) ? 0 : ( 2 \u2217 k ( x ) ) + ( ( c 2 = = 0 ) ? 0 : ( 4 \u2217 k ( x ) ) + ( ( c 3 = = 0 ) ? 0 : ( 8 \u2217 k ( x ) ) + ( ( c 4 = = 0 ) ? 0 : ( 16 \u2217 k ( x ) ) \\begin{aligned} c * x^6 (mod g(x)) &=& ( (c0==0)?0 : ({1} * k(x)) \\\\ &+& ( (c1==0)?0 : ({2} * k(x)) \\\\ &+& ( (c2==0)?0 : ({4} * k(x)) \\\\ &+& ( (c3==0)?0 : ({8} * k(x)) \\\\ &+& ( (c4==0)?0 : ({16} * k(x)) \\\\ \\end{aligned} c \u2217 x 6 ( m o d g ( x )) \u200b = + + + + \u200b (( c 0 == 0 )? 0 : ( 1 \u2217 k ( x )) (( c 1 == 0 )? 0 : ( 2 \u2217 k ( x )) (( c 2 == 0 )? 0 : ( 4 \u2217 k ( x )) (( c 3 == 0 )? 0 : ( 8 \u2217 k ( x )) (( c 4 == 0 )? 0 : ( 16 \u2217 k ( x )) \u200b \u3068\u66f8\u3051\u307e\u3059\u3002 \u3053\u308c\u304c\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e 1 2 7 for i in range ( 5 ) : 8 chk ^= GEN [ i ] if (( b >> i ) & 1 ) else 0 \u306b\u76f8\u5f53\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059(python \u306f\u4e09\u9805\u6f14\u7b97\u5b50\u7121\u3044\u306e\u3067\u5f8c\u7f6eif\u8868\u8a18)\u3002 \u6b21\u306f GEN \u306e\u4e2d\u8eab\u3092\u5c11\u3057\u898b\u307e\u3059\u3002 \u307e\u305a GEN[0] \u3067\u3059\u304c\u3001\u3053\u308c\u306f 1 \u2217 k ( x ) = k ( x ) {1} * k(x) = k(x) 1 \u2217 k ( x ) = k ( x ) \u3067\u3059\u3002 k ( x ) = x 6 m o d \u2009 \u2009 g ( x ) = x 6 m o d \u2009 \u2009 ( x 6 + { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } ) = { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } \\begin{aligned} k(x) &= x^6 \\mod g(x) \\\\ &= x^6 \\mod (x^6 + \\{29\\}x^5 + \\{22\\}x^4 + \\{20\\}x^3 + \\{21\\}x^2 + \\{29\\}x + \\{18\\}) \\\\ &= \\{29\\}x^5 + \\{22\\}x^4 + \\{20\\}x^3 + \\{21\\}x^2 + \\{29\\}x + \\{18\\} \\end{aligned} k ( x ) \u200b = x 6 mod g ( x ) = x 6 mod ( x 6 + { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 }) = { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } \u200b \u3067\u3059\u3002 \u5404\u4fc2\u6570\u3092 5\u30d3\u30c3\u30c8\u306b\u66f8\u304d\u4e0b\u3057\u3066\u9023\u7d50\u3057\u3001\u305d\u308c\u3092\u4e8c\u9032\u6570\u5024\u3068\u307f\u306a\u3057\u3066\u5341\u516d\u9032\u8868\u8a18\u3059\u308b\u3068\u3001 1 2 3 4 29 22 20 21 29 18 -> 11101 10110 10100 10101 11101 10010 -> 11 1011 0110 1010 0101 0111 1011 0010 -> 3 b 6 a 5 7 b 2 \u3068\u8868\u73fe\u3067\u304d\u307e\u3059\u3002 \u3053\u308c\u306f 1 2 GEN = [ 0 x3b6a57b2 , 0 x26508e6d , 0 x1ea119fa , 0 x3d4233dd , 0 x2a1462b3 ] GEN[0] \u306b\u4e00\u81f4\u3057\u307e\u3057\u305f\u3002 \u540c\u69d8\u306b\u3001 G E N [ 1 ] = 2 \u2217 k ( x ) = 2 \u2217 ( 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 ) = 2 \u2217 29 x 5 + 2 \u2217 22 x 4 + 2 \u2217 20 x 3 + 2 \u2217 21 x 2 + 2 \u2217 29 x + 2 \u2217 18 \\begin{aligned} GEN[1] &=& {2}*k(x) \\\\ &=& {2} * ({29}x^5 + {22}x^4 + {20}x^3 + {21}x^2 + {29}x + {18}) \\\\ &=& {2}*{29} x^5 + {2}*{22} x^4 + {2}*{20} x^3 + {2}*{21} x^2 + {2}*{29} x + {2}*{18} \\\\ \\end{aligned} GEN [ 1 ] \u200b = = = \u200b 2 \u2217 k ( x ) 2 \u2217 ( 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 ) 2 \u2217 29 x 5 + 2 \u2217 22 x 4 + 2 \u2217 20 x 3 + 2 \u2217 21 x 2 + 2 \u2217 29 x + 2 \u2217 18 \u200b GF(32) \u306e\u7a4d\u306f\u6700\u521d\u306e\u65b9\u3067\u898b\u305f\u3088\u3046\u306b\u3001\u591a\u9805\u5f0f\u306e\u7a4d\u3092 a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3067\u5272\u3063\u305f\u4f59\u308a\u3067\u3059\u3002 {2} \u306f\u591a\u9805\u5f0f\u3067\u8868\u3059\u3068\u4e00\u6b21\u306e\u9805\u304c\u3042\u308b\u3060\u3051\u306e x \u3067\u3059\u304b\u3089\u3001\u639b\u3051\u308b\u548c\u306e\u591a\u9805\u5f0f\u30921\u6b21\u4e0a\u3052\u305f\u3060\u3051\u3067\u3059\u3002 \u30d3\u30c3\u30c8\u8868\u73fe\u3060\u3068\u5de6\u30b7\u30d5\u30c8\u3060\u3051\u306a\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u3001 1 2 3 4 5 6 7 8 9 {2}*{29} = {00010}*{11101} = 111010 (mod 101001) = 10011 {2}*{22} = 101100 (mod 101001) = 00101 {2}*{20} = 101000 (mod 101001) = 00001 {2}*{21} = 101010 (mod 101001) = 00011 {2}*{29} = 10011 {2}*{18} = 100100 (mod 101001) = 01101 \u4e26\u3079\u3066\u5341\u516d\u9032\u8868\u8a18\u3059\u308b\u3068\u3001 10 0110 0101 0000 1000 1110 0110 1101 2 6 5 0 8 e 6 d \u3068\u306a\u308a\u3001GEN[1] \u306b\u4e00\u81f4\u3057\u307e\u3057\u305f\u3002 \u4ee5\u4e0b\u540c\u69d8\u306b GEN \u304c\u5c0e\u51fa\u3067\u304d\u307e\u3059\u3002","title":"Bech32 \u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"},{"location":"topics/Blockchain/2019-12-10--bech32/#bech32","text":"2019-12-10 segwit \u30a2\u30c9\u30ec\u30b9\u306a\u3069\u306b\u4f7f\u308f\u308c\u308b BECH32 \u30a8\u30f3\u30b3\u30fc\u30c9\u306f BIP173 \u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u3066\u3001\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u90e8\u5206\u306f python \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u793a\u3055\u308c\u3066\u3044\u307e\u3059: 1 2 3 4 5 6 7 8 9 1 def bech32_polymod ( values ) : 2 GEN = [ 0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3 ] 3 chk = 1 4 for v in values : 5 b = ( chk >> 25 ) 6 chk = ( chk & 0x1ffffff ) << 5 ^ v 7 for i in range ( 5 ) : 8 chk ^= GEN [ i ] if (( b >> i ) & 1 ) else 0 9 return chk \u3053\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f BCH \u7b26\u53f7\u3067\u3042\u308a\u3001\u3053\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6c7a\u3081\u305f\u7406\u7531\u304c\u8272\u3005\u6319\u3052\u3089\u308c\u3066\u3044\u307e\u3059\u3002 bitcoin-core \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 \u306b\u306f\u3082\u3046\u3061\u3087\u3063\u3068\u8a73\u3057\u304f\u30b3\u30e1\u30f3\u30c8\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002 \u3053\u308c\u3092\u624b\u639b\u304b\u308a\u306b\u3082\u3046\u5c11\u3057\u6df1\u304f\u7406\u89e3\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002","title":"BECH32 \u306e\u30c1\u30a7\u30c3\u30af\u30b5\u30e0"},{"location":"topics/Blockchain/2019-12-10--bech32/#gf2-gf32","text":"BCH \u7b26\u53f7\u306f\u6709\u9650\u4f53\u306e\u5270\u4f59\u306b\u306a\u308a\u307e\u3059\u3002\u6709\u9650\u4f53 GF(q) \u306f\u3001\u8981\u7d20\u6570\u304c q \u3067\u8981\u7d20\u9593\u306e\u56db\u5247\u6f14\u7b97\u306e\u7d50\u679c\u3082\u307e\u305f\u305d\u306e\u96c6\u5408\u306e\u8981\u7d20\u306b\u306a\u308b\u3088\u3046\u306a\u96c6\u5408\u3067\u3059\u3002 \u307e\u305a GF(2) \u306f 2\u306e\u5270\u4f59\u4f53\u3067\u8868\u3055\u308c\u307e\u3059\u3002\u6574\u6570\u3092 2 \u3067\u5272\u3063\u305f\u4f59\u308a\u306b\u4e38\u3081\u305f\u3082\u306e\u3067\u3059\u3002 \u305f\u3068\u3048\u3070 1 + 1 = 2 1+1 = 2 1 + 1 = 2 \u3067\u3059\u306e\u3067\u3001\u305d\u308c\u3092 2\u3067\u5272\u3063\u305f\u4f59\u308a\u306e 0 \u304c\u7d50\u679c\u3068\u306a\u308a\u307e\u3059\u3002 \u5dee\u306f\u548c\u306e\u9006\u6f14\u7b97\u3067\u30012 \u306e\u5270\u4f59\u306e\u5270\u4f59\u306e\u5834\u5408\u306f\u548c\u3068\u540c\u3058\u306b\u306a\u308a\u307e\u3059\u3002 \u3055\u3089\u306b 0,1 \u3092\u30d3\u30c3\u30c8\u3068\u307f\u306a\u3059\u3068\u3001\u548c\u3084\u5dee\u306f xor \u3068\u540c\u3058\u6f14\u7b97\u306b\u306a\u308a\u307e\u3059\u3002 \u7d9a\u3044\u3066 GF(32) \u3067\u3059\u304c\u3001\u3053\u308c\u306f\u4fc2\u6570\u304c GF(2) \u306e\u8981\u7d20\u304b\u3089\u306a\u308b\u591a\u9805\u5f0f\u306e\u96c6\u5408\u3092\u30015\u6b21\u306e\u7d20\u306a\u591a\u9805\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u3067\u8868\u305b\u307e\u3059\u3002BECH32 \u3067\u306f a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3092\u7528\u3044\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002 5\u6b21\u306e\u591a\u9805\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u306a\u306e\u3067\u3001\u7d50\u679c\u306f 4\u6b21\u306b\u306a\u308a\u3001\u4fc2\u6570\u306f 5\u3064\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u4fc2\u6570\u3092\u4e26\u3079\u3066\u66f8\u304f\u3068\u3001\u4f8b\u3048\u3070 a 4 + a 3 + a a^4 + a^3 + a a 4 + a 3 + a \u306f 11001 11001 11001 \u3068\u8868\u8a18\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3055\u3089\u306b\u3053\u308c\u3092\u4e8c\u9032\u6570\u8868\u8a18\u3055\u308c\u305f\u6570\u5024\u3068\u307f\u306a\u3057\u3066\u5341\u9032\u6570\u3067\u8868\u3059\u3068\u3001\u3053\u306e\u4f8b\u3067\u306f 25 25 25 \u306b\u306a\u308a\u307e\u3059\u3002bitcoin-core \u3067\u306f\u3053\u308c\u3092\u6574\u6570\u3068\u533a\u5225\u3059\u308b\u305f\u3081\u3001 { 25 } \\{25\\} { 25 } \u3068\u66f8\u3044\u3066\u3044\u307e\u3059\u3002 GF(32) \u306e\u548c\u3068\u7a4d\u3092\u8003\u3048\u307e\u3057\u3087\u3046\u3002 \u5143\u3005\u304c\u591a\u9805\u5f0f\u306e\u4fc2\u6570\u3067\u3042\u308b\u308f\u3051\u3067\u3001\u5404\u30d3\u30c3\u30c8\u306f\u72ec\u7acb\u3057\u3066\u548c\u3092\u53d6\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3055\u3089\u306b\u4fc2\u6570\u306f GF(2) \u306e\u8981\u7d20\u3067\u3059\u304b\u3089\u3001\u548c\u306f xor \u3067\u3059\u3002\u3064\u307e\u308a\u3001GF(32) \u306e\u548c\u306f\u3001\u305d\u306e\u5024\u3092\u30d3\u30c3\u30c8 xor \u3059\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u3002\u30b3\u30e1\u30f3\u30c8\u306b\u3042\u308b\u3088\u3046\u306b\u3001 { 27 } + { 13 } = { 27 x o r 13 } = { 22 } \\{27\\} + \\{13\\} = \\{27 xor 13\\} = \\{22\\} { 27 } + { 13 } = { 27 x or 13 } = { 22 } \u6b21\u306b\u7a4d\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u7d20\u76f4\u306b\u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97\u3057\u3066 a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3067\u5272\u3063\u305f\u4f59\u308a\u3092\u53d6\u308a\u307e\u3059\u3002 { 5 } \u2217 { 26 } = ( a 2 + 1 ) \u2217 ( a 4 + a 3 + a ) = ( a 4 + a 3 + a ) \u2217 a 2 + ( a 4 + a 3 + a ) = a 6 + a 5 + a 4 + a = a 3 + 1 ( m o d a 5 + a 3 + 1 ) = { 9 } \\begin{aligned} \\{5\\} * \\{26\\} &= (a^2 + 1) * (a^4 + a^3 + a) \\\\ &= (a^4 + a^3 + a) * a^2 + (a^4 + a^3 + a) \\\\ &= a^6 + a^5 + a^4 + a \\\\ &= a^3 + 1 (mod a^5 + a^3 + 1)\\\\ &= \\{9\\} \\\\ \\end{aligned} { 5 } \u2217 { 26 } \u200b = ( a 2 + 1 ) \u2217 ( a 4 + a 3 + a ) = ( a 4 + a 3 + a ) \u2217 a 2 + ( a 4 + a 3 + a ) = a 6 + a 5 + a 4 + a = a 3 + 1 ( m o d a 5 + a 3 + 1 ) = { 9 } \u200b","title":"\u6709\u9650\u4f53 GF(2), GF(32)"},{"location":"topics/Blockchain/2019-12-10--bech32/#bch","text":"BCH\u7b26\u53f7\u306f\u6709\u9650\u4f53\u306e\u5270\u4f59\u3067\u3057\u305f\u3002 \u6709\u9650\u4f53\u306e\u5927\u304d\u3055\u3084\u5270\u4f59\u306b\u4f7f\u3046\u591a\u9805\u5f0f(=\u751f\u6210\u591a\u9805\u5f0f)\u306f\u3001\u30a8\u30e9\u30fc\u306e\u767a\u898b\u80fd\u529b\u3067\u5236\u9650\u3055\u308c\u307e\u3059\u3002 BIP173 \u306b\u3042\u308b\u3088\u3046\u306b\u3001BECH32 \u3067\u306f 1023\u6587\u5b57\u4e2d\u306e 3\u3064\u306e\u30a8\u30e9\u30fc\u3092\u767a\u898b\u3059\u308b\u80fd\u529b\u3092\u9078\u3073\u307e\u3057\u305f\u3002 \u3053\u306e\u305f\u3081\u306b\u306f\u6709\u9650\u4f53 G F ( 1024 ) = G F ( 3 2 2 ) GF(1024) = GF(32^2) GF ( 1024 ) = GF ( 3 2 2 ) \u3092\u7528\u3044\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u751f\u6210\u591a\u9805\u5f0f\u306f G F ( 32 ) GF(32) GF ( 32 ) \u3092\u4fc2\u6570\u3068\u3059\u308b 2\u6b21\u306e\u591a\u9805\u5f0f 3\u3064\u306e\u7a4d\u306b\u306a\u308a\u307e\u3059(\u6b63\u3057\u304f\u306f\u3001\u9023\u7d9a\u3059\u308b\u539f\u59cb\u591a\u9805\u5f0f3\u3064\u306e\u6700\u5c0f\u516c\u500d\u6570)\u3002\u3053\u308c\u304c g ( x ) = x 6 + 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 g(x) = x^6 + {29}x^5 + {22}x^4 + {20}x^3 + {21}x^2 + {29}x + {18} g ( x ) = x 6 + 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 \u306b\u306a\u308b\u3088\u3046\u3067\u3059(\u5c0e\u51fa\u65b9\u6cd5\u306f\u5206\u304b\u3089\u306a\u304b\u3063\u305f)\u3002","title":"BCH \u306e\u751f\u6210\u591a\u9805\u5f0f"},{"location":"topics/Blockchain/2019-12-10--bech32/#_1","text":"\u5165\u529b\u30c7\u30fc\u30bf\u3092 G F ( 32 ) GF(32) GF ( 32 ) \u3092\u4fc2\u6570\u3068\u3059\u308b\u591a\u9805\u5f0f\u3068\u307f\u306a\u3057\u3001\u305d\u308c\u3092 g ( x ) g(x) g ( x ) \u3067\u5272\u3063\u305f\u4f59\u308a\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002 5\u30d3\u30c3\u30c8\u306e\u5024\u3092 G F ( 32 ) GF(32) GF ( 32 ) \u306e\u8981\u7d20\u3068\u307f\u306a\u3057\u3066\u53d6\u308a\u6271\u3044\u307e\u3059\u3002 \u591a\u9805\u5f0f\u306e\u9664\u7b97\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u7b46\u7b97\u3092\u60f3\u50cf\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u5206\u304b\u308a\u3084\u3059\u304f\u6574\u6570\u4fc2\u6570\u306e\u591a\u9805\u5f0f\u306e\u9664\u7b97\u3001 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) (12x^3 + 11x^2+7x+5) / (3x+2) ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) \u3092\u8003\u3048\u307e\u3057\u3087\u3046 1 2 3 4 5 6 4x^2 + 1x 3x+2 / 12x^3 + 11x^2 + 7x + 5 -12x^3 + 8x^2 3x^2 + 7x -3x^2 + 2x 5x + 5 \u3068\u7b46\u7b97\u3057\u3066\u3001 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) = 4 x 2 + 1 x \u2026 5 x + 5 (12x^3 + 11x^2 + 7x + 5) / (3x + 2) = 4x^2 + 1x \\ldots 5x+5 ( 12 x 3 + 11 x 2 + 7 x + 5 ) / ( 3 x + 2 ) = 4 x 2 + 1 x \u2026 5 x + 5 \u3068\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002 \u7b46\u7b97\u306e\u8a08\u7b97\u306f\u3001 \u9664\u6570\u306e\u9805\u6570\u3068\u540c\u3058\u3060\u3051\u88ab\u9664\u6570\u306e\u4e0a\u304b\u3089\u53d6\u308a\u51fa\u3057\u3066\u9664\u7b97 ( ( 12 x 3 + 11 x 2 ) / ( 3 x + 2 ) = 4 x 2 \u2026 3 x 2 (12x^3 + 11x^2) / (3x+2) = 4x^2 \\ldots 3x^2 ( 12 x 3 + 11 x 2 ) / ( 3 x + 2 ) = 4 x 2 \u2026 3 x 2 ) \u3057\u3001 \u305d\u306e\u4f59\u308a\u306b\u88ab\u9664\u6570\u306e\u6b21\u306e\u6841\u3092\u8ffd\u52a0( 3 x 2 + 7 x 3x^2 + 7x 3 x 2 + 7 x )\u3057\u3066\u9664\u7b97\u3057\u2026 \u3068\u7e70\u308a\u8fd4\u3059\u5f62\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 GF(32) \u4fc2\u6570\u591a\u9805\u5f0f\u306e\u4f59\u308a\u3082\u540c\u69d8\u306b\u8a08\u7b97\u3067\u304d\u307e\u3059(\u9014\u4e2d\u3067\u51fa\u3066\u304f\u308b\u639b\u3051\u7b97\u3068\u5f15\u304d\u7b97\u306f GF(32) \u3067\u884c\u3044\u307e\u3059) \u3053\u308c\u3092\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3078\u843d\u3068\u3059\u3068\u3001\u4e00\u6841\u305a\u3064\u53d6\u308a\u51fa\u3057\u3066\u4e2d\u9593\u7d50\u679c\u306b\u8ffd\u8a18\u3059\u308b\u30eb\u30fc\u30d7\u306b\u306a\u308a\u307e\u3059\u3002 \u8ffd\u8a18\u51e6\u7406\u306f\u6841\u3092\u305a\u3089\u3057\u3066\u304b\u3089\u52a0\u7b97\u3059\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u30b7\u30d5\u30c8\u3057\u3066\u304b\u3089 xor \u3067\u3044\u3051\u307e\u3059\u3002 1 2 3 4 3 chk = 1 4 for v in val ues : 5 b = ( chk >> 25 ) 6 chk = ( chk & 0 x1ffffff ) << 5 ^ v chk \u306f\u9664\u7b97\u306e\u4e2d\u9593\u591a\u9805\u5f0f\u3067\u3059\u3002 \u591a\u9805\u5f0f\u306e\u4fc2\u6570\u306f GF(32) \u6570\u3067\u3001GF(32) \u6570\u306f 5bit \u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002 \u3088\u3063\u3066\u3001\u5404\u4fc2\u6570\u3092\u4e8c\u9032\u6570\u8868\u8a18\u3067\u305a\u3089\u3063\u3068\u4e26\u3079\u3066\u9023\u7d50\u3057\u305f\u6570\u5b57\u4f8b\u3092\u591a\u9805\u5f0f\u306e\u4fc2\u6570\u30ea\u30b9\u30c8\u3068\u307f\u306a\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u8a08\u7b97\u306e\u90fd\u5408\u4e0a\u3001\u4f4e\u4f4d\u30d3\u30c3\u30c8\u304c\u6b21\u6570\u306e\u9ad8\u3044\u9805\u306e\u4fc2\u6570\u306b\u306a\u308b\u3088\u3046\u306a\u4e26\u3073\u65b9\u306b\u306a\u308a\u307e\u3059\u3002 3\u884c\u76ee\u306e\u521d\u671f\u5024\u306e 1 \u306f\u3001\u5165\u529b\u591a\u9805\u5f0f\u306e\u6700\u5927\u9805\u306e\u4fc2\u6570\u3092 1 \u306b\u3059\u308b\u305f\u3081\u306e\u30c8\u30ea\u30c3\u30af\u3067\u3059\u3002 \u3053\u308c\u304c\u7121\u3044\u3068\u3001\u4f8b\u3048\u3070 101... \u3068 0101... \u306e\u533a\u5225\u304c\u3064\u304b\u306a\u304f\u306a\u308a\u307e\u3059\u3002 \u3055\u3066\u30016\u884c\u76ee\u3067\u306f\u307e\u305a chk \u306e\u4e0b\u4f4d25 \u30d3\u30c3\u30c8\u3092\u53d6\u308a\u51fa\u3057\u3066\u3044\u307e\u3059\u3002 \u4e0b\u4f4d25\u30d3\u30c3\u30c8\u3092\u53d6\u308a\u51fa\u3059\u3068\u3044\u3046\u306e\u306f\u3064\u307e\u308a\u3001\u5165\u529b\u591a\u9805\u5f0f\u306e\u6b21\u6570\u4e0a\u4f4d5\u9805\u306e\u4fc2\u6570\u3092\u53d6\u308a\u51fa\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002 \u3055\u3089\u306b 5\u30d3\u30c3\u30c8\u5de6\u30b7\u30d5\u30c8\u3057\u3066\u304b\u3089 v \u3092 xor \u3057\u3066\u3044\u307e\u3059\u3002 v \u3082 GF(32) \u6570\u306a\u306e\u3067 5\u30d3\u30c3\u30c8\u3067\u8868\u3055\u308c\u307e\u3059\u3002\u5de6\u30b7\u30d5\u30c8\u3057\u3066 00000 \u306b\u306a\u3063\u305f\u4e0b\u4f4d 5\u30d3\u30c3\u30c8\u90e8\u5206\u306b xor \u3059\u308b\u306e\u306f\u3001\u52a0\u7b97\u3068\u540c\u3058\u3067\u3059\u3002 \u3053\u308c\u306f\u7b46\u7b97\u51e6\u7406\u306b\u304a\u3051\u308b\u524d\u6bb5\u968e\u306e\u4f59\u308a\u306b\u88ab\u9664\u6570\u306e\u6b21\u9805\u3092\u52a0\u3048\u308b\u51e6\u7406\u306b\u76f8\u5f53\u3057\u3066\u3044\u307e\u3059\u3002 \u6b21\u306b\u5404\u6bb5\u968e\u306b\u304a\u3051\u308b\u9664\u7b97\u3092\u8003\u3048\u307e\u3059\u3002 f ( x ) f(x) f ( x ) \u3092 5\u6b21\u591a\u9805\u5f0f\u3068\u3057\u3066\u88ab\u9664\u6570 c ( x ) = c \u2217 x 6 + f ( x ) c(x) = c*x^6 + f(x) c ( x ) = c \u2217 x 6 + f ( x ) \u3068\u7f6e\u304d\u30016\u6b21\u591a\u9805\u5f0f g ( x ) g(x) g ( x ) \u3067\u306e\u4f59\u308a\u3092\u8a08\u7b97\u3059\u308b\u3068\u3001 c ( x ) m o d \u2009 \u2009 g ( x ) = ( c \u2217 x 6 + f ( x ) ) m o d \u2009 \u2009 g ( x ) = c \u2217 x 6 ( m o d \u2009 \u2009 g ( x ) ) + f ( x ) m o d \u2009 \u2009 g ( x ) \\begin{aligned} c(x) \\mod g(x) &= (c*x^6 + f(x)) \\mod g(x) \\\\ &= c*x^6 (\\mod g(x)) + f(x) \\mod g(x) \\\\ \\end{aligned} c ( x ) mod g ( x ) \u200b = ( c \u2217 x 6 + f ( x )) mod g ( x ) = c \u2217 x 6 ( mod g ( x )) + f ( x ) mod g ( x ) \u200b f(x) \u306f 5\u6b21\u306a\u306e\u3067\u30016\u6b21\u5f0f\u3067\u5272\u3063\u305f\u4f59\u308a\u306f\u81ea\u5206\u81ea\u8eab\u3060\u304b\u3089\u3001 c ( x ) m o d \u2009 \u2009 g ( x ) = ( c 0 \u2217 x 6 m o d \u2009 \u2009 g ( x ) ) + f ( x ) \\begin{aligned} c(x) \\mod g(x) &= (c_0*x^6 \\mod g(x)) + f(x) \\end{aligned} c ( x ) mod g ( x ) \u200b = ( c 0 \u200b \u2217 x 6 mod g ( x )) + f ( x ) \u200b \u3064\u307e\u308a\u30016\u6b21\u306e\u9805\u3092 g(x) \u3067\u5272\u3063\u305f\u4f59\u308a\u306b\u30015\u6b21\u4ee5\u4e0b\u306e\u9805\u3092\u52a0\u3048\u305f\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u8a00\u3048\u3070\u30016 \u884c\u76ee\u306e chk \u306b\u30015\u884c\u76ee\u306e b \u3092 6\u6b21\u306e\u4fc2\u6570\u3068\u3057\u305f\u5f0f\u306e\u5270\u4f59\u3092\u52a0\u3048\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u3002 \u6b21\u306e\u554f\u984c\u306f\u3001 c \u2217 x 6 m o d \u2009 \u2009 g ( x ) c * x^6 \\mod g(x) c \u2217 x 6 mod g ( x ) \u3067\u3059\u3002 c c c \u306f G F ( 32 ) GF(32) GF ( 32 ) \u306e\u8981\u7d20\u306a\u306e\u3067 5\u30d3\u30c3\u30c8\u306e\u30d9\u30af\u30c8\u30eb\u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u3053\u306e\u30d9\u30af\u30c8\u30eb\u306e\u6210\u5206\u3092 c = ( c 4 , c 3 , c 2 , c 1 , c 0 ) c = (c_4, c_3, c_2, c_1, c_0) c = ( c 4 \u200b , c 3 \u200b , c 2 \u200b , c 1 \u200b , c 0 \u200b ) \u3068\u3059\u308b\u3068\u3001 c \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( c 4 , c 3 , c 2 , c 1 , c 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( c 4 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , c 3 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , c 2 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , 0 , c 1 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) + ( 0 , 0 , 0 , 0 , c 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) \\begin{aligned} c * x^6 \\mod g(x) &= & &(&c_4&, &c_3&, &c_2&, &c_1&, &c_0&) * x^6 \\mod g(x) \\\\ &= & &(&c_4&, &0&, &0&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &c_3&, &0&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &c_2&, &0&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &0&, &c_1&, &0&) * x^6 \\mod g(x) \\\\ & & + &( &0&, &0&, &0&, &0&, &c_0&) * x^6 \\mod g(x) \\end{aligned} c \u2217 x 6 mod g ( x ) \u200b = = \u200b + + + + \u200b ( ( ( ( ( ( \u200b c 4 \u200b c 4 \u200b 0 0 0 0 \u200b , , , , , , \u200b c 3 \u200b 0 c 3 \u200b 0 0 0 \u200b , , , , , , \u200b c 2 \u200b 0 0 c 2 \u200b 0 0 \u200b , , , , , , \u200b c 1 \u200b 0 0 0 c 1 \u200b 0 \u200b , , , , , , \u200b c 0 \u200b 0 0 0 0 c 0 \u200b \u200b ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) ) \u2217 x 6 mod g ( x ) \u200b c 4 c_4 c 4 \u200b \u306f G F ( 2 ) GF(2) GF ( 2 ) \u306e\u8981\u7d20\u306a\u306e\u3067 0 \u304b 1 \u3067\u3059\u3002 0 \u306e\u5834\u5408\u306f ( 0 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = ( 0 , 0 , 0 , 0 , 0 ) m o d \u2009 \u2009 g ( x ) = { 0 } \\begin{aligned} (0,0,0,0,0) * x^6 \\mod g(x) &= (0,0,0,0,0) \\mod g(x) \\\\ &= \\{0\\} \\end{aligned} ( 0 , 0 , 0 , 0 , 0 ) \u2217 x 6 mod g ( x ) \u200b = ( 0 , 0 , 0 , 0 , 0 ) mod g ( x ) = { 0 } \u200b 1 \u306e\u5834\u5408\u306f ( 1 , 0 , 0 , 0 , 0 ) \u2217 x 6 m o d \u2009 \u2009 g ( x ) = { 16 } x 6 m o d \u2009 \u2009 g ( x ) = { 16 } \u2217 ( x 6 m o d \u2009 \u2009 g ( x ) ) \\begin{aligned} (1,0,0,0,0) * x^6 \\mod g(x) &= \\{16\\}x^6 \\mod g(x) \\\\ &= \\{16\\} * (x^6 \\mod g(x)) \\end{aligned} ( 1 , 0 , 0 , 0 , 0 ) \u2217 x 6 mod g ( x ) \u200b = { 16 } x 6 mod g ( x ) = { 16 } \u2217 ( x 6 mod g ( x )) \u200b \u3068\u306a\u308a\u307e\u3059\u3002 \u5404\u9805\u3082\u540c\u69d8\u306b\u5c55\u958b\u3067\u304d\u307e\u3059\u3002 k ( x ) = x 6 m o d \u2009 \u2009 g ( x ) k(x) = x^6 \\mod g(x) k ( x ) = x 6 mod g ( x ) \u3068\u304a\u304d\u3001\u4e09\u9805\u6f14\u7b97\u5b50\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u306b\u66f8\u304d\u4e0b\u3059\u3068\u3001 c \u2217 x 6 ( m o d g ( x ) ) = ( ( c 0 = = 0 ) ? 0 : ( 1 \u2217 k ( x ) ) + ( ( c 1 = = 0 ) ? 0 : ( 2 \u2217 k ( x ) ) + ( ( c 2 = = 0 ) ? 0 : ( 4 \u2217 k ( x ) ) + ( ( c 3 = = 0 ) ? 0 : ( 8 \u2217 k ( x ) ) + ( ( c 4 = = 0 ) ? 0 : ( 16 \u2217 k ( x ) ) \\begin{aligned} c * x^6 (mod g(x)) &=& ( (c0==0)?0 : ({1} * k(x)) \\\\ &+& ( (c1==0)?0 : ({2} * k(x)) \\\\ &+& ( (c2==0)?0 : ({4} * k(x)) \\\\ &+& ( (c3==0)?0 : ({8} * k(x)) \\\\ &+& ( (c4==0)?0 : ({16} * k(x)) \\\\ \\end{aligned} c \u2217 x 6 ( m o d g ( x )) \u200b = + + + + \u200b (( c 0 == 0 )? 0 : ( 1 \u2217 k ( x )) (( c 1 == 0 )? 0 : ( 2 \u2217 k ( x )) (( c 2 == 0 )? 0 : ( 4 \u2217 k ( x )) (( c 3 == 0 )? 0 : ( 8 \u2217 k ( x )) (( c 4 == 0 )? 0 : ( 16 \u2217 k ( x )) \u200b \u3068\u66f8\u3051\u307e\u3059\u3002 \u3053\u308c\u304c\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e 1 2 7 for i in range ( 5 ) : 8 chk ^= GEN [ i ] if (( b >> i ) & 1 ) else 0 \u306b\u76f8\u5f53\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059(python \u306f\u4e09\u9805\u6f14\u7b97\u5b50\u7121\u3044\u306e\u3067\u5f8c\u7f6eif\u8868\u8a18)\u3002 \u6b21\u306f GEN \u306e\u4e2d\u8eab\u3092\u5c11\u3057\u898b\u307e\u3059\u3002 \u307e\u305a GEN[0] \u3067\u3059\u304c\u3001\u3053\u308c\u306f 1 \u2217 k ( x ) = k ( x ) {1} * k(x) = k(x) 1 \u2217 k ( x ) = k ( x ) \u3067\u3059\u3002 k ( x ) = x 6 m o d \u2009 \u2009 g ( x ) = x 6 m o d \u2009 \u2009 ( x 6 + { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } ) = { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } \\begin{aligned} k(x) &= x^6 \\mod g(x) \\\\ &= x^6 \\mod (x^6 + \\{29\\}x^5 + \\{22\\}x^4 + \\{20\\}x^3 + \\{21\\}x^2 + \\{29\\}x + \\{18\\}) \\\\ &= \\{29\\}x^5 + \\{22\\}x^4 + \\{20\\}x^3 + \\{21\\}x^2 + \\{29\\}x + \\{18\\} \\end{aligned} k ( x ) \u200b = x 6 mod g ( x ) = x 6 mod ( x 6 + { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 }) = { 29 } x 5 + { 22 } x 4 + { 20 } x 3 + { 21 } x 2 + { 29 } x + { 18 } \u200b \u3067\u3059\u3002 \u5404\u4fc2\u6570\u3092 5\u30d3\u30c3\u30c8\u306b\u66f8\u304d\u4e0b\u3057\u3066\u9023\u7d50\u3057\u3001\u305d\u308c\u3092\u4e8c\u9032\u6570\u5024\u3068\u307f\u306a\u3057\u3066\u5341\u516d\u9032\u8868\u8a18\u3059\u308b\u3068\u3001 1 2 3 4 29 22 20 21 29 18 -> 11101 10110 10100 10101 11101 10010 -> 11 1011 0110 1010 0101 0111 1011 0010 -> 3 b 6 a 5 7 b 2 \u3068\u8868\u73fe\u3067\u304d\u307e\u3059\u3002 \u3053\u308c\u306f 1 2 GEN = [ 0 x3b6a57b2 , 0 x26508e6d , 0 x1ea119fa , 0 x3d4233dd , 0 x2a1462b3 ] GEN[0] \u306b\u4e00\u81f4\u3057\u307e\u3057\u305f\u3002 \u540c\u69d8\u306b\u3001 G E N [ 1 ] = 2 \u2217 k ( x ) = 2 \u2217 ( 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 ) = 2 \u2217 29 x 5 + 2 \u2217 22 x 4 + 2 \u2217 20 x 3 + 2 \u2217 21 x 2 + 2 \u2217 29 x + 2 \u2217 18 \\begin{aligned} GEN[1] &=& {2}*k(x) \\\\ &=& {2} * ({29}x^5 + {22}x^4 + {20}x^3 + {21}x^2 + {29}x + {18}) \\\\ &=& {2}*{29} x^5 + {2}*{22} x^4 + {2}*{20} x^3 + {2}*{21} x^2 + {2}*{29} x + {2}*{18} \\\\ \\end{aligned} GEN [ 1 ] \u200b = = = \u200b 2 \u2217 k ( x ) 2 \u2217 ( 29 x 5 + 22 x 4 + 20 x 3 + 21 x 2 + 29 x + 18 ) 2 \u2217 29 x 5 + 2 \u2217 22 x 4 + 2 \u2217 20 x 3 + 2 \u2217 21 x 2 + 2 \u2217 29 x + 2 \u2217 18 \u200b GF(32) \u306e\u7a4d\u306f\u6700\u521d\u306e\u65b9\u3067\u898b\u305f\u3088\u3046\u306b\u3001\u591a\u9805\u5f0f\u306e\u7a4d\u3092 a 5 + a 3 + 1 a^5 + a^3 + 1 a 5 + a 3 + 1 \u3067\u5272\u3063\u305f\u4f59\u308a\u3067\u3059\u3002 {2} \u306f\u591a\u9805\u5f0f\u3067\u8868\u3059\u3068\u4e00\u6b21\u306e\u9805\u304c\u3042\u308b\u3060\u3051\u306e x \u3067\u3059\u304b\u3089\u3001\u639b\u3051\u308b\u548c\u306e\u591a\u9805\u5f0f\u30921\u6b21\u4e0a\u3052\u305f\u3060\u3051\u3067\u3059\u3002 \u30d3\u30c3\u30c8\u8868\u73fe\u3060\u3068\u5de6\u30b7\u30d5\u30c8\u3060\u3051\u306a\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u3001 1 2 3 4 5 6 7 8 9 {2}*{29} = {00010}*{11101} = 111010 (mod 101001) = 10011 {2}*{22} = 101100 (mod 101001) = 00101 {2}*{20} = 101000 (mod 101001) = 00001 {2}*{21} = 101010 (mod 101001) = 00011 {2}*{29} = 10011 {2}*{18} = 100100 (mod 101001) = 01101 \u4e26\u3079\u3066\u5341\u516d\u9032\u8868\u8a18\u3059\u308b\u3068\u3001 10 0110 0101 0000 1000 1110 0110 1101 2 6 5 0 8 e 6 d \u3068\u306a\u308a\u3001GEN[1] \u306b\u4e00\u81f4\u3057\u307e\u3057\u305f\u3002 \u4ee5\u4e0b\u540c\u69d8\u306b GEN \u304c\u5c0e\u51fa\u3067\u304d\u307e\u3059\u3002","title":"\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/","tags":["Tech","Blockchain"],"text":"\u79d8\u533f\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8 2022-09-17 \u4e00\u822c\u7684\u306b\u30d1\u30d6\u30ea\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304f\u3068\u8ab0\u3067\u3082\u898b\u308c\u3066\u3057\u307e\u3046\u3002 \u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u30d9\u30fc\u30b9\u3067\u9375\u3092\u639b\u3051\u3066\u3082\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u898b\u308b\u3068\u30d0\u30ec\u308b\u3002 \u4e00\u65b9\u3001\u60c5\u5831\u3092\u79d8\u533f\u3057\u305f\u3044\u30b1\u30fc\u30b9\u306f\u8272\u3005\u3042\u308b\u3002 \u500b\u4eba\u60c5\u5831 \u55b6\u696d\u79d8\u5bc6 \u30d5\u30ed\u30f3\u30c8\u30e9\u30f3\u30cb\u30f3\u30b0\u5bfe\u7b56 \u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30c7\u30fc\u30bf\u3092\u79d8\u533f\u3067\u304d\u308b\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u6280\u8853\u306b\u3064\u3044\u3066\u8abf\u3079\u308b\u3002 \u306a\u304a\u3001\u8abf\u67fb\u306f2022\u5e746\u6708\u6642\u70b9\u306e\u3082\u306e\u3002 \u30c1\u30a7\u30fc\u30f3 HyperLedger Fabric Channel \u6a5f\u80fd \u30c1\u30e3\u30f3\u30cd\u30eb\u6bce\u306e\u500b\u5225\u306e\u53f0\u5e33\u3002 \u53c2\u52a0\u3057\u3066\u308b\u7d44\u7e54\u4ee5\u5916\u304b\u3089\u306f\u898b\u3048\u306a\u3044\u3002 Private Data \u6a5f\u80fd \u53f0\u5e33\u5916\u306e DB \u306b\u4fdd\u5b58\u3057\u3001Peer \u540c\u58eb\u3067\u76f4\u63a5\u4ea4\u63db\u3059\u308b\u3002 \u53f0\u5e33\u306b\u306f Private Data \u306e Hash \u304c\u683c\u7d0d\u3055\u308c\u308b\u3002 Private Chaincode \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304a\u3088\u3073\u30c7\u30fc\u30bf\u3092\u6697\u53f7\u5316\u3057\u305f\u72b6\u614b\u3067\u5b9f\u884c\u3059\u308b\u3002 \u307e\u3060\u672c\u4f53\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002 Trusted Execution Environment(TEE) \u3092\u5229\u7528\u3002intel cpu \u306a\u3089 SGX. C/C++ \u3067\u8a18\u8ff0\u3002 \u8a08\u7b97\u306f\u79d8\u5bc6\u306b\u3067\u304d\u3066\u3082\u3001\u7d50\u679c\u3092\u4fdd\u5b58\u3059\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u79d8\u5bc6\u306b\u306a\u3089\u3093\u3088\u3046\u306a\u3002 \u305d\u308c\u3082\u6697\u53f7\u5316\u3057\u305f\u7d50\u679c\u3092\u4fdd\u5b58\u3059\u308b\u306e\u304b\u306a\u3002 ZeroChain LaynerX \u306e\u4eba\u304c\u958b\u767a\u3057\u305f\u3084\u3064\u3002 \u30a2\u30ab\u30a6\u30f3\u30c8\u578b\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3078\u9069\u7528\u3068\u306e\u3053\u3068\u3060\u304c\u3001\u6b8b\u9ad8\u8a08\u7b97\u3060\u3051\u3067\u30b9\u30de\u30b3\u30f3\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002 2019\u5e74\u304b\u3089\u66f4\u65b0\u3055\u308c\u3066\u306a\u3044\u3084\u3002 Secret Network (SCRT) https://scrt.network https://github.com/scrtlabs/SecretNetwork 387star. Rust. 2016\u5e74\u958b\u59cb\u30012020\u5e74\u30ed\u30fc\u30f3\u30c1\u3002 Cosmos \u3067\u52d5\u304f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u3002 \u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u306f TEE \u5185\u3067\u5b9f\u884c\u3001\u6697\u53f7\u5316\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u683c\u7d0d\u3002 \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u30b9\u30de\u30b3\u30f3\u5185\u3067\u3084\u308b\u3002 msg \u306e\u7f72\u540d\u3067\u8a8d\u8a3c\u3002 query \u306e\u5834\u5408\u306f msg \u304c\u7121\u3044\u306e\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u7f72\u540d\u306a\u308a\u53d7\u3051\u3068\u308b\u3002 Oasis Network (ROSE) https://oasisprotocol.org/ https://github.com/oasisprotocol/oasis-core 254star. Golang. a16z. 1000tps \u306e\u30b3\u30f3\u30bb\u30f3\u30b5\u30b9\u62c5\u5f53\u306e Layer1 \u3068\u3001\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u3092\u52d5\u304b\u3059 2nd\u30ec\u30a4\u30e4\u30fc(ParaTime \u3068\u3044\u3046) \u6697\u53f7\u5316\u3057\u305f\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u79d8\u5bc6\u9375\u30d9\u30fc\u30b9\u3067\u6a29\u9650\u7ba1\u7406\u3067\u304d\u308b\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u307d\u3044\u3084\u3064\u3002 \u79d8\u533f\u30b9\u30de\u30b3\u30f3\u3082\u958b\u767a\u4e2d\u3060\u3051\u3069\u307e\u3060\u3002 2022-09 \u8ffd\u8a18: \u6700\u8fd1\u65e5\u672c\u306e\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u30b2\u30fc\u30e0\u3067\u3088\u304f\u63a1\u7528\u3055\u308c\u3066\u308b\u3002\u79d8\u533f\u3088\u308a\u901f\u5ea6\u76ee\u5f53\u3066\u307d\u3044\u304c\u3002 Aleo https://www.aleo.org/ https://github.com/AleoHQ/aleo 99Star. Rust. a16z. \u30bd\u30d5\u30c8\u30d0\u30f3\u30af\u3002 \u72ec\u81ea\u30c1\u30a7\u30fc\u30f3\u306b\u72ec\u81ea\u8a00\u8a9e\u3002 \u7aef\u672b\u4e0a\u306b\u30c7\u30fc\u30bf\u3092\u7f6e\u304d\u3001\u30bc\u30ed\u77e5\u8b58\u8a3c\u660e\u3067\u30c1\u30a7\u30fc\u30f3\u306b\u8f09\u305b\u308b\u3089\u3057\u3044\u3002 \u306a\u3093\u304b\u8a08\u7b97\u3059\u308b\u3060\u3051\u3067\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3068\u304b\u306f\u7bc4\u56f2\u5916\u306e\u3088\u3046\u306a? Phala Network (PHA) https://www.phala.network/ https://github.com/Phala-Network 273star, Rust. Web3 Foundation. TEE \u306e p2p computing. Kusama \u4e0a\u3067\u7a3c\u52d5\u4e2d\u3002 Kusama \u306f Polkadot \u306e\u5b9f\u9a13\u30c1\u30a7\u30fc\u30f3\u3060\u304c\u3001\u7121\u304f\u306a\u3063\u305f\u308a\u306f\u3057\u306a\u3044\u3088\u3046\u3060\u3002 Automata Network (ATA) https://ata.network https://github.com/automata-network 80star, Rust. Ethereum \u306e Layer2. 2021\u5e7411\u6708\u7a3c\u52d5\u3002 Avalanche, Polygon \u306e\u5354\u529b\u3067\u958b\u767a\u3002 \"Privacy middleware for dApps on Web3\" \u30de\u30eb\u30c1\u30c1\u30a7\u30fc\u30f3\u3067\u4f7f\u3048\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u63d0\u4f9b\u3059\u308b\u611f\u3058\u3002 \u305f\u3076\u3093\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306f\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u304b\u3089\u547c\u3079\u308b\u306e\u3060\u308d\u3046\u3002\u3082\u3057\u304f\u306f Web \u30b5\u30fc\u30d3\u30b9\u304b\u3089? \u4f55\u306b\u305b\u3088\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u5145\u5b9f\u304c\u5fc5\u8981\u3060\u304c\u3001\u307e\u3060\u307e\u3060\u958b\u767a\u4e2d\u3002 Horizen https://horizen.io ZK-snarks. Dero https://dero.io \u6e96\u540c\u578b \u8ffd\u8a18 \u307e\u3068\u3081\u8a18\u4e8b\u767a\u898b\u3002 \u3053\u306e\u8a18\u4e8b\u306b\u306f\u672a\u53cd\u6620\u3002 https://medium.com/hashkey-group/privacy-networks-the-future-of-smart-contract-platforms-315d9fdf7cef","title":"\u79d8\u533f\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#_1","text":"2022-09-17 \u4e00\u822c\u7684\u306b\u30d1\u30d6\u30ea\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304f\u3068\u8ab0\u3067\u3082\u898b\u308c\u3066\u3057\u307e\u3046\u3002 \u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u30d9\u30fc\u30b9\u3067\u9375\u3092\u639b\u3051\u3066\u3082\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u898b\u308b\u3068\u30d0\u30ec\u308b\u3002 \u4e00\u65b9\u3001\u60c5\u5831\u3092\u79d8\u533f\u3057\u305f\u3044\u30b1\u30fc\u30b9\u306f\u8272\u3005\u3042\u308b\u3002 \u500b\u4eba\u60c5\u5831 \u55b6\u696d\u79d8\u5bc6 \u30d5\u30ed\u30f3\u30c8\u30e9\u30f3\u30cb\u30f3\u30b0\u5bfe\u7b56 \u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30c7\u30fc\u30bf\u3092\u79d8\u533f\u3067\u304d\u308b\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u6280\u8853\u306b\u3064\u3044\u3066\u8abf\u3079\u308b\u3002 \u306a\u304a\u3001\u8abf\u67fb\u306f2022\u5e746\u6708\u6642\u70b9\u306e\u3082\u306e\u3002","title":"\u79d8\u533f\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#_2","text":"","title":"\u30c1\u30a7\u30fc\u30f3"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#hyperledger-fabric","text":"Channel \u6a5f\u80fd \u30c1\u30e3\u30f3\u30cd\u30eb\u6bce\u306e\u500b\u5225\u306e\u53f0\u5e33\u3002 \u53c2\u52a0\u3057\u3066\u308b\u7d44\u7e54\u4ee5\u5916\u304b\u3089\u306f\u898b\u3048\u306a\u3044\u3002 Private Data \u6a5f\u80fd \u53f0\u5e33\u5916\u306e DB \u306b\u4fdd\u5b58\u3057\u3001Peer \u540c\u58eb\u3067\u76f4\u63a5\u4ea4\u63db\u3059\u308b\u3002 \u53f0\u5e33\u306b\u306f Private Data \u306e Hash \u304c\u683c\u7d0d\u3055\u308c\u308b\u3002 Private Chaincode \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304a\u3088\u3073\u30c7\u30fc\u30bf\u3092\u6697\u53f7\u5316\u3057\u305f\u72b6\u614b\u3067\u5b9f\u884c\u3059\u308b\u3002 \u307e\u3060\u672c\u4f53\u306b\u53d6\u308a\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002 Trusted Execution Environment(TEE) \u3092\u5229\u7528\u3002intel cpu \u306a\u3089 SGX. C/C++ \u3067\u8a18\u8ff0\u3002 \u8a08\u7b97\u306f\u79d8\u5bc6\u306b\u3067\u304d\u3066\u3082\u3001\u7d50\u679c\u3092\u4fdd\u5b58\u3059\u308b\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u79d8\u5bc6\u306b\u306a\u3089\u3093\u3088\u3046\u306a\u3002 \u305d\u308c\u3082\u6697\u53f7\u5316\u3057\u305f\u7d50\u679c\u3092\u4fdd\u5b58\u3059\u308b\u306e\u304b\u306a\u3002","title":"HyperLedger Fabric"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#zerochain","text":"LaynerX \u306e\u4eba\u304c\u958b\u767a\u3057\u305f\u3084\u3064\u3002 \u30a2\u30ab\u30a6\u30f3\u30c8\u578b\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3078\u9069\u7528\u3068\u306e\u3053\u3068\u3060\u304c\u3001\u6b8b\u9ad8\u8a08\u7b97\u3060\u3051\u3067\u30b9\u30de\u30b3\u30f3\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002 2019\u5e74\u304b\u3089\u66f4\u65b0\u3055\u308c\u3066\u306a\u3044\u3084\u3002","title":"ZeroChain"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#secret-network-scrt","text":"https://scrt.network https://github.com/scrtlabs/SecretNetwork 387star. Rust. 2016\u5e74\u958b\u59cb\u30012020\u5e74\u30ed\u30fc\u30f3\u30c1\u3002 Cosmos \u3067\u52d5\u304f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u3002 \u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u306f TEE \u5185\u3067\u5b9f\u884c\u3001\u6697\u53f7\u5316\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u683c\u7d0d\u3002 \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u30b9\u30de\u30b3\u30f3\u5185\u3067\u3084\u308b\u3002 msg \u306e\u7f72\u540d\u3067\u8a8d\u8a3c\u3002 query \u306e\u5834\u5408\u306f msg \u304c\u7121\u3044\u306e\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u7f72\u540d\u306a\u308a\u53d7\u3051\u3068\u308b\u3002","title":"Secret Network (SCRT)"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#oasis-network-rose","text":"https://oasisprotocol.org/ https://github.com/oasisprotocol/oasis-core 254star. Golang. a16z. 1000tps \u306e\u30b3\u30f3\u30bb\u30f3\u30b5\u30b9\u62c5\u5f53\u306e Layer1 \u3068\u3001\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u3092\u52d5\u304b\u3059 2nd\u30ec\u30a4\u30e4\u30fc(ParaTime \u3068\u3044\u3046) \u6697\u53f7\u5316\u3057\u305f\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u79d8\u5bc6\u9375\u30d9\u30fc\u30b9\u3067\u6a29\u9650\u7ba1\u7406\u3067\u304d\u308b\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u307d\u3044\u3084\u3064\u3002 \u79d8\u533f\u30b9\u30de\u30b3\u30f3\u3082\u958b\u767a\u4e2d\u3060\u3051\u3069\u307e\u3060\u3002 2022-09 \u8ffd\u8a18: \u6700\u8fd1\u65e5\u672c\u306e\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u30b2\u30fc\u30e0\u3067\u3088\u304f\u63a1\u7528\u3055\u308c\u3066\u308b\u3002\u79d8\u533f\u3088\u308a\u901f\u5ea6\u76ee\u5f53\u3066\u307d\u3044\u304c\u3002","title":"Oasis Network (ROSE)"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#aleo","text":"https://www.aleo.org/ https://github.com/AleoHQ/aleo 99Star. Rust. a16z. \u30bd\u30d5\u30c8\u30d0\u30f3\u30af\u3002 \u72ec\u81ea\u30c1\u30a7\u30fc\u30f3\u306b\u72ec\u81ea\u8a00\u8a9e\u3002 \u7aef\u672b\u4e0a\u306b\u30c7\u30fc\u30bf\u3092\u7f6e\u304d\u3001\u30bc\u30ed\u77e5\u8b58\u8a3c\u660e\u3067\u30c1\u30a7\u30fc\u30f3\u306b\u8f09\u305b\u308b\u3089\u3057\u3044\u3002 \u306a\u3093\u304b\u8a08\u7b97\u3059\u308b\u3060\u3051\u3067\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3068\u304b\u306f\u7bc4\u56f2\u5916\u306e\u3088\u3046\u306a?","title":"Aleo"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#phala-network-pha","text":"https://www.phala.network/ https://github.com/Phala-Network 273star, Rust. Web3 Foundation. TEE \u306e p2p computing. Kusama \u4e0a\u3067\u7a3c\u52d5\u4e2d\u3002 Kusama \u306f Polkadot \u306e\u5b9f\u9a13\u30c1\u30a7\u30fc\u30f3\u3060\u304c\u3001\u7121\u304f\u306a\u3063\u305f\u308a\u306f\u3057\u306a\u3044\u3088\u3046\u3060\u3002","title":"Phala Network (PHA)"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#automata-network-ata","text":"https://ata.network https://github.com/automata-network 80star, Rust. Ethereum \u306e Layer2. 2021\u5e7411\u6708\u7a3c\u52d5\u3002 Avalanche, Polygon \u306e\u5354\u529b\u3067\u958b\u767a\u3002 \"Privacy middleware for dApps on Web3\" \u30de\u30eb\u30c1\u30c1\u30a7\u30fc\u30f3\u3067\u4f7f\u3048\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u63d0\u4f9b\u3059\u308b\u611f\u3058\u3002 \u305f\u3076\u3093\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306f\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u304b\u3089\u547c\u3079\u308b\u306e\u3060\u308d\u3046\u3002\u3082\u3057\u304f\u306f Web \u30b5\u30fc\u30d3\u30b9\u304b\u3089? \u4f55\u306b\u305b\u3088\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u5145\u5b9f\u304c\u5fc5\u8981\u3060\u304c\u3001\u307e\u3060\u307e\u3060\u958b\u767a\u4e2d\u3002","title":"Automata Network (ATA)"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#horizen","text":"https://horizen.io ZK-snarks.","title":"Horizen"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#dero","text":"https://dero.io \u6e96\u540c\u578b","title":"Dero"},{"location":"topics/Blockchain/2022-09-17--privacy-smartcontract/#_3","text":"\u307e\u3068\u3081\u8a18\u4e8b\u767a\u898b\u3002 \u3053\u306e\u8a18\u4e8b\u306b\u306f\u672a\u53cd\u6620\u3002 https://medium.com/hashkey-group/privacy-networks-the-future-of-smart-contract-platforms-315d9fdf7cef","title":"\u8ffd\u8a18"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/","tags":["Tech"],"text":"<\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u3078\u306e microk8s \u306e\u3059\u3059\u3081> 2019-10-10 === dai 2019-10-10 \u3082\u3068\u3082\u3068\u306f\u793e\u5185\u5411\u3051\u306b\u66f8\u3044\u305f\u3082\u306e\u3002 reveal.js \u3067\u66f8\u3044\u305f\u3051\u308c\u3069\u3046\u307e\u304f gatsby \u306b\u4e57\u3089\u306a\u3044\u306e\u3067\u30b9\u30e9\u30a4\u30c9\u69cb\u9020\u306f\u8133\u5185\u88dc\u5b8c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u74b0\u5883\u5dee\u3067\u52d5\u304b\u306a\u3044\u554f\u984c \u30d3\u30eb\u30c9\u74b0\u5883\u306e\u9055\u3044 \u5b9f\u884c\u74b0\u5883\u306e\u9055\u3044 \u8a2d\u5b9a\u6f0f\u308c \u30d3\u30eb\u30c9\u74b0\u5883 \u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u9055\u3046 IDE \u4f9d\u5b58\u3057\u307e\u304f\u308a \u5b9f\u884c\u74b0\u5883 \u30e9\u30a4\u30d6\u30e9\u30ea\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046 \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5165\u308c\u5fd8\u308c\u305f OS \u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046 \u8a2d\u5b9a \u30a2\u30d7\u30ea\u8a2d\u5b9a \u8b0e\u306e\u5100\u5f0f\u304c\u5fc5\u8981 OS \u8a2d\u5b9a\u304c\u5fc5\u8981 ulimit \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 \u958b\u767a\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5b9f\u884c\u65b9\u6cd5\u306f \u958b\u767a\u5074\u304c\u77e5\u3063\u3066\u3044\u308b \u30d3\u30eb\u30c9/\u30c7\u30d7\u30ed\u30a4\u8981\u4ef6\u3092\u660e\u793a\u3059\u308b\u306e\u306f \u7b2c\u4e00\u306b\u958b\u767a\u5074\u306e\u8cac\u52d9 \u5bfe\u7b56 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316 \u540c\u7b49\u74b0\u5883 \u30b3\u30fc\u30c9\u5316 \u30a4\u30e1\u30fc\u30b8\u5316 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316 \u907a\u6f0f\u306a\u304f\u66f8\u304f\u306e\u5927\u5909 -> \u8aad\u3093\u3067\u628a\u63e1\u3059\u308b\u306e\u3082\u5927\u5909 -> \u904b\u7528\u73fe\u5834\u3067\u6539\u5584\u3067\u304d\u306a\u3044 \u672c\u756a\u540c\u7b49\u74b0\u5883\u3067\u30c6\u30b9\u30c8 \u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b \u540c\u7b49\u3092\u7dad\u6301\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u5909\u66f4\u4e0d\u53ef \u958b\u767a\u6642\u306e\u30c6\u30b9\u30c8\u306b\u306f\u4f7f\u3048\u306a\u3044 \u69cb\u7bc9/\u30c7\u30d7\u30ed\u30a4\u306e\u30b3\u30fc\u30c9\u5316 \u53e4\u4ee3\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3002 \u8fd1\u5e74\u306f\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3002 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6bce\u306b\u63a1\u7528\u30c4\u30fc\u30eb\u304c\u9055\u3046\u306e\u3067\u5927\u5909 \u30af\u30e9\u30a6\u30c9\u6642\u4ee3\u306b\u306a\u3063\u3066\u8981\u4ef6\u304c\u5909\u308f\u3063\u305f \u30af\u30e9\u30a6\u30c9\u7528\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3082\u51fa\u3066\u304d\u305f\u304c... Note: \u8981\u4ef6. Immutable Infra \u3067\u66f4\u65b0\u304c\u4e0d\u8981\u306b\u3002 \u30af\u30e9\u30a6\u30c9\u306e API \u3068\u306e\u9023\u643a \u305d\u3082\u305d\u3082\u30b3\u30f3\u30c6\u30ca \u5b9f\u884c\u74b0\u5883\u306e\u30a4\u30e1\u30fc\u30b8\u5316 \u53e4\u4ee3\u306f\u7a3c\u52d5\u30c7\u30a3\u30b9\u30af\u4e38\u3054\u3068\u30a4\u30e1\u30fc\u30b8\u5316\u3002 \u8fd1\u5e74\u306f\u4eee\u60f3\u5316\u3002\u30b3\u30f3\u30c6\u30ca\u65b9\u5f0f\u304c\u30c7\u30d5\u30a1\u30af\u30c8\u3002 immutable infrastructure \u30af\u30e9\u30a6\u30c9\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3068\u76f8\u6027\u826f\u3044 \u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u89e3\u6c7a \u30d3\u30eb\u30c9\u74b0\u5883\u306e\u9055\u3044 -> \u30b3\u30f3\u30c6\u30ca\u306f\u3069\u3053\u3067\u30d3\u30eb\u30c9\u3057\u3066\u3082\u540c\u3058 \u5b9f\u884c\u74b0\u5883\u306e\u9055\u3044 -> \u30b3\u30f3\u30c6\u30ca\u5185\u306f\u540c\u3058\u74b0\u5883 \u8a2d\u5b9a\u6f0f\u308c -> \u30b3\u30f3\u30c6\u30ca\u5185\u3067\u8a2d\u5b9a\u6e08\u307f \u30af\u30e9\u30b9\u30bf\u306e\u8ab2\u984c \u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1\u306e\u8a2d\u5b9a \u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d7\u30ed\u30a4 \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u9023\u643a ops \u306e\u8ab2\u984c\u3067\u306f\u3042\u308b\u304c\u3001 ops \u306e\u9078\u3076\u30c4\u30fc\u30eb\u306b\u5408\u308f\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b \u30b3\u30f3\u30c6\u30ca \u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3 docker compose / swarm \u8272\u3005 kubernetes docker compose / swarm docker \u8a9e\u304c\u6c17\u6301\u3061\u60aa\u3044 network \u3084 storage \u304c\u4e0d\u5b89\u5b9a (Mac \u3067\u4f7f\u3048\u306a\u3044\u3068\u304b) compose \u306f\u30db\u30b9\u30c8\u4e00\u53f0\u3067\u672c\u756a\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002 swarm \u306f\u30de\u30eb\u30c1\u30db\u30b9\u30c8\u3060\u3051\u3069\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u7a0b\u5ea6\u3002 kubernetes \u30b3\u30f3\u30c6\u30ca\u904b\u7528\u4ee5\u4e0a\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u7bc9\u30c4\u30fc\u30eb \u5404\u30af\u30e9\u30a6\u30c9\u304c\u5bfe\u5fdc \u591a\u6570\u306e\u904b\u7528\u30c4\u30fc\u30eb \u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9 dev \u3068\u3057\u3066\u306f k8s \u3092\u60f3\u5b9a\u3057\u3066\u304a\u3051\u3070\u5f53\u5206\u3044\u3051\u305d\u3046 k8s \u904b\u7528\u3092\u60f3\u5b9a\u3057\u3066\u74b0\u5883\u554f\u984c\u5bfe\u7b56\u3092\u78e8\u304f k8s & \u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b devops \u30d7\u30ed\u30bb\u30b9 \u624b\u5143\u306e k8s \u3067\u958b\u767a/\u30c6\u30b9\u30c8 CI \u74b0\u5883\u306e k8s \u3067\u30c6\u30b9\u30c8 \u7d71\u5408\u74b0\u5883\u306e k8s \u3067\u7d71\u5408\u30c6\u30b9\u30c8 \u672c\u756a\u74b0\u5883\u306e k8s \u3078\u30c7\u30d7\u30ed\u30a4 dev \u3068\u3057\u3066\u306f \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210 \u624b\u5143\u306e k8s \u69cb\u7bc9/\u904b\u7528 k8s \u30c7\u30d7\u30ed\u30a4\u5b9a\u7fa9 \u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210 \u74b0\u5883\u5dee\u7570\u3092\u7121\u304f\u3059\u305f\u3081\u3001 \u30c6\u30b9\u30c8\u74b0\u5883\u304b\u3089\u672c\u756a\u74b0\u5883\u307e\u3067\u540c\u4e00\u30a4\u30e1\u30fc\u30b8 \u74b0\u5883\u5dee\u7570 \u30a4\u30e1\u30fc\u30b8\u5916\u90e8\u304b\u3089\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b \u30d5\u30a1\u30a4\u30eb(kubernetes ConfigMap) \u74b0\u5883\u5909\u6570 \u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3 \u521d\u671f\u5316\u51e6\u7406 entrypoint \u30b9\u30af\u30ea\u30d7\u30c8 \u6761\u4ef6\u5206\u5c90\u306e\u30ea\u30c3\u30c1\u306a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 init container (kubernetes) \u521d\u671f\u5316\u51e6\u7406\u306f\u5225 container \u306b\u5206\u96e2 \u30a4\u30e1\u30fc\u30b8\u69cb\u7bc9 Dockerfile ansible container \u307b\u304b Dockerfile \u306f\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u4ed6\u306b\u3042\u308c\u3070\u79fb\u884c\u3057\u305f\u3044 \u624b\u5143\u306e k8s minikube microk8s k3s kind minikube \u4eee\u60f3\u30de\u30b7\u30f3 Linux \u4e0a\u3067\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u306e k8s \u3092\u52d5\u304b\u3059 \u91cd\u3044\u3088\u3046\u306a\u6c17\u304c\u3059\u308b \u69cb\u7bc9\u304c\u3084\u3084\u5927\u5909 microk8s \u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u3067 k8s \u30af\u30e9\u30b9\u30bf\u3092\u904b\u7528\u3059\u308b\u305f\u3081\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 \u6c4e\u7528\u306e minikube \u3068\u9055\u3044\u3001\u30b7\u30f3\u30b0\u30eb\u524d\u63d0\u3067\u8a2d\u5b9a\u7c21\u7565\u5316 snap \u4e00\u767a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb container registry \u3082\u4ed8\u3044\u3066\u308b k3s + k3d k3s: - IoT \u306a\u3069\u4f4e\u6027\u80fd\u30db\u30b9\u30c8\u3067\u52d5\u304b\u3059\u305f\u3081\u306e k8s \u30b5\u30d6\u30bb\u30c3\u30c8 - \u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3067\u30af\u30e9\u30b9\u30bf\u8d77\u52d5 - \u30db\u30b9\u30c8\u306f linux \u5c02 k3d: - k3s \u3092\u30de\u30eb\u30c1\u30ce\u30fc\u30c9\u5bfe\u5fdc\u306b\u3059\u308b kind docker container \u4e0a\u3067 kubernetes \u3092\u52d5\u304b\u3059\u3002 kubernetes \u306e\u30c6\u30b9\u30c8\u76ee\u7684\u3067\u3001\u958b\u767a\u306b\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u306f\u5099\u3048\u3066\u3044\u306a\u3044 kubeadm kubernetes \u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u4fbf\u5229\u30c4\u30fc\u30eb microk8s \u69cb\u7bc9 docker.io 1 2 3 $ sudo apt-get install docker.io $ sudo addgroup --system docker $ sudo adduser $USER docker microk8s 1 2 3 4 $ sudo snap install microk8s --classic $ sudo iptables -P FORWARD ACCEPT $ microk8s.enable registry dns storage $ microk8s.start kubectl \u306f\u5c02\u7528\u306e\u3084\u3064\u3092\u4f7f\u3046 1 $ microk8s.kubectl apply -f my-cluster-manifesto.yaml container registry localhost:32000 \u3067\u52d5\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30e1\u30fc\u30b8\u3082\u305d\u3053\u3078 push. \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3067\u305d\u308c\u3092\u6307\u5b9a\u3059\u308b\u3002 1 2 $ docker build . -t localhost:32000/myimage:latest $ docker push localhost:32000/myimage:latest kubernetes \u64cd\u4f5c \u64cd\u4f5c\u306f kubectl. 1 2 3 4 5 $ kubectl - n & lt ; namespace > get & lt ; type > $ kubectl - n & lt ; namespace > logs [ -f ] & lt ; pod > [ container ] $ kubectl - n & lt ; namespace > apply - f & lt ; manifesto . yaml > $ kubectl - n & lt ; namespace > delete - f & lt ; manifesto . yaml > $ kubectl - n & lt ; namespace > exec [ -it ] & lt ; pod > [ -c container ] -- &lt;command> \u30ea\u30bd\u30fc\u30b9\u3068\u30de\u30cb\u30d5\u30a7\u30b9\u30c8 \u307e\u305a\u306f\u3053\u306e\u8fba\u304b\u3089 Pod \u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\u3002\u30b3\u30f3\u30c6\u30ca\u306f\u8907\u6570\u53ef\u3002 Deployment pod \u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u7ba1\u7406\u3002\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3068\u304b\u3002 Service pod \u3078\u306e\u9759\u7684\u306a\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3002 Ingress \u5916\u90e8\u304b\u3089 Service \u3078\u306e\u758e\u901a\u3002 End. </ \u958b\u767a\u8005\u306e\u305f\u3081\u306e microk8s>","title":"\u30b5\u30fc\u30d0\u30fc\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u305f\u3081\u306e microk8s \u306e\u3059\u3059\u3081"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#microk8s","text":"2019-10-10 === dai 2019-10-10 \u3082\u3068\u3082\u3068\u306f\u793e\u5185\u5411\u3051\u306b\u66f8\u3044\u305f\u3082\u306e\u3002 reveal.js \u3067\u66f8\u3044\u305f\u3051\u308c\u3069\u3046\u307e\u304f gatsby \u306b\u4e57\u3089\u306a\u3044\u306e\u3067\u30b9\u30e9\u30a4\u30c9\u69cb\u9020\u306f\u8133\u5185\u88dc\u5b8c\u3057\u3066\u304f\u3060\u3055\u3044\u3002","title":"&lt;\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u3078\u306e microk8s \u306e\u3059\u3059\u3081&gt;"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_1","text":"\u30d3\u30eb\u30c9\u74b0\u5883\u306e\u9055\u3044 \u5b9f\u884c\u74b0\u5883\u306e\u9055\u3044 \u8a2d\u5b9a\u6f0f\u308c","title":"\u74b0\u5883\u5dee\u3067\u52d5\u304b\u306a\u3044\u554f\u984c"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_2","text":"\u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u9055\u3046 IDE \u4f9d\u5b58\u3057\u307e\u304f\u308a","title":"\u30d3\u30eb\u30c9\u74b0\u5883"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_3","text":"\u30e9\u30a4\u30d6\u30e9\u30ea\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046 \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5165\u308c\u5fd8\u308c\u305f OS \u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046","title":"\u5b9f\u884c\u74b0\u5883"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_4","text":"\u30a2\u30d7\u30ea\u8a2d\u5b9a \u8b0e\u306e\u5100\u5f0f\u304c\u5fc5\u8981 OS \u8a2d\u5b9a\u304c\u5fc5\u8981 ulimit \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210 \u958b\u767a\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5b9f\u884c\u65b9\u6cd5\u306f \u958b\u767a\u5074\u304c\u77e5\u3063\u3066\u3044\u308b \u30d3\u30eb\u30c9/\u30c7\u30d7\u30ed\u30a4\u8981\u4ef6\u3092\u660e\u793a\u3059\u308b\u306e\u306f \u7b2c\u4e00\u306b\u958b\u767a\u5074\u306e\u8cac\u52d9","title":"\u8a2d\u5b9a"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_5","text":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316 \u540c\u7b49\u74b0\u5883 \u30b3\u30fc\u30c9\u5316 \u30a4\u30e1\u30fc\u30b8\u5316","title":"\u5bfe\u7b56"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_6","text":"\u907a\u6f0f\u306a\u304f\u66f8\u304f\u306e\u5927\u5909 -> \u8aad\u3093\u3067\u628a\u63e1\u3059\u308b\u306e\u3082\u5927\u5909 -> \u904b\u7528\u73fe\u5834\u3067\u6539\u5584\u3067\u304d\u306a\u3044","title":"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5316"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_7","text":"\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b \u540c\u7b49\u3092\u7dad\u6301\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u5909\u66f4\u4e0d\u53ef \u958b\u767a\u6642\u306e\u30c6\u30b9\u30c8\u306b\u306f\u4f7f\u3048\u306a\u3044","title":"\u672c\u756a\u540c\u7b49\u74b0\u5883\u3067\u30c6\u30b9\u30c8"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_8","text":"\u53e4\u4ee3\u306f\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3002 \u8fd1\u5e74\u306f\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3002 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6bce\u306b\u63a1\u7528\u30c4\u30fc\u30eb\u304c\u9055\u3046\u306e\u3067\u5927\u5909 \u30af\u30e9\u30a6\u30c9\u6642\u4ee3\u306b\u306a\u3063\u3066\u8981\u4ef6\u304c\u5909\u308f\u3063\u305f \u30af\u30e9\u30a6\u30c9\u7528\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3082\u51fa\u3066\u304d\u305f\u304c... Note: \u8981\u4ef6. Immutable Infra \u3067\u66f4\u65b0\u304c\u4e0d\u8981\u306b\u3002 \u30af\u30e9\u30a6\u30c9\u306e API \u3068\u306e\u9023\u643a \u305d\u3082\u305d\u3082\u30b3\u30f3\u30c6\u30ca","title":"\u69cb\u7bc9/\u30c7\u30d7\u30ed\u30a4\u306e\u30b3\u30fc\u30c9\u5316"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_9","text":"\u53e4\u4ee3\u306f\u7a3c\u52d5\u30c7\u30a3\u30b9\u30af\u4e38\u3054\u3068\u30a4\u30e1\u30fc\u30b8\u5316\u3002 \u8fd1\u5e74\u306f\u4eee\u60f3\u5316\u3002\u30b3\u30f3\u30c6\u30ca\u65b9\u5f0f\u304c\u30c7\u30d5\u30a1\u30af\u30c8\u3002 immutable infrastructure \u30af\u30e9\u30a6\u30c9\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3068\u76f8\u6027\u826f\u3044","title":"\u5b9f\u884c\u74b0\u5883\u306e\u30a4\u30e1\u30fc\u30b8\u5316"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_10","text":"\u30d3\u30eb\u30c9\u74b0\u5883\u306e\u9055\u3044 -> \u30b3\u30f3\u30c6\u30ca\u306f\u3069\u3053\u3067\u30d3\u30eb\u30c9\u3057\u3066\u3082\u540c\u3058 \u5b9f\u884c\u74b0\u5883\u306e\u9055\u3044 -> \u30b3\u30f3\u30c6\u30ca\u5185\u306f\u540c\u3058\u74b0\u5883 \u8a2d\u5b9a\u6f0f\u308c -> \u30b3\u30f3\u30c6\u30ca\u5185\u3067\u8a2d\u5b9a\u6e08\u307f","title":"\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b\u89e3\u6c7a"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_11","text":"\u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1\u306e\u8a2d\u5b9a \u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30d7\u30ed\u30a4 \u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u9023\u643a ops \u306e\u8ab2\u984c\u3067\u306f\u3042\u308b\u304c\u3001 ops \u306e\u9078\u3076\u30c4\u30fc\u30eb\u306b\u5408\u308f\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b","title":"\u30af\u30e9\u30b9\u30bf\u306e\u8ab2\u984c"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_12","text":"docker compose / swarm \u8272\u3005 kubernetes","title":"\u30b3\u30f3\u30c6\u30ca \u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#docker-compose-swarm","text":"docker \u8a9e\u304c\u6c17\u6301\u3061\u60aa\u3044 network \u3084 storage \u304c\u4e0d\u5b89\u5b9a (Mac \u3067\u4f7f\u3048\u306a\u3044\u3068\u304b) compose \u306f\u30db\u30b9\u30c8\u4e00\u53f0\u3067\u672c\u756a\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002 swarm \u306f\u30de\u30eb\u30c1\u30db\u30b9\u30c8\u3060\u3051\u3069\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u7a0b\u5ea6\u3002","title":"docker compose / swarm"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#kubernetes","text":"\u30b3\u30f3\u30c6\u30ca\u904b\u7528\u4ee5\u4e0a\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u7bc9\u30c4\u30fc\u30eb \u5404\u30af\u30e9\u30a6\u30c9\u304c\u5bfe\u5fdc \u591a\u6570\u306e\u904b\u7528\u30c4\u30fc\u30eb \u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9","title":"kubernetes"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#dev","text":"k8s \u3092\u60f3\u5b9a\u3057\u3066\u304a\u3051\u3070\u5f53\u5206\u3044\u3051\u305d\u3046 k8s \u904b\u7528\u3092\u60f3\u5b9a\u3057\u3066\u74b0\u5883\u554f\u984c\u5bfe\u7b56\u3092\u78e8\u304f","title":"dev \u3068\u3057\u3066\u306f"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#k8s-devops","text":"\u624b\u5143\u306e k8s \u3067\u958b\u767a/\u30c6\u30b9\u30c8 CI \u74b0\u5883\u306e k8s \u3067\u30c6\u30b9\u30c8 \u7d71\u5408\u74b0\u5883\u306e k8s \u3067\u7d71\u5408\u30c6\u30b9\u30c8 \u672c\u756a\u74b0\u5883\u306e k8s \u3078\u30c7\u30d7\u30ed\u30a4","title":"k8s &amp; \u30b3\u30f3\u30c6\u30ca\u306b\u3088\u308b devops \u30d7\u30ed\u30bb\u30b9"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#dev_1","text":"\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210 \u624b\u5143\u306e k8s \u69cb\u7bc9/\u904b\u7528 k8s \u30c7\u30d7\u30ed\u30a4\u5b9a\u7fa9","title":"dev \u3068\u3057\u3066\u306f"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_13","text":"\u74b0\u5883\u5dee\u7570\u3092\u7121\u304f\u3059\u305f\u3081\u3001 \u30c6\u30b9\u30c8\u74b0\u5883\u304b\u3089\u672c\u756a\u74b0\u5883\u307e\u3067\u540c\u4e00\u30a4\u30e1\u30fc\u30b8","title":"\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_14","text":"\u30a4\u30e1\u30fc\u30b8\u5916\u90e8\u304b\u3089\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b \u30d5\u30a1\u30a4\u30eb(kubernetes ConfigMap) \u74b0\u5883\u5909\u6570 \u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3","title":"\u74b0\u5883\u5dee\u7570"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_15","text":"entrypoint \u30b9\u30af\u30ea\u30d7\u30c8 \u6761\u4ef6\u5206\u5c90\u306e\u30ea\u30c3\u30c1\u306a\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 init container (kubernetes) \u521d\u671f\u5316\u51e6\u7406\u306f\u5225 container \u306b\u5206\u96e2","title":"\u521d\u671f\u5316\u51e6\u7406"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_16","text":"Dockerfile ansible container \u307b\u304b Dockerfile \u306f\u5206\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u4ed6\u306b\u3042\u308c\u3070\u79fb\u884c\u3057\u305f\u3044","title":"\u30a4\u30e1\u30fc\u30b8\u69cb\u7bc9"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#k8s","text":"minikube microk8s k3s kind","title":"\u624b\u5143\u306e k8s"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#minikube","text":"\u4eee\u60f3\u30de\u30b7\u30f3 Linux \u4e0a\u3067\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u306e k8s \u3092\u52d5\u304b\u3059 \u91cd\u3044\u3088\u3046\u306a\u6c17\u304c\u3059\u308b \u69cb\u7bc9\u304c\u3084\u3084\u5927\u5909","title":"minikube"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#microk8s_1","text":"\u30b7\u30f3\u30b0\u30eb\u30ce\u30fc\u30c9\u3067 k8s \u30af\u30e9\u30b9\u30bf\u3092\u904b\u7528\u3059\u308b\u305f\u3081\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 \u6c4e\u7528\u306e minikube \u3068\u9055\u3044\u3001\u30b7\u30f3\u30b0\u30eb\u524d\u63d0\u3067\u8a2d\u5b9a\u7c21\u7565\u5316 snap \u4e00\u767a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb container registry \u3082\u4ed8\u3044\u3066\u308b","title":"microk8s"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#k3s-k3d","text":"k3s: - IoT \u306a\u3069\u4f4e\u6027\u80fd\u30db\u30b9\u30c8\u3067\u52d5\u304b\u3059\u305f\u3081\u306e k8s \u30b5\u30d6\u30bb\u30c3\u30c8 - \u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3067\u30af\u30e9\u30b9\u30bf\u8d77\u52d5 - \u30db\u30b9\u30c8\u306f linux \u5c02 k3d: - k3s \u3092\u30de\u30eb\u30c1\u30ce\u30fc\u30c9\u5bfe\u5fdc\u306b\u3059\u308b","title":"k3s + k3d"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#kind","text":"docker container \u4e0a\u3067 kubernetes \u3092\u52d5\u304b\u3059\u3002 kubernetes \u306e\u30c6\u30b9\u30c8\u76ee\u7684\u3067\u3001\u958b\u767a\u306b\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u306f\u5099\u3048\u3066\u3044\u306a\u3044","title":"kind"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#kubeadm","text":"kubernetes \u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u4fbf\u5229\u30c4\u30fc\u30eb","title":"kubeadm"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#microk8s_2","text":"","title":"microk8s \u69cb\u7bc9"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#dockerio","text":"1 2 3 $ sudo apt-get install docker.io $ sudo addgroup --system docker $ sudo adduser $USER docker","title":"docker.io"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#microk8s_3","text":"1 2 3 4 $ sudo snap install microk8s --classic $ sudo iptables -P FORWARD ACCEPT $ microk8s.enable registry dns storage $ microk8s.start kubectl \u306f\u5c02\u7528\u306e\u3084\u3064\u3092\u4f7f\u3046 1 $ microk8s.kubectl apply -f my-cluster-manifesto.yaml","title":"microk8s"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#container-registry","text":"localhost:32000 \u3067\u52d5\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30e1\u30fc\u30b8\u3082\u305d\u3053\u3078 push. \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3067\u305d\u308c\u3092\u6307\u5b9a\u3059\u308b\u3002 1 2 $ docker build . -t localhost:32000/myimage:latest $ docker push localhost:32000/myimage:latest","title":"container registry"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#kubernetes_1","text":"\u64cd\u4f5c\u306f kubectl. 1 2 3 4 5 $ kubectl - n & lt ; namespace > get & lt ; type > $ kubectl - n & lt ; namespace > logs [ -f ] & lt ; pod > [ container ] $ kubectl - n & lt ; namespace > apply - f & lt ; manifesto . yaml > $ kubectl - n & lt ; namespace > delete - f & lt ; manifesto . yaml > $ kubectl - n & lt ; namespace > exec [ -it ] & lt ; pod > [ -c container ] -- &lt;command>","title":"kubernetes \u64cd\u4f5c"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#_17","text":"\u307e\u305a\u306f\u3053\u306e\u8fba\u304b\u3089 Pod \u30b3\u30f3\u30c6\u30ca\u30db\u30b9\u30c8\u3002\u30b3\u30f3\u30c6\u30ca\u306f\u8907\u6570\u53ef\u3002 Deployment pod \u306e\u30ef\u30fc\u30af\u30ed\u30fc\u30c9\u3092\u7ba1\u7406\u3002\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3068\u304b\u3002 Service pod \u3078\u306e\u9759\u7684\u306a\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3002 Ingress \u5916\u90e8\u304b\u3089 Service \u3078\u306e\u758e\u901a\u3002 End.","title":"\u30ea\u30bd\u30fc\u30b9\u3068\u30de\u30cb\u30d5\u30a7\u30b9\u30c8"},{"location":"topics/Kubernetes/2019-10-10--microk8s-for-programmer/#microk8s_4","text":"","title":"&lt;/ \u958b\u767a\u8005\u306e\u305f\u3081\u306e microk8s&gt;"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/","tags":["Tech","Kubernetes"],"text":"Kubernetes \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf 2021-08-09 Kubernetes \u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u5b9a\u7fa9\u306f\u7d30\u304b\u304f\u8272\u3005\u66f8\u3051\u308b\u306e\u306f\u826f\u3044\u306e\u3060\u304c\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9\u306b\u7279\u5fb4\u7684\u306a\u90e8\u5206\u304c\u57cb\u3082\u308c\u3066\u3057\u307e\u3046\u6b20\u70b9\u304c\u3042\u308b\u3002 \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u4e0a\u3067\u306f\u983b\u51fa\u3059\u308b\u8ab2\u984c\u3067\u3001\u6c4e\u7528\u7684\u306a\u90e8\u5206\u3092\u30d9\u30fc\u30b9\u306e\u8a18\u8ff0\u3068\u3001\u30d9\u30fc\u30b9\u304b\u3089\u306e\u5dee\u5206\u306e\u8a18\u8ff0\u306b\u5206\u3051\u3066\u5408\u6210\u3059\u308b\u306e\u304c\u5178\u578b\u7684\u306a\u89e3\u6cd5\u3002 \u4f3c\u305f\u3088\u3046\u306a\u5b9a\u7fa9\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u308b\u5834\u5408\u306b\u3082\u3001\u5171\u901a\u90e8\u5206\u3092\u30d9\u30fc\u30b9\u306b\u629c\u304d\u51fa\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u91cd\u8907\u8a18\u8ff0\u306e\u624b\u9593\u3092\u907f\u3051\u3066\u30df\u30b9\u3082\u6e1b\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002 Kubernetes \u306b\u306f\u3053\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3084\u308b\u30c4\u30fc\u30eb\u304c\u8272\u3005\u3042\u308b\u3002 \u3053\u306e\u5206\u91ce\u306b\u5bfe\u3059\u308b\u30c7\u30d5\u30a1\u30af\u30c8\u306a\u540d\u524d\u306f\u7121\u3055\u3052? \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3001\u3068\u547c\u79f0\u3059\u308b\u3002 Helm Chart \u4e00\u5fdc\u306e\u4e8b\u5b9f\u4e0a\u306e\u6a19\u6e96\u3002 k8s \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f\u5927\u4f53 Helm Chart \u5f62\u5f0f\u3067\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u3002 Helm \u305d\u306e\u3082\u306e\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u306e\u6a5f\u80fd\u3082\u3042\u3063\u305f\u308a\u3057\u305f\u306e\u3060\u304c\u3001\u3053\u3053\u3067\u306f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u90e8\u5206\u3092\u898b\u308b\u3002 \u5b9f\u614b\u306f Golang Template \u3067\u3042\u308b\u3002 \u3068\u3044\u3046\u304b Helm Chart \u306e\u66f8\u304d\u65b9\u7684\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3059\u3089\u7121\u304f\u3001Go Template \u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u8aad\u3080\u3053\u3068\u306b\u306a\u308b\u3002 Go Template \u306f\u3088\u304f\u3042\u308b HTML \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u307f\u305f\u3044\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u8a00\u8a9e\u3067\u3042\u308b\u3002 \u81ea\u5206\u3067\u8272\u3005\u66f8\u3044\u3066\u307f\u305f\u306e\u306f\u3082\u3046\u6570\u5e74\u524d\u306a\u306e\u3067\u8a73\u7d30\u306f\u66d6\u6627\u3060\u304c\u3001\u3068\u3066\u3082\u82e6\u52b4\u3057\u305f\u8a18\u61b6\u304c\u3042\u308b\u3002 \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u578b \u5358\u306b\u6587\u5b57\u5217\u3092\u7f6e\u304d\u63db\u3048\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067\u3001k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f\u3082\u3061\u308d\u3093\u3001YAML \u69cb\u9020\u306e\u30c1\u30a7\u30c3\u30af\u306f\u3057\u3066\u304f\u308c\u306a\u3044\u3002 \u751f\u6210\u3055\u308c\u305f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30a8\u30e9\u30fc\u3092\u898b\u3064\u3051\u308b\u306e\u304c\u5927\u5909\u3002 \u30a4\u30f3\u30c7\u30f3\u30c8 \u5358\u7d14\u306b\u7f6e\u63db\u3055\u308c\u308b\u306e\u3067\u3001\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u6271\u3046\u306e\u304c\u5927\u5909\u3002 1 2 3 4 resources: {{ .Values.resources | toYaml | indent 8 }} volumes: - ... {{- , -}} \u3067\u524d\u5f8c\u306e\u7a7a\u767d\u3068\u5f8c\u308d\u306e\u6539\u884c\u3092\u6d88\u305b\u308b\u306e\u3067\u305d\u308c\u3092\u4f7f\u3048\u308b\u304c\u3001 1 2 3 4 resources: {{ - .Values.resources | toYaml }} volumes: - ... if \u6587\u3092\u4ed8\u3051\u305f\u308a\u3059\u308b\u3068\u3001end \u3067\u6539\u884c\u304c\u30ba\u30ec\u306a\u3044\u3088\u3046\u306b\u6c17\u3092\u4ed8\u3051\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 1 2 3 4 5 resources: {{ - if .Values.resources }} {{ .Values.resources | toYaml }}{{ - end }} volumes: - ... | \u3067\u57cb\u3081\u8fbc\u307f YAML/JSON \u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3068\u5730\u7344\u3067\u3042\u308b\u3002 \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b \u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u5404\u7a2e\u57fa\u672c\u578b\u304c\u4f7f\u3048\u308b\u3002 \u3057\u304b\u3057 ArgoCD \u306a\u3069\u3067 Helm Chart \u3092\u9069\u7528\u3059\u308b\u969b\u306b\u306f int \u3084 bool \u306f string \u3067\u6e21\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304b\u3063\u305f\u3002 \u30eb\u30fc\u30d7\u306a\u3069 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067\u69cb\u9020\u5316\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u304c\u5f31\u3044\u3002 \u305f\u3068\u3048\u3070\u5165\u529b\u306e array[dict] \u306b\u5bfe\u3057\u3066 filter-map \u3057\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4e00\u90e8\u3092\u751f\u6210\u3057\u305f\u3044\u30b1\u30fc\u30b9\u306a\u3069\u3067\u306f\u3001begin-end \u306e\u5bfe\u304c\u5206\u304b\u308a\u306b\u304f\u3044\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u304c\u6563\u308a\u3070\u3081\u3089\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u3002 \u3082\u3061\u308d\u3093\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u7f6e\u304f\u6642\u306f\u30a4\u30f3\u30c7\u30f3\u30c8\u306b\u6ce8\u610f\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 \u307e\u3068\u3081 \u30a4\u30f3\u30c7\u30f3\u30c8\u5408\u308f\u305b\u306a\u3069\u975e\u751f\u7523\u7684\u306a\u3053\u3068\u306b\u6642\u9593\u3092\u3068\u3089\u308c\u308b\u30b9\u30c8\u30ec\u30b9\u304c\u51c4\u3044\u3002 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3068\u3057\u3066\u3082\u305d\u3082\u305d\u3082\u6587\u5b57\u5217\u51e6\u7406\u306a\u3069\u304c\u5f31\u3044\u3002 \u4f7f\u3044\u305f\u304f\u306a\u3044\u3002 \u914d\u5e03\u30c4\u30fc\u30eb\u3068\u3057\u3066\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u306a\u306e\u3067\u5229\u7528\u306f\u3059\u308b\u3002 Kustomize Kubernetes-sigs CLI \u30b9\u30dd\u30f3\u30b5\u30fc\u30c9\u306e\u30c4\u30fc\u30eb\u3067\u3001kubectl \u304b\u3089\u4f7f\u3048\u308b\u3002 \u30de\u30cb\u30d5\u30a7\u30b9\u30c8YAML \u306e\u90e8\u5206\u30d5\u30a1\u30a4\u30eb(\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb)\u7fa4\u3068\u3001\u305d\u308c\u3089\u306e\u7d50\u5408\u65b9\u6cd5\u3092\u6307\u793a\u3059\u308b kustomization.yaml \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u6210\u308b\u3002 \u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306f apiVersion, kind, spec \u306a\u3069\u3092\u6301\u3063\u305f kubernetes \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3069\u3093\u3069\u3093\u4e0a\u66f8\u304d\u3057\u3066\u3044\u304f\u30b9\u30bf\u30a4\u30eb\u3002 \u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u3092\u6301\u3063\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u30b9\u30bf\u30a4\u30eb\u3068\u306f\u7570\u306a\u308b\u3002 \u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306f\u5206\u304b\u308a\u3084\u3059\u304f\u3001\u5358\u7d14\u306a\u751f\u6210\u306b\u306f\u4fbf\u5229\u3002 \u74b0\u5883\u6bce\u306b\u9069\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u3057\u304b\u3057\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u51e6\u7406\u306f\u3067\u304d\u306a\u3044\u3002 \u307e\u3068\u3081 \u57fa\u672c\u7684\u306b\u91cd\u8907\u4e0a\u7b49\u3067\u66f8\u304d\u307e\u304f\u308c\u3068\u3044\u3046\u904b\u7528\u6587\u5316\u306e\u30c4\u30fc\u30eb\u3002 \u30d7\u30ed\u30b0\u30e9\u30de\u306b\u306f\u53d7\u3051\u5165\u308c\u96e3\u3044\u3002 jsonnet JSON \u306e\u53b3\u683c\u306a\u3068\u3053\u308d(\u30ea\u30b9\u30c8\u306e\u6700\u5f8c\u306e\u8981\u7d20\u306e\u5f8c\u30ab\u30f3\u30de\u3092\u6253\u3063\u3061\u3083\u3060\u3081\u3068\u304b)\u3092\u7de9\u304f\u3057\u305f\u8a00\u8a9e\u3002 \u95a2\u6570\u547c\u3073\u51fa\u3057\u304c\u3067\u304d\u308b\u3002\u95a2\u6570\u5b9a\u7fa9\u3082\u3067\u304d\u308b\u3002 Python \u306e\u5185\u5305\u8868\u8a18\u307f\u305f\u3044\u306a\u30ea\u30b9\u30c8/\u8f9e\u66f8\u64cd\u4f5c\u6a5f\u80fd\u3092\u5099\u3048\u3066\u308b\u3002 \u30ea\u30b9\u30c8\u64cd\u4f5c\u304c\u5f37\u3044\u3002\u3053\u308c\u3060\u3051\u3067\u904b\u7528\u6587\u5316\u306e\u30c4\u30fc\u30eb\u3067\u3067\u3067\u304d\u306a\u3044\u51e6\u7406\u304c\u3060\u3044\u305f\u3044\u51fa\u6765\u308b\u3002 \u4fbf\u5229\u6a5f\u80fd\u304c\u3042\u308b\u304c\u7279\u5fb4\u7684\u3067\u3001\u5b66\u7fd2\u304c\u5fc5\u8981\u3002 :: \u3067\u5b9a\u7fa9\u3057\u305f\u30ad\u30fc\u306f\u6700\u7d42\u51fa\u529b\u304b\u3089\u5916\u308c\u308b\u3068\u304b\u3001\u30ad\u30fc\u3092 if \u6587\u3067\u6307\u5b9a\u3057\u3066 null \u3060\u3063\u305f\u3089\u9664\u5916\u3055\u308c\u308b\u3068\u304b\u3002 \u30d1\u30e9\u30e1\u30fc\u30bf\u3082 jsonnet or json \u3067\u66f8\u3044\u3066 import \u3067\u53d6\u308a\u8fbc\u3080\u30b9\u30bf\u30a4\u30eb\u3002 Helm Template \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u6e21\u3057\u306e\u578b\u306e\u554f\u984c\u306f\u7121\u3044\u3002 ArgoCD \u3082\u5bfe\u5fdc\u3057\u3066\u308b\u3002 \u307e\u3068\u3081 \u6a5f\u80fd\u7684\u306b\u306f\u6700\u5c0f\u9650\u5ea6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u3002 \u7656\u304c\u3042\u308b\u306e\u3067\u5b66\u7fd2\u304c\u5fc5\u8981\u306a\u306e\u3068\u3001\u6700\u7d42\u7684\u306a\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f YAML \u306b\u306a\u308b\u306e\u3067 JSON \u3068\u306e\u5bfe\u5fdc\u4ed8\u3051\u304c\u5c11\u3057\u624b\u9593\u53d6\u308b\u306e\u304c\u554f\u984c\u304b\u3002 ksonnet / tanka jsonnet \u306b k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u578b\u3078\u306e\u5bfe\u5fdc\u3092\u5165\u308c\u3001k8s \u30c7\u30d7\u30ed\u30a4\u6a5f\u80fd\u3092\u52a0\u3048\u305f\u3082\u306e\u3002 k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4f5c\u308a\u304b\u3089\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30b9\u30bf\u30a4\u30eb\u3082\u5f37\u5236\u3055\u308c\u308b\u3002 config \u306e\u53d6\u308a\u8fbc\u307f\u306e\u65b9\u6cd5\u3068\u304b\u3001\u30d9\u30fc\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u5dee\u5206\u9069\u7528\u306e\u65b9\u6cd5\u3068\u304b\u3002 \u30c7\u30d7\u30ed\u30a4\u6a5f\u80fd\u306f\u30b9\u30c6\u30fc\u30c8\u7ba1\u7406\u306f\u7121\u3044\u3082\u306e\u306e\u3001\u73fe\u72b6\u3068\u306e\u5dee\u5206\u3092\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002 ksonnet \u306f\u30c7\u30a3\u30b9\u30b3\u30f3\u306b\u306a\u3063\u305f\u304c\u3001Grafana \u30c1\u30fc\u30e0\u304c fork \u3057\u3066 tanka \u3092\u4f5c\u3063\u305f\u3002 ArgoCD \u306f ksonnet \u306f\u5bfe\u5fdc\u3057\u3066\u308b\u3051\u3069 tanka \u306f\u672a\u5bfe\u5fdc\u3002 tanka \u306f helm chart \u306e\u30c7\u30d7\u30ed\u30a4\u3082\u3067\u304d\u308b\u3002 \u307e\u3068\u3081 k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u578b\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u306f\u5f37\u3044\u3002 helm chart \u304c\u4f7f\u3048\u308b\u306e\u3082\u3001\u6a19\u6e96\u306e\u914d\u5e03\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u3048\u3066\u4fbf\u5229\u3002 \u30c7\u30d7\u30ed\u30a4\u6642\u306e\u5dee\u5206\u8868\u793a\u3082\u4fbf\u5229\u3002 \u30c1\u30fc\u30e0\u3067\u306e\u5229\u7528\u3084\u3001\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u306b\u306f\u5c11\u3057\u6a5f\u80fd\u304c\u4e0d\u8db3\u3002 \u3042\u3068\u306f\u5206\u304b\u308a\u306b\u304f\u3044\u3068\u3044\u3046 jsonnet \u306e\u6b20\u70b9\u306f\u305d\u306e\u307e\u307e\u3042\u308b\u3002 \u500b\u4eba\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u4e00\u4eba\u904b\u7528\u62c5\u5f53\u3067\u4f7f\u3046\u306e\u306f\u6709\u308a\u304b\u3002 Pulumi \u5143\u3005\u306f Terraform \u306e\u3088\u3046\u306a\u30af\u30e9\u30a6\u30c9\u7528 IoC \u30c4\u30fc\u30eb\u3067\u3042\u3063\u305f\u304c\u3001k8s \u306b\u3082\u5bfe\u5fdc\u3057\u305f\u3002 \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3067\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u751f\u6210\u3059\u308b\u3002 \u8a00\u8a9e\u306f Typescript, Go, C# \u306a\u3069\u5bfe\u5fdc\u3002 \u3082\u3061\u308d\u3093 k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u578b\u5b9a\u7fa9\u304c\u3042\u308b\u3002\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u3067\u5f3e\u3051\u308b\u306e\u306f\u3082\u3061\u308d\u3093\u3001IDE \u306b\u3088\u308b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u652f\u63f4\u3082\u3002 \u30b9\u30c6\u30fc\u30c8\u7ba1\u7406\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u5fc5\u8981\u306a\u3088\u3046\u3060\u3002 \u30c1\u30fc\u30e0\u5229\u7528\u306f\u6599\u91d1\u304b\u304b\u308b\u3002\u7121\u6599\u67a0\u3042\u308a\u3002\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u7acb\u3066\u3089\u308c\u308b\u304b\u3082\u3002 GitOps \u3082\u3067\u304d\u308b\u3088\u3046\u3060\u3002 \u307e\u3068\u3081 \u30d7\u30ed\u30b0\u30e9\u30de\u3068\u3057\u3066\u306f\u3068\u3066\u3082\u9b45\u304b\u308c\u308b\u3002 Terraform \u3082 k8s \u5bfe\u5fdc\u3057\u3066\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001\u3042\u3063\u3061\u306f\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30eb\u6a5f\u80fd\u5f31\u3044\u3057\u6bd4\u8f03\u5bfe\u8c61\u5916\u3002 \u4fa1\u683c\u306f\u3061\u3087\u3063\u3068\u6c17\u306b\u306a\u308b\u3002 \u7121\u6599\u67a0\u304c\u3069\u306e\u7a0b\u5ea6\u304b\u6df1\u304f\u8a08\u7b97\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u307e\u3060\u5229\u76ca\u51fa\u3066\u306a\u3044\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u306b\u306f\u8e8a\u8e87\u308f\u308c\u308b\u3002 \u307e\u3060\u4f7f\u3044\u59cb\u3081\u3067\u3001\u8907\u96d1\u306a\u30b1\u30fc\u30b9\u3067\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304c\u3069\u3046\u306a\u308b\u304b\u306f\u672a\u77e5\u3002 \u304a\u305f\u3081\u3057\u3067\u3061\u3087\u3063\u3068\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30c7\u30d7\u30ed\u30a4\u306e IoC \u66f8\u3044\u3066\u307f\u305f: https://github.com/dai1975/pulumi-k8s-scaffold Input/Output \u306e\u6271\u3044\u304c\u3061\u3087\u3063\u3068\u96e3\u3057\u3044\u3002 \u3042\u3068\u3001\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5206\u5272\u3057\u305f\u5834\u5408\u306b\u3001\u57fa\u76e4\u306e\u65b9\u3092\u66f4\u65b0\u3057\u3066\u3082\u4f9d\u5b58\u3055\u308c\u308b\u5074\u306f\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u306a\u3044\u306a\u3068\u3044\u3046\u3068\u3053\u308d\u3002 \u30e2\u30ce\u30b7\u30ea\u30c3\u30af\u30b9\u30bf\u30c3\u30af\u3067\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u7591\u60d1\u3002","title":"Kubernetes \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#kubernetes","text":"2021-08-09 Kubernetes \u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u5b9a\u7fa9\u306f\u7d30\u304b\u304f\u8272\u3005\u66f8\u3051\u308b\u306e\u306f\u826f\u3044\u306e\u3060\u304c\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u5b9a\u7fa9\u306b\u7279\u5fb4\u7684\u306a\u90e8\u5206\u304c\u57cb\u3082\u308c\u3066\u3057\u307e\u3046\u6b20\u70b9\u304c\u3042\u308b\u3002 \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u4e0a\u3067\u306f\u983b\u51fa\u3059\u308b\u8ab2\u984c\u3067\u3001\u6c4e\u7528\u7684\u306a\u90e8\u5206\u3092\u30d9\u30fc\u30b9\u306e\u8a18\u8ff0\u3068\u3001\u30d9\u30fc\u30b9\u304b\u3089\u306e\u5dee\u5206\u306e\u8a18\u8ff0\u306b\u5206\u3051\u3066\u5408\u6210\u3059\u308b\u306e\u304c\u5178\u578b\u7684\u306a\u89e3\u6cd5\u3002 \u4f3c\u305f\u3088\u3046\u306a\u5b9a\u7fa9\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u308b\u5834\u5408\u306b\u3082\u3001\u5171\u901a\u90e8\u5206\u3092\u30d9\u30fc\u30b9\u306b\u629c\u304d\u51fa\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u91cd\u8907\u8a18\u8ff0\u306e\u624b\u9593\u3092\u907f\u3051\u3066\u30df\u30b9\u3082\u6e1b\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002 Kubernetes \u306b\u306f\u3053\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3084\u308b\u30c4\u30fc\u30eb\u304c\u8272\u3005\u3042\u308b\u3002 \u3053\u306e\u5206\u91ce\u306b\u5bfe\u3059\u308b\u30c7\u30d5\u30a1\u30af\u30c8\u306a\u540d\u524d\u306f\u7121\u3055\u3052? \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3001\u3068\u547c\u79f0\u3059\u308b\u3002","title":"Kubernetes \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#helm-chart","text":"\u4e00\u5fdc\u306e\u4e8b\u5b9f\u4e0a\u306e\u6a19\u6e96\u3002 k8s \u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u305f\u3081\u306e\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f\u5927\u4f53 Helm Chart \u5f62\u5f0f\u3067\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u3002 Helm \u305d\u306e\u3082\u306e\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u306e\u6a5f\u80fd\u3082\u3042\u3063\u305f\u308a\u3057\u305f\u306e\u3060\u304c\u3001\u3053\u3053\u3067\u306f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u90e8\u5206\u3092\u898b\u308b\u3002 \u5b9f\u614b\u306f Golang Template \u3067\u3042\u308b\u3002 \u3068\u3044\u3046\u304b Helm Chart \u306e\u66f8\u304d\u65b9\u7684\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3059\u3089\u7121\u304f\u3001Go Template \u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u8aad\u3080\u3053\u3068\u306b\u306a\u308b\u3002 Go Template \u306f\u3088\u304f\u3042\u308b HTML \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u307f\u305f\u3044\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u8a00\u8a9e\u3067\u3042\u308b\u3002 \u81ea\u5206\u3067\u8272\u3005\u66f8\u3044\u3066\u307f\u305f\u306e\u306f\u3082\u3046\u6570\u5e74\u524d\u306a\u306e\u3067\u8a73\u7d30\u306f\u66d6\u6627\u3060\u304c\u3001\u3068\u3066\u3082\u82e6\u52b4\u3057\u305f\u8a18\u61b6\u304c\u3042\u308b\u3002","title":"Helm Chart"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_1","text":"\u5358\u306b\u6587\u5b57\u5217\u3092\u7f6e\u304d\u63db\u3048\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067\u3001k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f\u3082\u3061\u308d\u3093\u3001YAML \u69cb\u9020\u306e\u30c1\u30a7\u30c3\u30af\u306f\u3057\u3066\u304f\u308c\u306a\u3044\u3002 \u751f\u6210\u3055\u308c\u305f\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u30a8\u30e9\u30fc\u3092\u898b\u3064\u3051\u308b\u306e\u304c\u5927\u5909\u3002","title":"\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u578b"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_2","text":"\u5358\u7d14\u306b\u7f6e\u63db\u3055\u308c\u308b\u306e\u3067\u3001\u30a4\u30f3\u30c7\u30f3\u30c8\u3092\u6271\u3046\u306e\u304c\u5927\u5909\u3002 1 2 3 4 resources: {{ .Values.resources | toYaml | indent 8 }} volumes: - ... {{- , -}} \u3067\u524d\u5f8c\u306e\u7a7a\u767d\u3068\u5f8c\u308d\u306e\u6539\u884c\u3092\u6d88\u305b\u308b\u306e\u3067\u305d\u308c\u3092\u4f7f\u3048\u308b\u304c\u3001 1 2 3 4 resources: {{ - .Values.resources | toYaml }} volumes: - ... if \u6587\u3092\u4ed8\u3051\u305f\u308a\u3059\u308b\u3068\u3001end \u3067\u6539\u884c\u304c\u30ba\u30ec\u306a\u3044\u3088\u3046\u306b\u6c17\u3092\u4ed8\u3051\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002 1 2 3 4 5 resources: {{ - if .Values.resources }} {{ .Values.resources | toYaml }}{{ - end }} volumes: - ... | \u3067\u57cb\u3081\u8fbc\u307f YAML/JSON \u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3068\u5730\u7344\u3067\u3042\u308b\u3002","title":"\u30a4\u30f3\u30c7\u30f3\u30c8"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_3","text":"\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u5404\u7a2e\u57fa\u672c\u578b\u304c\u4f7f\u3048\u308b\u3002 \u3057\u304b\u3057 ArgoCD \u306a\u3069\u3067 Helm Chart \u3092\u9069\u7528\u3059\u308b\u969b\u306b\u306f int \u3084 bool \u306f string \u3067\u6e21\u3055\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304b\u3063\u305f\u3002","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u578b"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_4","text":"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067\u69cb\u9020\u5316\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u304c\u5f31\u3044\u3002 \u305f\u3068\u3048\u3070\u5165\u529b\u306e array[dict] \u306b\u5bfe\u3057\u3066 filter-map \u3057\u3066\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4e00\u90e8\u3092\u751f\u6210\u3057\u305f\u3044\u30b1\u30fc\u30b9\u306a\u3069\u3067\u306f\u3001begin-end \u306e\u5bfe\u304c\u5206\u304b\u308a\u306b\u304f\u3044\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u304c\u6563\u308a\u3070\u3081\u3089\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u3002 \u3082\u3061\u308d\u3093\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u7f6e\u304f\u6642\u306f\u30a4\u30f3\u30c7\u30f3\u30c8\u306b\u6ce8\u610f\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3002","title":"\u30eb\u30fc\u30d7\u306a\u3069"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_5","text":"\u30a4\u30f3\u30c7\u30f3\u30c8\u5408\u308f\u305b\u306a\u3069\u975e\u751f\u7523\u7684\u306a\u3053\u3068\u306b\u6642\u9593\u3092\u3068\u3089\u308c\u308b\u30b9\u30c8\u30ec\u30b9\u304c\u51c4\u3044\u3002 \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3068\u3057\u3066\u3082\u305d\u3082\u305d\u3082\u6587\u5b57\u5217\u51e6\u7406\u306a\u3069\u304c\u5f31\u3044\u3002 \u4f7f\u3044\u305f\u304f\u306a\u3044\u3002 \u914d\u5e03\u30c4\u30fc\u30eb\u3068\u3057\u3066\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u306a\u306e\u3067\u5229\u7528\u306f\u3059\u308b\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#kustomize","text":"Kubernetes-sigs CLI \u30b9\u30dd\u30f3\u30b5\u30fc\u30c9\u306e\u30c4\u30fc\u30eb\u3067\u3001kubectl \u304b\u3089\u4f7f\u3048\u308b\u3002 \u30de\u30cb\u30d5\u30a7\u30b9\u30c8YAML \u306e\u90e8\u5206\u30d5\u30a1\u30a4\u30eb(\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb)\u7fa4\u3068\u3001\u305d\u308c\u3089\u306e\u7d50\u5408\u65b9\u6cd5\u3092\u6307\u793a\u3059\u308b kustomization.yaml \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u6210\u308b\u3002 \u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306f apiVersion, kind, spec \u306a\u3069\u3092\u6301\u3063\u305f kubernetes \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3069\u3093\u3069\u3093\u4e0a\u66f8\u304d\u3057\u3066\u3044\u304f\u30b9\u30bf\u30a4\u30eb\u3002 \u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u3092\u6301\u3063\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u30b9\u30bf\u30a4\u30eb\u3068\u306f\u7570\u306a\u308b\u3002 \u305d\u308c\u305e\u308c\u306e\u30ea\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u306f\u5206\u304b\u308a\u3084\u3059\u304f\u3001\u5358\u7d14\u306a\u751f\u6210\u306b\u306f\u4fbf\u5229\u3002 \u74b0\u5883\u6bce\u306b\u9069\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u3057\u304b\u3057\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u51e6\u7406\u306f\u3067\u304d\u306a\u3044\u3002","title":"Kustomize"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_6","text":"\u57fa\u672c\u7684\u306b\u91cd\u8907\u4e0a\u7b49\u3067\u66f8\u304d\u307e\u304f\u308c\u3068\u3044\u3046\u904b\u7528\u6587\u5316\u306e\u30c4\u30fc\u30eb\u3002 \u30d7\u30ed\u30b0\u30e9\u30de\u306b\u306f\u53d7\u3051\u5165\u308c\u96e3\u3044\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#jsonnet","text":"JSON \u306e\u53b3\u683c\u306a\u3068\u3053\u308d(\u30ea\u30b9\u30c8\u306e\u6700\u5f8c\u306e\u8981\u7d20\u306e\u5f8c\u30ab\u30f3\u30de\u3092\u6253\u3063\u3061\u3083\u3060\u3081\u3068\u304b)\u3092\u7de9\u304f\u3057\u305f\u8a00\u8a9e\u3002 \u95a2\u6570\u547c\u3073\u51fa\u3057\u304c\u3067\u304d\u308b\u3002\u95a2\u6570\u5b9a\u7fa9\u3082\u3067\u304d\u308b\u3002 Python \u306e\u5185\u5305\u8868\u8a18\u307f\u305f\u3044\u306a\u30ea\u30b9\u30c8/\u8f9e\u66f8\u64cd\u4f5c\u6a5f\u80fd\u3092\u5099\u3048\u3066\u308b\u3002 \u30ea\u30b9\u30c8\u64cd\u4f5c\u304c\u5f37\u3044\u3002\u3053\u308c\u3060\u3051\u3067\u904b\u7528\u6587\u5316\u306e\u30c4\u30fc\u30eb\u3067\u3067\u3067\u304d\u306a\u3044\u51e6\u7406\u304c\u3060\u3044\u305f\u3044\u51fa\u6765\u308b\u3002 \u4fbf\u5229\u6a5f\u80fd\u304c\u3042\u308b\u304c\u7279\u5fb4\u7684\u3067\u3001\u5b66\u7fd2\u304c\u5fc5\u8981\u3002 :: \u3067\u5b9a\u7fa9\u3057\u305f\u30ad\u30fc\u306f\u6700\u7d42\u51fa\u529b\u304b\u3089\u5916\u308c\u308b\u3068\u304b\u3001\u30ad\u30fc\u3092 if \u6587\u3067\u6307\u5b9a\u3057\u3066 null \u3060\u3063\u305f\u3089\u9664\u5916\u3055\u308c\u308b\u3068\u304b\u3002 \u30d1\u30e9\u30e1\u30fc\u30bf\u3082 jsonnet or json \u3067\u66f8\u3044\u3066 import \u3067\u53d6\u308a\u8fbc\u3080\u30b9\u30bf\u30a4\u30eb\u3002 Helm Template \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u6e21\u3057\u306e\u578b\u306e\u554f\u984c\u306f\u7121\u3044\u3002 ArgoCD \u3082\u5bfe\u5fdc\u3057\u3066\u308b\u3002","title":"jsonnet"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_7","text":"\u6a5f\u80fd\u7684\u306b\u306f\u6700\u5c0f\u9650\u5ea6\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u3002 \u7656\u304c\u3042\u308b\u306e\u3067\u5b66\u7fd2\u304c\u5fc5\u8981\u306a\u306e\u3068\u3001\u6700\u7d42\u7684\u306a\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306f YAML \u306b\u306a\u308b\u306e\u3067 JSON \u3068\u306e\u5bfe\u5fdc\u4ed8\u3051\u304c\u5c11\u3057\u624b\u9593\u53d6\u308b\u306e\u304c\u554f\u984c\u304b\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#ksonnet-tanka","text":"jsonnet \u306b k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u578b\u3078\u306e\u5bfe\u5fdc\u3092\u5165\u308c\u3001k8s \u30c7\u30d7\u30ed\u30a4\u6a5f\u80fd\u3092\u52a0\u3048\u305f\u3082\u306e\u3002 k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4f5c\u308a\u304b\u3089\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30b9\u30bf\u30a4\u30eb\u3082\u5f37\u5236\u3055\u308c\u308b\u3002 config \u306e\u53d6\u308a\u8fbc\u307f\u306e\u65b9\u6cd5\u3068\u304b\u3001\u30d9\u30fc\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u5dee\u5206\u9069\u7528\u306e\u65b9\u6cd5\u3068\u304b\u3002 \u30c7\u30d7\u30ed\u30a4\u6a5f\u80fd\u306f\u30b9\u30c6\u30fc\u30c8\u7ba1\u7406\u306f\u7121\u3044\u3082\u306e\u306e\u3001\u73fe\u72b6\u3068\u306e\u5dee\u5206\u3092\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002 ksonnet \u306f\u30c7\u30a3\u30b9\u30b3\u30f3\u306b\u306a\u3063\u305f\u304c\u3001Grafana \u30c1\u30fc\u30e0\u304c fork \u3057\u3066 tanka \u3092\u4f5c\u3063\u305f\u3002 ArgoCD \u306f ksonnet \u306f\u5bfe\u5fdc\u3057\u3066\u308b\u3051\u3069 tanka \u306f\u672a\u5bfe\u5fdc\u3002 tanka \u306f helm chart \u306e\u30c7\u30d7\u30ed\u30a4\u3082\u3067\u304d\u308b\u3002","title":"ksonnet / tanka"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_8","text":"k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u578b\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u306f\u5f37\u3044\u3002 helm chart \u304c\u4f7f\u3048\u308b\u306e\u3082\u3001\u6a19\u6e96\u306e\u914d\u5e03\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u3048\u3066\u4fbf\u5229\u3002 \u30c7\u30d7\u30ed\u30a4\u6642\u306e\u5dee\u5206\u8868\u793a\u3082\u4fbf\u5229\u3002 \u30c1\u30fc\u30e0\u3067\u306e\u5229\u7528\u3084\u3001\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u306b\u306f\u5c11\u3057\u6a5f\u80fd\u304c\u4e0d\u8db3\u3002 \u3042\u3068\u306f\u5206\u304b\u308a\u306b\u304f\u3044\u3068\u3044\u3046 jsonnet \u306e\u6b20\u70b9\u306f\u305d\u306e\u307e\u307e\u3042\u308b\u3002 \u500b\u4eba\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u4e00\u4eba\u904b\u7528\u62c5\u5f53\u3067\u4f7f\u3046\u306e\u306f\u6709\u308a\u304b\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#pulumi","text":"\u5143\u3005\u306f Terraform \u306e\u3088\u3046\u306a\u30af\u30e9\u30a6\u30c9\u7528 IoC \u30c4\u30fc\u30eb\u3067\u3042\u3063\u305f\u304c\u3001k8s \u306b\u3082\u5bfe\u5fdc\u3057\u305f\u3002 \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3067\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u751f\u6210\u3059\u308b\u3002 \u8a00\u8a9e\u306f Typescript, Go, C# \u306a\u3069\u5bfe\u5fdc\u3002 \u3082\u3061\u308d\u3093 k8s \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u578b\u5b9a\u7fa9\u304c\u3042\u308b\u3002\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u3067\u5f3e\u3051\u308b\u306e\u306f\u3082\u3061\u308d\u3093\u3001IDE \u306b\u3088\u308b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u652f\u63f4\u3082\u3002 \u30b9\u30c6\u30fc\u30c8\u7ba1\u7406\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u5fc5\u8981\u306a\u3088\u3046\u3060\u3002 \u30c1\u30fc\u30e0\u5229\u7528\u306f\u6599\u91d1\u304b\u304b\u308b\u3002\u7121\u6599\u67a0\u3042\u308a\u3002\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u7acb\u3066\u3089\u308c\u308b\u304b\u3082\u3002 GitOps \u3082\u3067\u304d\u308b\u3088\u3046\u3060\u3002","title":"Pulumi"},{"location":"topics/Kubernetes/2021-08-09--k8s-template/#_9","text":"\u30d7\u30ed\u30b0\u30e9\u30de\u3068\u3057\u3066\u306f\u3068\u3066\u3082\u9b45\u304b\u308c\u308b\u3002 Terraform \u3082 k8s \u5bfe\u5fdc\u3057\u3066\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001\u3042\u3063\u3061\u306f\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30eb\u6a5f\u80fd\u5f31\u3044\u3057\u6bd4\u8f03\u5bfe\u8c61\u5916\u3002 \u4fa1\u683c\u306f\u3061\u3087\u3063\u3068\u6c17\u306b\u306a\u308b\u3002 \u7121\u6599\u67a0\u304c\u3069\u306e\u7a0b\u5ea6\u304b\u6df1\u304f\u8a08\u7b97\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u307e\u3060\u5229\u76ca\u51fa\u3066\u306a\u3044\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u306b\u306f\u8e8a\u8e87\u308f\u308c\u308b\u3002 \u307e\u3060\u4f7f\u3044\u59cb\u3081\u3067\u3001\u8907\u96d1\u306a\u30b1\u30fc\u30b9\u3067\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304c\u3069\u3046\u306a\u308b\u304b\u306f\u672a\u77e5\u3002 \u304a\u305f\u3081\u3057\u3067\u3061\u3087\u3063\u3068\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30c7\u30d7\u30ed\u30a4\u306e IoC \u66f8\u3044\u3066\u307f\u305f: https://github.com/dai1975/pulumi-k8s-scaffold Input/Output \u306e\u6271\u3044\u304c\u3061\u3087\u3063\u3068\u96e3\u3057\u3044\u3002 \u3042\u3068\u3001\u8907\u6570\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5206\u5272\u3057\u305f\u5834\u5408\u306b\u3001\u57fa\u76e4\u306e\u65b9\u3092\u66f4\u65b0\u3057\u3066\u3082\u4f9d\u5b58\u3055\u308c\u308b\u5074\u306f\u81ea\u52d5\u7684\u306b\u66f4\u65b0\u3055\u308c\u306a\u3044\u306a\u3068\u3044\u3046\u3068\u3053\u308d\u3002 \u30e2\u30ce\u30b7\u30ea\u30c3\u30af\u30b9\u30bf\u30c3\u30af\u3067\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u7591\u60d1\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/Life/2021-04-25--remote-uk/","tags":["work","tax"],"text":".katex img { object-fit: fill; padding: unset; display: block; position: absolute; width: 100%; height: inherit; } remote work to UK 2021-04-25 \u3053\u306e\u4e8c\u6708\u304b\u3089 UK \u30d9\u30f3\u30c1\u30e3\u30fc\u306b\u65e5\u672c\u304b\u3089\u52e4\u52d9\u3002 UK \u4f01\u696d\u3068\u3044\u3063\u3066\u3082\u7d4c\u55b6\u8005\u304a\u3088\u3073\u958b\u767a\u9663\u306f\u65e5\u672c\u4eba\u3067\u3001\u5e02\u5834\u306b\u5408\u308f\u305b\u3066 UK \u306b\u8a2d\u7acb\u3055\u308c\u305f\u4f1a\u793e\u3002 \u50cd\u304d\u65b9\u306f\u65e5\u672c\u4f01\u696d\u3078\u306e\u30ea\u30e2\u30fc\u30c8\u3068\u3055\u307b\u3069\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u7701\u7565\u3002 \u7a0e\u91d1\u3068\u304b\u3069\u3046\u306a\u308b\u306e\u304b\u5168\u7136\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u8272\u3005\u8abf\u3079\u305f\u306e\u3067\u60c5\u5831\u5171\u6709\u3002 \u673a\u4e0a\u306e\u8a08\u7b97\u304c\u5b9f\u969b\u3069\u3046\u306a\u308b\u304b\u306e\u60c5\u5831\u3082\u8ffd\u8a18\u3057\u3066\u3044\u304f\u4e88\u5b9a\u3002 \u30b5\u30e9\u30ea\u30fc \u65e5\u672c\u4f01\u696d\u52e4\u3081\u6642\u4ee3 \u7d66\u4e0e\u660e\u7d30\u306f\u3001\u6bce\u6708\u3053\u3093\u306a\u611f\u3058 * \u652f\u7d66 610,000 * \u63a7\u9664 - \u6240\u5f97\u7a0e 32,350 - \u4f4f\u6c11\u7a0e 39,400 - \u5065\u5eb7\u4fdd\u967a 30,597 - \u4ecb\u8b77\u4fdd\u967a 5,549 - \u96c7\u7528\u4fdd\u967a 1,830 - \u539a\u751f\u5e74\u91d1 56,730 * \u5dee\u5f15\u652f\u7d66\u5408\u8a08 - 443,544 \u5e74\u984d(\u6e90\u6cc9\u5fb4\u53ce\u7968)\u3060\u3068\u3001 - \u652f\u6255\u91d1\u984d 7,270,000 - \u63a7\u9664\u5f8c\u306e\u91d1\u984d 5,443,000 - \u6240\u5f97\u63a7\u9664\u5408\u8a08 1,707,684 - \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d 326,200 UK \u4f01\u696d \u6708\u30054000GBP + \u7d4c\u8cbb\u7b49\u3002 Tax \u3067 591.40 GBP\u304c\u5929\u5f15\u304d\u3055\u308c\u3066\u3044\u308b\u3002 https://www.gov.uk/income-tax-rates \u306b\u3088\u308b\u3068\u3001\u5e74\u53ce 12570GBP \u3092\u8d8a\u3048\u305f\u5206\u306b\u5bfe\u3057\u3066\u7d2f\u9032\u7a0e\u7387\u3002 48000GBP \u3060\u3068 20%. 50270GBP \u8d8a\u3048\u308b\u3068\u4e00\u6c17\u306b 40% \u3060\u3002 \u5883\u754c\u3088\u308a\u3061\u3087\u3044\u4e0a\u3060\u3068\u304b\u306a\u308a\u624b\u53d6\u308a\u6e1b\u308a\u305d\u3046\u3060\u304c\u8abf\u6574\u306f\u7121\u3044\u306e\u304b\u306a\u3002 ( 48000 \u2212 12570 ) \u2217 0.2 = 7086 7086 / 12 = 590.5 \\begin{aligned} (48000 - 12570)* 0.2 &=& 7086 \\\\ 7086 / 12 &=& 590.5 \\\\ \\end{aligned} ( 48000 \u2212 12570 ) \u2217 0.2 7086/12 \u200b = = \u200b 7086 590.5 \u200b \u3067\u3001590.5...\u306e\u306f\u305a\u3060\u304c 591.40 GBP \u304c\u5f15\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u3002 \u5dee\u5206\u306f\u3088\u304f\u5206\u304b\u3089\u3093\u304c\u307e\u3041\u5c11\u984d\u306a\u306e\u3067\u30b9\u30eb\u30fc\u3002 \u6e90\u6cc9\u5fb4\u53ce\u3068\u5e74\u672b\u8abf\u6574\u3068\u78ba\u5b9a\u7533\u544a \u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3060\u3051\u308c\u3069\u3001\u6240\u5f97\u7a0e\u306f\u8ab2\u7a0e\u5e74\u5168\u4f53\u3067\u306e(1\u6708\u304b\u308912\u6708)\u6240\u5f97\u984d\u30fb\u63a7\u9664\u984d\u304c\u6c7a\u307e\u3063\u3066\u7a0e\u984d\u304c\u78ba\u5b9a\u3059\u308b\u3002 \u672c\u6765\u306f\u7fcc\u5e74\u4e09\u6708\u307e\u3067\u306b\u7a0e\u984d\u3092\u7533\u8acb(\u78ba\u5b9a\u7533\u544a)\u3057\u3066\u305d\u306e\u5f8c\u306b\u652f\u6255\u3046\u3093\u3060\u3051\u3069\u3001\u4f1a\u793e\u54e1\u306f\u8ab2\u7a0e\u5e74\u306e\u3046\u3061\u306b\u3042\u3089\u304b\u3058\u3081\u6bce\u6708\u5929\u5f15\u304d(\u6e90\u6cc9\u5fb4\u53ce)\u3055\u308c\u308b\u3002 \u5929\u5f15\u304d\u984d\u306f\u7d66\u4e0e\u304b\u3089\u6c7a\u3081\u3089\u308c\u305f\u4e88\u6e2c\u5024\u3067\u3001\u5b9f\u969b\u306e\u6240\u5f97\u984d\u3084\u63a7\u9664\u984d\u306f\u5e74\u672b\u3067\u78ba\u5b9a\u3059\u308b\u3002\u6e90\u6cc9\u5fb4\u53ce\u984d\u3068\u5dee\u5206\u304c\u3042\u3063\u305f\u3089\u5e74\u672b\u306b\u8abf\u6574\u3059\u308b\u3002 \u5e74\u672b\u8abf\u6574\u3067\u5bfe\u5fdc\u3057\u306a\u3044\u53ce\u5165\u3084\u63a7\u9664\u304c\u3042\u3063\u305f\u3089\u3001\u3084\u3063\u3071\u308a\u78ba\u5b9a\u7533\u544a\u3059\u308b\u3002 \u65e5\u672c\u6cd5\u4eba\u306e\u7121\u3044\u5916\u56fd\u4f01\u696d\u52e4\u3081\u306e\u5834\u5408\u306f\u3082\u3061\u308d\u3093\u6e90\u6cc9\u5fb4\u53ce\u306a\u3069\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u78ba\u5b9a\u7533\u544a\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002 \u3061\u306a\u307f\u306b\u4f4f\u6c11\u7a0e\u3082\u540c\u3058\u304f\u5e74\u9593\u53ce\u5165\u984d\u304c\u78ba\u5b9a\u3057\u3066\u7fcc\u5e74\u306b\u6255\u3046\u3002 \u3053\u3061\u3089\u306f\u30b5\u30e9\u30ea\u30fc\u30de\u30f3\u3067\u3082\u7fcc\u5e74\u6255\u3044\u3002 \u6bce\u6708\u5929\u5f15\u304d\u3055\u308c\u308b\u304c\u3001\u3053\u308c\u306f\u6628\u5e74\u306e\u6240\u5f97\u306b\u5bfe\u3059\u308b\u78ba\u5b9a\u984d\u3002\u5f53\u5e74\u306e\u4e88\u6e2c\u984d\u3092\u5929\u5f15\u304d\u3055\u308c\u3066\u308b\u6240\u5f97\u7a0e\u3068\u306f\u9055\u3046\u3002 \u6240\u5f97\u7a0e\u5929\u5f15\u304d\u306f\u5148\u6255\u3044\u3001\u4f4f\u6c11\u7a0e\u306f\u5f8c\u6255\u3044\u3002\u3060\u304b\u3089\u65b0\u793e\u4f1a\u4eba\u4e00\u5e74\u76ee\u306f\u4f4f\u6c11\u7a0e\u304c\u5929\u5f15\u304d\u3055\u308c\u306a\u3044\u306e\u3067\u3042\u308b\u3002 \u306a\u304a\u3001\u666e\u6bb5\u306f\u5f79\u6240\u9593\u9023\u643a\u306a\u3093\u304b\u3057\u306a\u3044\u306e\u306b\u3001\u6240\u5f97\u7a0e\u306e\u78ba\u5b9a\u7533\u544a(or\u5e74\u672b\u8abf\u6574)\u3092\u3059\u308c\u3070\u306a\u3093\u3068\u81ea\u52d5\u7684\u306b\u5730\u65b9\u81ea\u6cbb\u4f53\u306b\u4f1d\u3048\u3089\u308c\u308b\u3002 \u4fbf\u5229\u3060\u3002\u5fb4\u53ce\u3060\u3051\u306f\u306c\u304b\u308a\u304c\u306a\u3044\u3002 \u6e90\u6cc9\u5fb4\u53ce \u300c\u63a7\u9664\u5f8c\u306e\u91d1\u984d\u300d\u306f\u3001 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1410.htm \u306e\u3001\u300c2 \u7d66\u4e0e\u6240\u5f97\u306e\u91d1\u984d\u306e\u8a08\u7b97\u300d\u304b\u3089\u3001 \u652f\u6255\u3044\u91d1\u984d * 90% - 110\u4e07\u5186 \u3002 \u3055\u3089\u306b\u3001\u6e90\u6cc9\u5fb4\u53ce\u984d\u306f https://www.nta.go.jp/publication/pamph/gensen/zeigakuhyo2019/02.htm \u306e\u8868\u3067\u6c7a\u3081\u3089\u308c\u3066\u3044\u308b\u3002 \u793e\u4fdd\u63a7\u9664\u5f8c\u306e\u91d1\u984d\u306f\u3001 610000 - (30597 + 5549 + 56730 + 1830) = 515294\u5186 \u3002 \u300c\u7d66\u4e0e\u6240\u5f97\u306e\u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d\u8868\u300d\u304b\u3089\u3001515294\u5186\u306e\u6276\u990a0\u4eba\u306f\u300132350\u5186\u3002\u6240\u5f97\u7a0e\u5929\u5f15\u304d\u984d\u3068\u4e00\u81f4\u3002 \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d\u306f\u3001\u3053\u306e\u5929\u5f15\u304d\u306e 12 \u500d\u3068\u306f\u9055\u3046\u3088\u3046\u3060\u304c\u3001\u3069\u3046\u3044\u3046\u8a08\u7b97\u306a\u3093\u3060\u308d\u3046\u3002 \u3061\u3083\u3093\u3068\u8a08\u7b97\u3082\u3057\u3068\u304f\u3002 \u4ee4\u548c\u4e8c\u5e74(2020\u5e74)\u306e\u7a0e\u5236\u3067\u3002 \u6240\u5f97\u7a0e\u984d\u8a08\u7b97 https://www.nta.go.jp/publication/pamph/koho/kurashi/html/01_1.htm \u6240\u5f97\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u8ab2\u7a0e\u6240\u5f97 = \u6240\u5f97 \u2212 \u6240\u5f97\u63a7\u9664 \\begin{aligned} \u6240\u5f97\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * \u7a0e\u7387 \\\\ \u8ab2\u7a0e\u6240\u5f97 &=& \u6240\u5f97 - \u6240\u5f97\u63a7\u9664 \\\\ \\end{aligned} \u6240\u5f97\u7a0e \u8ab2\u7a0e\u6240\u5f97 \u200b = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u6240\u5f97 \u2212 \u6240\u5f97\u63a7\u9664 \u200b \u8ab2\u7a0e\u6240\u5f97 \u307e\u305a\u306f\u8ab2\u7a0e\u6240\u5f97\u306e\u8a08\u7b97\u3002 \u6240\u5f97\u63a7\u9664\u306f\u8272\u3005\u3042\u308b\u3051\u308c\u3069\u3001\u50d5\u306e\u5834\u5408\u306f\u793e\u4f1a\u4fdd\u967a\u3001\u57fa\u790e\u63a7\u9664\u3001\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3002 \u3042\u3068\u6c11\u9593\u4fdd\u967a\u3001\u533b\u7642\u8cbb\u3001\u3075\u308b\u3055\u3068\u7d0d\u7a0e\u3068\u304b\u3082\u3042\u308b\u3051\u3069\u7701\u7565\u3002 \u8ab2\u7a0e\u6240\u5f97 = \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97 &=& \u53ce\u5165 - \u793e\u4f1a\u4fdd\u967a\u7b49 - \u57fa\u790e\u63a7\u9664 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 \u200b = \u200b \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u200b \u793e\u4f1a\u4fdd\u967a\u63a7\u9664\u306f\u3001\u533b\u7642\u4fdd\u967a\u3001\u5e74\u91d1\u4fdd\u967a\u3001\u4ecb\u8b77\u4fdd\u967a\u3001\u52b4\u50cd\u4fdd\u967a\u306e\u793e\u4fdd\u56db\u7a2e\u3002 \u4e0a\u306e\u6708\u3005\u6255\u3063\u3066\u308b\u984d\u3092 12\u500d\u3002 \u793e\u4f1a\u4fdd\u967a\u7b49 = ( \u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1 ) \u2217 12 = ( 30597 + 5549 + 1830 + 56730 ) \u2217 12 = 1136472 \\begin{aligned} \u793e\u4f1a\u4fdd\u967a\u7b49 &=& (\u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1) * 12 \\\\ &=& (30597 + 5549 + 1830 + 56730) * 12 \\\\ &=& 1136472 \\\\ \\end{aligned} \u793e\u4f1a\u4fdd\u967a\u7b49 \u200b = = = \u200b ( \u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1 ) \u2217 12 ( 30597 + 5549 + 1830 + 56730 ) \u2217 12 1136472 \u200b \u57fa\u790e\u63a7\u9664\u306f\u53ce\u5165\u306b\u3088\u3063\u3066\u4e00\u5f8b\u3067\u30012400\u4e07\u5186\u4ee5\u4e0b\u306f 48\u4e07\u5186\u3002 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1199.htm \u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3082\u53ce\u5165\u306b\u3088\u308a\u3001727\u4e07\u5186\u3060\u3068 \u53ce\u5165*10% + 110\u4e07\u5186\u3002 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1410.htm \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 = 727 \u4e07\u5186 \u2217 10 \\begin{aligned} \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 &=& 727\u4e07\u5186*10% + 110\u4e07\u5186 = 182.7\u4e07\u5186 \\\\ \\end{aligned} \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u200b = \u200b 727 \u4e07\u5186 \u2217 10 \u200b \u3053\u308c\u3082\u6e90\u6cc9\u5fb4\u53ce\u306e\u6240\u5f97\u63a7\u9664\u984d\u3068\u5fae\u5999\u306b\u5dee\u304c\u3042\u308b\u304c\u3088\u304f\u5206\u304b\u3089\u3093\u3002 \u3061\u306a\u307f\u306b\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u306f\u3001\u81ea\u55b6\u696d\u8005\u306e\u7d4c\u8cbb\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u3068\u3001\u4ed6\u306e\u7a2e\u985e\u306e\u6240\u5f97\u3068\u306e\u8abf\u6574\u90e8\u5206\u304b\u3089\u6210\u308b\u3002 \u30ea\u30fc\u30de\u30f3\u306f\u7d4c\u8cbb\u7b97\u5b9a\u57fa\u6e96\u304c\u96e3\u3057\u3044\u306e\u3067\u6982\u7b97\u3067\u6c7a\u3081\u3089\u308c\u3066\u3044\u308b\u3002 \u591a\u91cf\u306b\u7d4c\u8cbb\u304b\u304b\u3063\u305f\u3089\u7279\u5225\u652f\u51fa\u63a7\u9664\u3063\u3066\u306e\u304c\u3067\u304d\u308b\u304c\u9069\u7528\u6761\u4ef6\u53b3\u3057\u3044\u306e\u3067\u7121\u3044\u3082\u306e\u3068\u3057\u3066\u3088\u3044\u3002 \u4ed6\u306e\u6240\u5f97\u7a2e\u5225\u3068\u306e\u8abf\u6574\u3063\u3066\u306e\u306f\u3001\u88dc\u8db3\u7387\u306e\u9ad8\u3055\u3068\u304b\u3001\u7d4c\u55b6\u8005\u3088\u308a\u7a0e\u91d1\u53b3\u3057\u3044\u3060\u308d\u3046\u3068\u304b\u3002 \u8fd1\u5e74\u306f\u30ea\u30fc\u30de\u30f3\u3088\u308a\u660e\u304b\u306b\u53b3\u3057\u3044\u975e\u6b63\u898f\u3068\u3044\u3046\u5f62\u614b\u304c\u5897\u3048\u3066\u304d\u3066\u308b\u308f\u3051\u3067\u3001\u30ea\u30fc\u30de\u30f3\u512a\u9047\u3059\u308b\u306e\u3082\u3069\u3046\u304b\u3068\u3044\u3046\u6c17\u304c\u3059\u308b\u3002 \u88dc\u8db3\u7387\u306b\u3064\u3044\u3066\u306f\u5929\u5f15\u304d\u3055\u308c\u3066\u308b\u30ea\u30fc\u30de\u30f3\u3092\u5ba5\u3081\u3066\u306a\u3044\u3067\u3001\u4ed6(\u81ea\u55b6\u696d)\u306e\u88dc\u8db3\u7387\u3092\u4e0a\u3052\u308d\u3088\u3068\u3002 \u9591\u8a71\u4f11\u984c\u3002\u5408\u308f\u305b\u3066 182.7\u4e07\u5186\u3002\u5b9f\u969b\u305d\u3093\u306a\u304b\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u5f97\u3057\u3066\u308b\u611f\u3058\u3002 \u904e\u5927\u3060\u3068\u3044\u3046\u610f\u898b\u304c\u3042\u308b\u3088\u3046\u3067\u3042\u308b\u3002\u540c\u610f\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u30021500\u4e07\u5186\u4ee5\u4e0a\u3067\u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3002 \u3061\u306a\u307f\u306b\u7a0e\u52d9\u7f72\u306b\u805e\u3044\u305f\u3068\u3053\u308d\u3001UK \u4f01\u696d\u52e4\u3081\u3067\u3082\u7d66\u4e0e\u6240\u5f97\u8005\u6271\u3044\u3067\u7d4c\u8cbb\u306f\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u306e\u984d\u306b\u306a\u308b\u3089\u3057\u3044\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u8ab2\u7a0e\u6240\u5f97 = \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 = 7270000 \u2212 1136472 \u2212 480000 \u2212 1827000 = 7270000 \u2212 3443472 = 3826528 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97 &=& \u53ce\u5165 - \u793e\u4f1a\u4fdd\u967a\u7b49 - \u57fa\u790e\u63a7\u9664 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\\\ &=& 7270000 - 1136472 - 480000 - 1827000 \\\\ &=& 7270000 - 3443472 \\\\ &=& 3826528 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 \u200b = = = = \u200b \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 7270000 \u2212 1136472 \u2212 480000 \u2212 1827000 7270000 \u2212 3443472 3826528 \u200b (- 7270000 5343000) \u6240\u5f97\u7a0e\u3001\u5fa9\u8208\u7a0e https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/2260.htm \u6240\u5f97\u7a0e\u984d = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d = \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 \\begin{aligned} \u6240\u5f97\u7a0e\u984d &=& \u8ab2\u7a0e\u6240\u5f97 * \u7a0e\u7387 - \u63a7\u9664\u984d \\\\ \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &=& \u6240\u5f97\u7a0e\u984d - \u6240\u5f97\u7a0e\u63a7\u9664\u984d \\\\ \u5fa9\u8208\u6240\u5f97\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d * 2.1% \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d \u200b = = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 \u200b \u8ab2\u7a0e\u6240\u5f97382\u4e07\u3060\u3068\u7a0e\u7387\u306f 20%. \u63a7\u9664\u984d\u306f 427,500\u5186\u3002 \u6240\u5f97\u7a0e\u984d\u63a7\u9664\u306f https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/shoto321.htm \u3067\u3001\u4f4f\u5b85\u30ed\u30fc\u30f3\u3068\u304b\u306d\u3002 \u5f8c\u3067\u51fa\u3066\u304f\u308b\u5916\u56fd\u7a0e\u984d\u63a7\u9664\u3082\u3053\u3053\u3002 \u6240\u5f97\u7a0e\u984d = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d = 3826528 \u2217 0.2 \u2212 427500 = 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d = \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d = 337805 \u2212 0 = 337805 \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 % = 337805 \u2217 0.021 = 7093 \u7d0d\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = 337805 + 7093 = 344898 \\begin{aligned} \u6240\u5f97\u7a0e\u984d &=& \u8ab2\u7a0e\u6240\u5f97 &*& \u7a0e\u7387 - \u63a7\u9664\u984d & \\\\ &=& 3826528 &*& 0.2 - 427500 &=& 337805 \\\\ \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &=& \u6240\u5f97\u7a0e\u984d &-& \u6240\u5f97\u7a0e\u63a7\u9664\u984d & \\\\ &=& 337805 &-& 0 &=& 337805 \\\\ \u5fa9\u8208\u6240\u5f97\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &*& 2.1\\% & \\\\ &=& 337805 &*& 0.021 &=& 7093 \\\\ \u7d0d\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &+& \u5fa9\u8208\u6240\u5f97\u7a0e\u984d & \\\\ &=& 337805 &+& 7093 &=& 344898 \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d \u7d0d\u7a0e\u984d \u200b = = = = = = = = \u200b \u8ab2\u7a0e\u6240\u5f97 3826528 \u6240\u5f97\u7a0e\u984d 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d 337805 \u200b \u2217 \u2217 \u2212 \u2212 \u2217 \u2217 + + \u200b \u7a0e\u7387 \u2212 \u63a7\u9664\u984d 0.2 \u2212 427500 \u6240\u5f97\u7a0e\u63a7\u9664\u984d 0 2.1% 0.021 \u5fa9\u8208\u6240\u5f97\u7a0e\u984d 7093 \u200b = = = = \u200b 337805 337805 7093 344898 \u200b \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d 326,200 \u5186\u3060\u3068 18698\u5186\u8db3\u308a\u3066\u306a\u3044\u306a\u3041\u3002 \u5b9f\u969b\u306f\u751f\u547d\u4fdd\u967a\u3068\u304b\u3042\u3063\u305f\u306e\u3067\u305d\u306e\u5206? \u307e\u3041\u5927\u4f53\u5408\u3063\u3066\u308b\u306e\u3067\u826f\u3057\u3068\u3059\u308b\u3002 \u4f4f\u6c11\u7a0e \u6240\u5f97\u306b\u95a2\u308f\u3089\u305a\u3001\u90fd\u6c11\u7a0e6%, \u533a\u6c11\u7a0e4% \u3067\u5408\u308f\u305b\u306610%. \u8ab2\u7a0e\u6240\u5f97\u306b\u304b\u304b\u308b\u3002 \u90fd\u6c11\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 6 % = 3826528 \u2217 0.1 = 229591 \u533a\u6c11\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 4 % = 3826528 \u2217 0.1 = 153061 \u4f4f\u6c11\u7a0e = \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e = 382652 \\begin{aligned} \u90fd\u6c11\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * 6\\% &=& 3826528 * 0.1 &=& 229591 \\\\ \u533a\u6c11\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * 4\\% &=& 3826528 * 0.1 &=& 153061 \\\\ \u4f4f\u6c11\u7a0e &=& \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e &=& 382652 \\\\ \\end{aligned} \u90fd\u6c11\u7a0e \u533a\u6c11\u7a0e \u4f4f\u6c11\u7a0e \u200b = = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 6% \u8ab2\u7a0e\u6240\u5f97 \u2217 4% \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e \u200b = = = \u200b 3826528 \u2217 0.1 3826528 \u2217 0.1 382652 \u200b = = \u200b 229591 153061 \u200b 382652 / 12 = 31338\u5186 \u3060\u304c\u3001\u5b9f\u969b\u306e\u6bce\u6708\u306e\u4f4f\u6c11\u7a0e\u306f 39400\u5186 \u3060\u304b\u3089\u8a08\u7b97\u7d50\u679c\u306f 8062\u5186\u5c11\u306a\u3044\u306a\u3002 \u4f4f\u6c11\u7a0e\u306e\u8ab2\u7a0e\u6240\u5f97\u306f\u524d\u5e74(=\u4e00\u6628\u5e74)\u306e\u984d\u3060\u304c\u3001\u7dcf\u6240\u5f97\u306f\u3055\u3089\u306b\u5c11\u306a\u304b\u3063\u305f\u3088\u3046\u306a\u3002 \u7d50\u69cb\u5927\u304d\u306a\u5dee\u306a\u306e\u3067\u3061\u3083\u3093\u3068\u5408\u3046\u3088\u3046\u306b\u8a08\u7b97\u3057\u306a\u304a\u3057\u305f\u3044\u304c\u307e\u305f\u4eca\u5ea6\u3002 UK \u4f01\u696d\u52e4\u3081\u306e\u6240\u5f97\u7a0e \u3055\u3066\u672c\u756a\u3002UK \u4f01\u696d\u52e4\u3081\u306f\u3069\u3046\u306a\u308b\u304b\u3002 \u6240\u5f97\u7a0e\u3001\u4f4f\u6c11\u7a0e \u5916\u56fd\u7a0e\u984d\u63a7\u9664 \u5916\u56fd\u306b\u6240\u5f97\u7a0e\u3092\u652f\u6255\u3063\u305f\u5206\u3092\u3001\u65e5\u672c\u306e\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3051\u308b\u5236\u5ea6\u304c\u3042\u308b\u3002 \u5c45\u4f4f\u8005\u306b\u4fc2\u308b\u5916\u56fd\u7a0e\u984d\u63a7\u9664 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1240.htm \u3061\u306a\u307f\u306b\u7a0e\u52d9\u7f72\u306b\u805e\u3044\u3066\u3082\u6559\u3048\u3066\u304f\u308c\u306a\u304b\u3063\u305f\u3002\u30af\u30bd\u304c\u3002 \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d = \u6240\u5f97\u7a0e\u984d \u2217 ( \u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d ) \\begin{aligned} \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d &=& \u6240\u5f97\u7a0e\u984d * (\u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d) \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d \u200b = \u200b \u6240\u5f97\u7a0e\u984d \u2217 ( \u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d ) \u200b \u3053\u306e\u5f0f\u3067\u3044\u3046\u6240\u5f97\u7a0e\u984d\u306f\u7a0e\u984d\u63a7\u9664\u3092\u5f15\u3044\u305f\u984d\u3001\u8981\u3059\u308b\u306b\u5b9f\u969b\u306b\u6255\u3046\u7a0e\u984d\u306d\u3002 \u53f3\u5074\u306e\u62ec\u5f27\u306e\u4e2d\u306f\u3001\u7dcf\u53ce\u5165\u306b\u5bfe\u3059\u308b\u5916\u56fd\u6240\u5f97\u306e\u6bd4\u7387\u3092\u51fa\u3057\u3066\u3044\u308b\u3002 \u305d\u308c\u3092\u6240\u5f97\u7a0e\u984d\u306b\u639b\u3051\u305f\u5206\u304c\u63a7\u9664\u9650\u5ea6\u984d\u306a\u308f\u3051\u3067\u3001\u3064\u307e\u308a\u6240\u5f97\u306e\u3046\u3061\u306e\u5916\u56fd\u6240\u5f97\u306e\u5272\u5408\u3092\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u3002 \u5168\u90e8\u5916\u56fd\u6240\u5f97\u306a\u3089\u62ec\u5f27\u306e\u4e2d\u306f 1 \u306b\u306a\u308a\u3001\u9650\u5ea6\u984d\u306f\u6240\u5f97\u7a0e\u984d\u306e100%\u306b\u306a\u308b\u3002 \u5916\u56fd\u6240\u5f97\u63a7\u9664\u984d\u306f\u3001\u307e\u305a\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3044\u3066\u4f59\u3063\u305f\u3089\u5fa9\u8208\u7a0e\u304b\u3089\u5f15\u3051\u308b\u3002 \u3055\u3089\u306b\u4f59\u3063\u305f\u3089\u3001 https://www.nta.go.jp/taxes/shiraberu/shinkoku/tebiki/2018/pdf/040.pdf 4-(1) \u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306b\u3001\u4f4f\u6c11\u7a0e\u304b\u3089\u3082\u5f15\u3051\u308b\u3002 \u90fd\u304c\u629c\u3051\u3066\u308b\u3051\u3069\u3001\u90fd\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d\u306e 12%, \u533a\u6c11\u7a0e\u306f 18% \u3089\u3057\u3044\u3002 \u4f4f\u6c11\u7a0e\u306e\u8a08\u7b97\u306f\u8ab2\u7a0e\u6240\u5f97\u57fa\u6e96\u306a\u306e\u306b\u3001\u63a7\u9664\u9650\u5ea6\u984d\u306e\u8a08\u7b97\u306f\u6240\u5f97\u7a0e\u984d\u57fa\u6e96? \u4f4f\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u3088\u308a\u63a7\u9664\u5c11\u306a\u3044\u306e\u306b\u3001\u5916\u56fd\u7d0d\u7a0e\u5206\u306e\u8abf\u6574\u91d1\u3092\u7b97\u51fa\u3059\u308b\u6642\u306f\u56fd\u7a0e\u306e\u63a7\u9664\u984d\u3092\u4f7f\u3046\u306e\u306f\u30ba\u30eb\u3044\u306a\u3041\u3002 \u3055\u3066\u6240\u5f97\u7a0e\u306f\u8ab2\u7a0e\u6240\u5f97\u306e20%\u3001\u90fd\u6c11\u7a0e/\u533a\u6c11\u7a0e\u306f\u8ab2\u7a0e\u6240\u5f97\u306e6%/4% \u306a\u306e\u3067\u3001\u7a0e\u7387\u306b\u4ed8\u968f\u3059\u308b\u63a7\u9664\u5206\u304c\u7121\u3051\u308c\u3070\u90fd\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u306e 6/20 = 30%, \u533a\u6c11\u7a0e\u306f 4/20=20% \u76f8\u5f53\u3002 \u4f4f\u6c11\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u304c\u6240\u5f97\u7a0e\u63a7\u9664\u9650\u5ea6\u984d\u306e 12%/18% \u3067\u306f\u3001\u4f4f\u6c11\u7a0e\u306e\u5168\u984d\u306f\u63a7\u9664\u3067\u304d\u306a\u3055\u305d\u3046\u3067\u3042\u308b\u3002 \u4e00\u5fdc\u3001\u3055\u3089\u306b\u4f59\u3063\u305f\u5206\u306f\u3001\u4e09\u5e74\u7e70\u308a\u8d8a\u3057\u3066\u6240\u5f97\u7a0e\u304b\u3089\u63a7\u9664\u3067\u304d\u308b\u3088\u3046\u3060\u304c\u3001\u3042\u3093\u307e\u610f\u5473\u306a\u3044\u306a\u3002 \u7a0e\u984d\u306e\u6bd4\u8f03 UK \u984d\u306f 12570GBP \u5f15\u3044\u3066 20%. \u5f15\u304f\u524d\u306e\u984d\u304b\u3089\u306e\u6bd4\u7387\u3092\u51fa\u3059\u3068\u3001 ( ( 48000 \u2212 12570 ) \u2217 0.2 ) / 48000 = 7086 / 48000 = 0.1476 \\begin{aligned} ((48000 - 12570) * 0.2) / 48000 &=& 7086 / 48000 &=& 0.1476 \\\\ \\end{aligned} (( 48000 \u2212 12570 ) \u2217 0.2 ) /48000 \u200b = \u200b 7086/48000 \u200b = \u200b 0.1476 \u200b \u65e5\u672c\u306e\u5834\u5408\u3082\u63a7\u9664\u3084\u3089\u8272\u3005\u3042\u308b\u304c\u3001\u524d\u5e74\u306e\u53ce\u5165\u3068\u7a0e\u984d\u306e\u6bd4\u7387\u51fa\u3059\u3068\u3001 ( \u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u7a0e\u984d + \u4f4f\u6c11\u7a0e ) / \u7dcf\u6240\u5f97\u984d = ( 344898 + 382652 ) / 7270000 = 0.1000 \\begin{aligned} & & (\u6240\u5f97\u7a0e\u984d+\u5fa9\u8208\u7a0e\u984d+\u4f4f\u6c11\u7a0e) / \u7dcf\u6240\u5f97\u984d & & \\\\ &=& (344898+382652) / 7270000 &=& 0.1000 \\\\ \\end{aligned} \u200b = \u200b ( \u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u7a0e\u984d + \u4f4f\u6c11\u7a0e ) / \u7dcf\u6240\u5f97\u984d ( 344898 + 382652 ) /7270000 \u200b = \u200b 0.1000 \u200b \u3067\u3001UK \u306e\u65b9\u304c\u6240\u5f97\u7a0e\u306e\u7a0e\u7387\u304c\u9ad8\u3044\u306e\u304b\u3057\u3089? UK \u5929\u5f15\u304d\u5206\u3067\u6240\u5f97\u7a0e\u306f\u8cc4\u3048\u305d\u3046\u3067\u3042\u308b\u3002\u4f4f\u6c11\u7a0e\u306f\u3069\u3046\u304b\u306a\u30fc\u3002 \u307e\u3041\u305d\u3082\u305d\u3082\u4f4f\u6c11\u7a0e\u306f\u53bb\u5e74\u306e\u53ce\u5165\u306b\u5bfe\u3059\u308b\u652f\u6255\u3044\u3060\u304b\u3089\u4e00\u5e74\u306f\u6255\u308f\u306a\u304d\u3083\u3060\u3051\u3069... \u5916\u56fd\u7a0e\u984d\u63a7\u9664\u306e\u8a08\u7b97 \u5e74\u53ce 48000GBP. \u7a0e\u91d1\u8a08\u7b97\u306f\u3068\u308a\u3042\u3048\u305a\u53bb\u5e74\u306e\u3092\u4f7f\u304a\u3046\u3002\u53ce\u5165\u304c\u540c\u3058\u304f\u306a\u308b\u70ba\u66ff\u30ec\u30fc\u30c8\u306f\u3001 7270000 / 48000 = 151.45 \u5186 / / \u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \\begin{aligned} 7270000 / 48000 = 151.45 \u5186 \\\\ //\u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \\\\ \\end{aligned} 7270000/48000 = 151.45 \u5186 // \u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \u200b 4\u670825\u65e5\u73fe\u5728 149.70 \u5186\u3060\u304b\u3089\u305d\u3093\u306a\u30ba\u30ec\u3066\u306a\u3044\u3002 \u7a0e\u984d\u306f 7086GBP \u3060\u304b\u3089\u3001 7086 * 151.45 = 1073134 \u5186 \u76f8\u5f53\u3002 \u793e\u4fdd\u3082\u540c\u3058\u3060\u3068\u3057\u3066\u3001\u5b9f\u969b\u306e\u5024\u3068\u30ba\u30ec\u304c\u3042\u3063\u305f\u304c\u8a08\u7b97\u306b\u3088\u308b\u3068\u3001 \u8ab2\u7a0e\u6240\u5f97 : 3 , 826 , 528 \u5186 \u6240\u5f97\u7a0e : 337 , 805 \u5186 \u5fa9\u8208\u7a0e : 7 , 093 \u5186 \u90fd\u6c11\u7a0e : 229 , 591 \u5186 \u533a\u6c11\u7a0e : 153 , 061 \u5186 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97: & 3,&826,&528 &\u5186 \\\\ \u6240\u5f97\u7a0e: & &337,&805 &\u5186 \\\\ \u5fa9\u8208\u7a0e: & & 7,&093 &\u5186 \\\\ \u90fd\u6c11\u7a0e: & &229,&591 &\u5186 \\\\ \u533a\u6c11\u7a0e: & &153,&061 &\u5186 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 : \u6240\u5f97\u7a0e : \u5fa9\u8208\u7a0e : \u90fd\u6c11\u7a0e : \u533a\u6c11\u7a0e : \u200b 3 , \u200b 826 , 337 , 7 , 229 , 153 , \u200b 528 805 093 591 061 \u200b \u5186 \u5186 \u5186 \u5186 \u5186 \u200b \u5168\u984d\u304c\u5916\u56fd\u6240\u5f97\u3068\u3057\u3066\u3001\u5404\u5916\u56fd\u63a7\u9664\u9650\u5ea6\u984d\u3092\u8a08\u7b97\u3057\u3066\u3044\u304f\u3068\u3001 \u5916\u56fd\u6240\u5f97\u7a0e\u984d = 7086 \u2217 151.45 = 1073134 \u6240\u5f97\u7a0e\u984d = 337805 \u2212 m i n ( 1073134 , 337805 ) = = 0 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 1073134 \u2212 337805 = 735326 \u5fa9\u8208\u7a0e = 7093 \u2212 m i n ( 735326 , 7393 ) = 0 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 735326 \u2212 7093 = 728233 \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d = 337805 \u2217 0.12 = 40536 \u90fd\u6c11\u7a0e = 229591 \u2212 m i n ( 728233 , 40536 ) = 189055 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 728233 \u2212 40536 = 687697 \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d = 337805 \u2217 0.18 = 60804 \u533a\u6c11\u7a0e = 153061 \u2212 m i n ( 687697 , 60804 ) = 92257 \u6b8b\u984d = 687697 \u2212 60804 = 626893 \\begin{aligned} \u5916\u56fd\u6240\u5f97\u7a0e\u984d &=& 7086 * 151.45 &=& 1073134 \\\\ \u6240\u5f97\u7a0e\u984d &=& 337805 - min(1073134, 337805) &=& = 0 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 1073134 - 337805 &=& 735326 \\\\ \\\\ \u5fa9\u8208\u7a0e &=& 7093 - min(735326, 7393) &=& 0 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 735326 - 7093 &=& 728233 \\\\ \\\\ \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d &=& 337805 * 0.12 &=& 40536 \u90fd\u6c11\u7a0e &=& 229591 - min(728233, 40536) &=& 189055 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 728233 - 40536 &=& 687697 \\\\ \\\\ \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d &=& 337805 * 0.18 = 60804 \u533a\u6c11\u7a0e &=& 153061 - min(687697, 60804) = 92257 \\\\ \u6b8b\u984d &=& 687697 - 60804 = 626893 \\\\ \\end{aligned} \u5916\u56fd\u6240\u5f97\u7a0e\u984d \u6240\u5f97\u7a0e\u984d \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u5fa9\u8208\u7a0e \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d \u6b8b\u984d \u200b = = = = = = = = = \u200b 7086 \u2217 151.45 337805 \u2212 min ( 1073134 , 337805 ) 1073134 \u2212 337805 7093 \u2212 min ( 735326 , 7393 ) 735326 \u2212 7093 337805 \u2217 0.12 728233 \u2212 40536 337805 \u2217 0.18 = 60804 \u533a\u6c11\u7a0e 687697 \u2212 60804 = 626893 \u200b = = = = = = = = \u200b 1073134 = 0 735326 0 728233 40536 \u90fd\u6c11\u7a0e 687697 153061 \u2212 min ( 687697 , 60804 ) = 92257 \u200b = \u200b 229591 \u2212 min ( 728233 , 40536 ) \u200b = \u200b 189055 \u200b UK \u306b\u304b\u306a\u308a\u53d6\u3089\u308c\u305f\u4e0a\u306b\u3001\u65e5\u672c\u306b\u306f\u4f4f\u6c11\u7a0e\u309230\u4e07\u5186\u8fd1\u304f\u6255\u308f\u306a\u3044\u3068\u306a\u3089\u3093\u306e\u304b\u30fc\u3002 \u307e\u3041\u4f4f\u6c11\u7a0e\u306f\u5c45\u4f4f\u30b5\u30fc\u30d3\u30b9\u4ee3\u307f\u305f\u3044\u306a\u3082\u3093\u3060\u304b\u3089\u4ed5\u65b9\u306a\u3044\u304b\u3002 \u3061\u306a\u307f\u306b UK \u306e\u4f4f\u6c11\u7a0e\u307f\u305f\u3044\u306a\u3084\u3064\u306f\u5bb6\u306b\u304b\u3051\u3089\u308c\u308b\u305d\u3046\u3060\u304b\u3089\u6255\u308f\u306a\u304f\u3066\u3059\u3080\u3002 \u305d\u3046\u8003\u3048\u308b\u3068 UK \u306e\u9ad8\u3044\u6240\u5f97\u7a0e\u304b\u3089\u65e5\u672c\u306e\u4f4f\u6c11\u7a0e\u3092\u63a7\u9664\u3067\u304d\u308b\u306e\u306f\u3080\u3057\u308d\u7533\u3057\u308f\u3051\u306a\u3044\u611f\u3058\u3082\u3059\u308b\u3002 \u7dcf\u984d\u3060\u3068\u6240\u5f97\u7a0e+\u4f4f\u6c11\u7a0e\u306f 1073134 + 189055 + 92257 = 1354446 \u5186 \u6255\u3046\u3053\u3068\u306b\u306a\u308b\u3002 \u65e5\u672c\u4f01\u696d\u52e4\u3081\u306e\u5834\u5408\u306e 344898 + 382652 = 727550 \u5186 \u304b\u3089\u5b9f\u306b 626896\u5186 \u3082\u30a2\u30c3\u30d7\u3002 \u6240\u5f97\u6bd4\u3060\u3068 686896 / 7270000 = 0.08623 \u30a2\u30c3\u30d7\u3001 \u7a0e\u984d\u6bd4\u3060\u3068 1354446 / 727550 = 1.861 \u500d\u306b\u3002 // \u306a\u304a\u3001UK \u8ee2\u8077\u4e00\u5e74\u76ee\u306f\u3001\u6628\u5e74\u306e\u6240\u5f97\u306b\u5bfe\u3059\u308b\u65e5\u672c\u306e\u4f4f\u6c11\u7a0e\u306f\u5916\u56fd\u63a7\u9664\u5f15\u304b\u308c\u305a\u306b\u305d\u306e\u307e\u307e\u304b\u304b\u308b\u304b\u3089\u3001\u304a\u3088\u305d10\u4e07\u5186\u30d7\u30e9\u30b9\u3002 \u6240\u5f97\u7a0e\u7387\u306f\u3069\u3063\u3061\u3082 20% \u3060\u304c\u3001\u65e5\u672c\u306f\u6240\u5f97\u63a7\u9664(\u57fa\u790e\u63a7\u9664+\u7d66\u4e0e\u6240\u5f97\u63a7\u9664+\u793e\u4f1a\u4fdd\u967a)\u304c344\u4e07\u5186\u306b\u306a\u308b\u306e\u304c\u30c7\u30ab\u3044\u306e\u304b\u306a\u3002 UK \u306f 12570GBP = 190\u4e07\u5186 \u3057\u304b\u5f15\u304b\u308c\u306a\u3044\u3002 \u3044\u3084\u793e\u4f1a\u4fdd\u967a\u306e\u63a7\u9664\u304c 113\u4e07\u5186\u3060\u304b\u3089\u3001\u305d\u308c\u52d8\u6848\u3059\u308c\u3070\u4f3c\u305f\u3088\u3046\u306a\u3082\u3093\u304b\u3002 \u3058\u3083\u3041\u7a0e\u7387\u306b\u4ed8\u968f\u3059\u308b\u63a7\u9664\u984d\u306e 63\u4e07\u5186\u304c\u3067\u304b\u3044\u306e\u304b\u3002\u3061\u3087\u3046\u3069 UK \u3068\u306e\u5dee\u984d\u76f8\u5f53\u3060\u3002 \u7a0e\u7387\u4ed8\u968f\u63a7\u9664\u306e42.7\u4e07\u5186\u3068\u3001\u793e\u4f1a\u4fdd\u967a113\u4e07\u5186\u3068\u305d\u3082\u305d\u3082\u306e\u6240\u5f97\u63a7\u9664\u5dee30\u4e07\u5186\u306e\u7a0e\u91d120%\u306728.6\u4e07\u5186\u3001\u5408\u8a0870\u4e07\u5186\u7a0b\u306e\u6240\u5f97\u7a0e\u304c\u5897\u3048\u308b\u611f\u3058\u304b\u3002 \u4f4f\u6c11\u7a0e\u306f\u5916\u56fd\u63a7\u9664\u306710\u4e07\u5186\u6e1b\u3063\u3066\u3001\u8a0860\u4e07\u5186\u306e\u7a0e\u91d1\u304c\u5897\u3048\u308b\u3002 \u6240\u5f97\u7a0e\u3001\u4f4f\u6c11\u7a0e\u307e\u3068\u3081 UK \u306e\u7a0e\u7387\u3092\u898b\u308b\u300240% \u8d8a\u3059\u3088\u3046\u306a\u3089\u6ce8\u610f\u3002 \u793e\u4f1a\u4fdd\u967a\u6599\u5206\u304c UK \u6240\u5f97\u7a0e\u304b\u3089\u5f15\u304b\u308c\u305a\u3001\u3055\u3089\u306b\u7d2f\u9032\u7a0e\u7387\u9593\u306e\u8abf\u6574\u63a7\u9664\u3082\u7121\u3044\u306e\u3067\u305d\u306e\u5206\u7dcf\u984d\u304c\u9ad8\u3044\u3002 \u304a\u3088\u305d\u793e\u4fdd110\u4e07\u3001\u6240\u5f97\u63a7\u9664\u5dee30\u4e07\u306e20% \u306728\u4e07\u5186\u3001\u305d\u308c\u306b\u8abf\u6574\u63a7\u966440\u4e07\u52a0\u3048\u306670\u4e07\u5186\u307b\u3069\u5897\u3048\u308b\u3002 \u65e5\u672c\u306e\u6240\u5f97\u7a0e\u306f\u3053\u306e UK \u7d0d\u7a0e\u5206\u3092\u5dee\u3057\u5f15\u3044\u3066\u30bc\u30ed\u306b\u306a\u308b\u304c\u3001\u4f4f\u6c11\u7a0e\u306f10\u4e07\u5186\u307b\u3069\u3057\u304b\u5f15\u304b\u308c\u306a\u3044\u3002 \u4f4f\u6c11\u7a0e\u306f\u521d\u5e74\u5ea6\u306f\u5f15\u3051\u306a\u3044\u306e\u3067\u305d\u306e\u307e\u307e\u3068\u898b\u3068\u304f\u3068\u3001\u6240\u5f97\u7a0e\u5dee\u306e70\u4e07\u5186\u5206\u30a2\u30c3\u30d7\u3002 \u793e\u4f1a\u4fdd\u967a \u7a0e\u91d1\u306f\u7d66\u4e0e\u6240\u5f97\u8005\u6271\u3044\u3060\u3063\u305f\u304c\u3001\u793e\u4f1a\u4fdd\u967a\u306f\u30d5\u30ea\u30fc\u30e9\u30f3\u30b9\u6271\u3044\u306b\u306a\u308b\u3002 \u65e5\u672c\u306e\u793e\u4f1a\u4fdd\u967a\u5236\u5ea6\u306f\u4f1a\u793e\u306b\u7ba1\u7406\u3092\u4efb\u305b\u3066\u3044\u308b\u304b\u3089\u306d\u3002 \u8ee2\u8077\u3057\u307e\u304f\u308b\u4eba\u306b\u306f\u9762\u5012\u306a\u3053\u3068\u3053\u306e\u4e0a\u306a\u3044\u3002 \u5e74\u91d1\u8a18\u9332\u3082\u51fa\u751f\u7387\u4e88\u6e2c\u3082\u967d\u6027\u8005\u96c6\u8a08\u3082\u308d\u304f\u306b\u3067\u304d\u306a\u3044\u539a\u751f\u7701\u304b\u3089\u30c7\u30fc\u30bf\u51e6\u7406\u306e\u696d\u52d9\u53d6\u308a\u4e0a\u3052\u3066\u3001\u6b73\u5165\u5e81\u3068\u7d71\u8a08\u5e81\u4f5c\u3063\u3066\u79fb\u7ba1\u3057\u3066\u304f\u3093\u306a\u3044\u304b\u306a\u3041\u3002 \u5065\u5eb7\u4fdd\u967a\u3001\u4ecb\u8b77\u4fdd\u967a \u65e5\u672c\u4f01\u696d\u6642\u4ee3 \u4ee5\u524d\u306e\u5065\u4fdd\u306f\u5354\u4f1a\u3051\u3093\u307d(\u5168\u56fd\u5065\u5eb7\u4fdd\u967a\u5354\u4f1a)\u3060\u3063\u305f\u3002 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r2/ippan_3/r20913tokyo.pdf \u306b\u3088\u308b\u3068\u3001\u670861\u4e07\u5186\u3060\u3068\u7b49\u7d1a34(31)\u3067\u6a19\u6e96\u6708\u984d62\u4e07\u5186\u3002 \u533b\u7642\u4fdd\u967a\u306f 9.87% \u3067 61194\u5186\u3002\u4ecb\u8b77\u4fdd\u967a \u306f 1.79% \u3067 11098\u5186\u3002 \u4e8b\u696d\u8005\u6298\u534a\u3057\u3066\u304f\u308c\u308b\u306e\u3067 30597\u5186 \u3068 5549\u5186\u3068\u306a\u308a\u3001\u660e\u7d30\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3002 \u5408\u308f\u305b\u3066 36146\u5186\u3002\u5e74\u984d\u3060\u3068 433752 \u5186\u3002 \u3061\u306a\u307f\u306b\u533b\u7642\u4fdd\u967a 9.87% \u306e\u3046\u3061 3.53 \u30dd\u30a4\u30f3\u30c8\u5206\u306f\u7279\u5b9a\u4fdd\u967a\u6599\u3001\u4e3b\u306b\u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1\u3068\u3044\u3046\u3084\u3064\u3060\u3002 \u3064\u307e\u308a\u533b\u7642\u4fdd\u967a\u90e8\u5206\u306f 6.34% \u306b\u306a\u308b\u3002 \u56fd\u4fdd\u79fb\u884c\u306e\u5834\u5408 \u4fdd\u967a\u6599\u306f\u5e02\u533a\u5358\u4f4d\u3089\u3057\u3044\u3002\u6e0b\u8c37\u533a\u306f https://www.city.shibuya.tokyo.jp/kurashi/kokuho_nenkin/kokuho/hokenryo_26.html \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d\u306b\u6240\u5f97\u5272\u3092\u639b\u3051\u3066\u5747\u7b49\u5272\u3092\u8db3\u3059\u3002 \u5747\u7b49\u5272\u3092\u5dee\u3057\u5f15\u304f\u3068\u3001\u533b\u7642\u4fdd\u967a 7.14%, \u652f\u63f4\u91d12.29%, \u4ecb\u8b77\u4fdd\u967a1.94% \u3067\u652f\u63f4\u91d1\u4ee5\u5916\u306f\u5354\u4f1a\u3051\u3093\u307d\u3088\u308a\u9ad8\u3044\u306a\u3002 \u652f\u63f4\u91d1\u304c\u5b89\u3044\u306e\u306f\u533a\u5185\u306f\u82e5\u8005\u304c\u591a\u3044\u304b\u3089\u304b\u306a? \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d\u306f\u3001\u53ce\u5165\u304b\u3089\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3068\u57fa\u790e\u63a7\u9664\u3092\u5f15\u3044\u305f\u984d\u3002 \u6599\u7387\u306a\u3069\u306f\u3082\u3061\u308d\u3093\u3001\u3053\u306e\u57fa\u790e\u984d\u306e\u8a08\u7b97\u3067\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3092\u5f15\u304f\u304b\u3069\u3046\u304b\u3082\u81ea\u6cbb\u4f53\u3067\u5dee\u304c\u3042\u308b\u3088\u3046\u3060\u3002 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d = \u53ce\u5165 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u2212 \u57fa\u790e\u63a7\u9664 = 7270000 \u2212 1827000 \u2212 480000 = 4963000 \u533b\u7642\u4fdd\u967a = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 7.14 \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 2.29 \u4ecb\u8b77\u4fdd\u967a = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 1.94 \u7dcf\u984d = 394258 + 126552 + 111882 = 632692 \\begin{aligned} \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d &=& \u53ce\u5165 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 - \u57fa\u790e\u63a7\u9664 &=& 7270000 - 1827000 - 480000 &=& 4963000 \\\\ \u533b\u7642\u4fdd\u967a &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 7.14% + 39900 &=& 394258 \\\\ \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 2.29% + 12900 &=& 126552 \\\\ \u4ecb\u8b77\u4fdd\u967a &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 1.94% + 15600 &=& 111882 \\\\ \u7dcf\u984d &=& 394258 + 126552 + 111882 = 632692 \\\\ \\end{aligned} \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u533b\u7642\u4fdd\u967a \u200b = = \u200b \u53ce\u5165 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u2212 \u57fa\u790e\u63a7\u9664 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 7.14 \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 \u200b = = \u200b 7270000 \u2212 1827000 \u2212 480000 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 2.29 \u4ecb\u8b77\u4fdd\u967a \u200b = = \u200b 4963000 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 1.94 \u7dcf\u984d \u200b = \u200b 394258 + 126552 + 111882 = 632692 \u200b \u6240\u5f97\u63a7\u9664\u304c\u52b9\u3044\u3066\u308b\u3051\u3069\u3082\u3001\u4e8b\u696d\u8005\u6298\u534a\u5206\u304c\u3067\u304b\u304f\u3066\u5354\u4f1a\u3051\u3093\u307d\u306e\u65b9\u304c\u652f\u6255\u3044\u984d\u306f20\u4e07\u5186\u3082\u5b89\u3044\u3084\u3002 \u5354\u4f1a\u3051\u3093\u307d\u4efb\u610f\u7d99\u7d9a \u5354\u4f1a\u3051\u3093\u307d\u306f\u4efb\u610f\u7d99\u7d9a\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u3063\u3066\u3001\u9000\u8077\u5f8c2\u5e74\u9593\u306f\u52a0\u5165\u3057\u7d9a\u3051\u3089\u308c\u308b\u3002 https://www.kyoukaikenpo.or.jp/shibu/miyagi/cat080/20170914028/ \u57fa\u672c\u7684\u306b\u306f\u4e8b\u696d\u8005\u6298\u534a\u5206\u304c\u7121\u304f\u306a\u308b\u304b\u3089\u500d\u306b\u306a\u308b\u304c\u3001 https://www.kyoukaikenpo.or.jp/g6/cat650/r321/#q1 \u6a19\u6e96\u6708\u984d\u5831\u916c\u306f30\u4e07\u5186\u304c\u4e0a\u9650\u306b\u306a\u308b\u3002 \u4ee4\u548c3\u5e74\u3060\u3068 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r3/ippan/r30213tokyo.pdf \u7b49\u7d1a22(19) \u3067\u3001\u533b\u7642\u3001\u652f\u63f4\u3001\u4ecb\u8b77\u5408\u308f\u305b\u3066\u6708\u984d34920\u5186\u3002\u5e74\u984d419040\u5186\u3002 \u6e0b\u8c37\u533a\u3088\u308a\u3082 20\u4e07\u5186\u5b89\u304f\u3001\u65e5\u672c\u4f01\u696d\u52e4\u52d9\u6642\u4ee3\u3088\u308a\u3082 1.4\u4e07\u5186\u5b89\u3044\u3002 \u5065\u5eb7\u4fdd\u967a\u307e\u3068\u3081 \u4efb\u610f\u7d99\u7d9a\u4f7f\u3048\u3070\u307b\u307c\u540c\u984d\u3002 \u5e74\u91d1\u4fdd\u967a \u4f1a\u793e\u54e1\u3060\u3068 \u539a\u751f\u5e74\u91d1+\u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1+\u4f01\u696d\u5e74\u91d1\u3002 \u81ea\u55b6\u696d\u3060\u3068\u56fd\u6c11\u5e74\u91d1+\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1+\u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1\u3002 \u539a\u751f\u5e74\u91d1\u306f\u3001\u81ea\u55b6\u696d\u306e\u56fd\u6c11\u5e74\u91d1+\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u306b\u76f8\u5f53\u3002 \u4f01\u696d\u5e74\u91d1\u306f\u3001\u4f01\u696d\u72ec\u81ea\u306b\u904b\u55b6\u3057\u3066\u308b\u3084\u3064\u3002\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u30b9\u30eb\u30fc\u3002 \u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1\u306f iDeCo \u3063\u3066\u3084\u3064\u3002 \u65e5\u672c\u4f01\u696d\u6642\u4ee3 \u539a\u751f\u5e74\u91d1\u3082\u5354\u4f1a\u3051\u3093\u307d\u7ba1\u638c\u3067\u3001 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r2/ippan_3/r20913tokyo.pdf \u57fa\u91d1\u306b\u306f\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u6a19\u6e96\u6708\u984d62\u4e07\u5186\u306e 18.3% \u3092\u4e8b\u696d\u8005\u6298\u534a\u3002 620000 \u2217 0.183 / 2 = 113460 / 2 = 56730 \\begin{aligned} 620000 * 0.183 / 2 = 113460 / 2 = 56730 \\\\ \\end{aligned} 620000 \u2217 0.183/2 = 113460/2 = 56730 \u200b \u5236\u5ea6\u306e\u9055\u3044\u306f\u304a\u3044\u3068\u3044\u3066\u3001\u307e\u305a\u6298\u534a\u5206\u306e 56730 \u5186\u304c UK \u52e4\u3081\u306b\u3088\u308b\u53ce\u5165\u6e1b\u3068\u307f\u306a\u305b\u308b\u3002 \u539a\u751f\u5e74\u91d1\u306f\u6bce\u670856730\u5186\u3067\u3042\u3063\u305f\u304c\u3001\u3053\u308c\u306f\u56fd\u6c11\u5e74\u91d1\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002 \u56fd\u6c11\u5e74\u91d1\u306f\u5b9a\u984d16540\u5186\u306a\u306e\u3067\u3001\u5dee\u3057\u5f15\u304f\u3068 113460 - 16540 = 96920 \u5186 \u304c\u4e8c\u968e\u90e8\u5206\u3002 \u540c\u7b49\u306e\u639b\u3051\u91d1\u3092\u51fa\u3059\u306a\u3089\u3001\u670896920\u5186\u3092\u4e8c\u968e\u90e8\u5206\u306b\u6255\u3046\u3002 \u56fd\u6c11\u5e74\u91d1 \u57fa\u672c\u7684\u306b\u56fd\u6c11\u5e74\u91d1\u306f\u4f1a\u793e\u54e1\u3067\u3082\u81ea\u55b6\u696d\u3067\u3082\u540c\u3058\u306716540\u5186\u3002 \u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u306b\u5165\u3089\u306a\u3044\u5834\u5408\u306f\u3001400\u5186\u7a4d\u307f\u5897\u3057\u3067\u304d\u308b\u3002 \u56fd\u6c11\u5e74\u91d1\u57fa\u91d1 \u81ea\u55b6\u696d\u8005\u7528\u306e\u4e8c\u968e\u90e8\u5206\u306f\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u3002 \u7d44\u7e54\u3082\u9055\u3046\u306e\u3067\u30ea\u30bf\u30fc\u30f3\u304c\u540c\u3058\u306b\u306a\u308b\u304b\u306f\u4e0d\u660e\u3060\u3051\u3069\u3001\u65e5\u672c\u4f01\u696d\u6642\u4ee3\u3068\u540c\u984d\u3092\u7a4d\u3080\u306a\u3089 96920\u5186\u3002 \u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1(iDeCo) \u3053\u308c\u306f\u65e5\u672c\u4f01\u696d\u52e4\u3081\u3068\u5909\u308f\u3089\u306a\u3044\u3002 \u4f01\u696d\u306b\u3088\u3063\u3066\u306f\u72ec\u81ea\u306e\u4f01\u696d\u5e74\u91d1\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u3082\u3042\u308b\u304b\u3089\u3001\u3042\u308c\u3070\u305d\u3053\u3068\u306e\u5dee\u306b\u306a\u308b\u3002 \u3046\u3061\u306f\u7121\u304b\u3063\u305f\u306e\u3067\u30013\u968e\u3084\u308b\u306a\u3089 iDeCo \u3060\u3063\u305f\u3002\u81ea\u55b6\u696d\u306b\u306a\u3063\u3066\u3082\u5dee\u7570\u306f\u7121\u3057\u3002 \u5e74\u91d1\u307e\u3068\u3081 \u65e5\u672c\u4f01\u696d\u6642\u4ee3\u306b\u6255\u3063\u3066\u305f\u539a\u751f\u5e74\u91d1\u4fdd\u967a\u6599\u3068\u540c\u984d\u3092\u4f1a\u793e\u304c\u51fa\u3057\u3066\u304f\u308c\u3066\u3044\u305f\u306e\u3067\u3001UK \u4f01\u696d\u306b\u306a\u308b\u3068\u305d\u306e\u5206\u3060\u3051\u53ce\u5165\u6e1b\u3068\u307f\u306a\u305b\u308b\u3002 \u96c7\u7528\u4fdd\u967a \u81ea\u55b6\u696d\u6271\u3044\u3060\u304c\u3001\u81ea\u55b6\u696d\u306f\u96c7\u7528\u4fdd\u967a\u306b\u5165\u308c\u306a\u3044\u3002 \u65e5\u672c\u4f01\u696d\u6642\u4ee3\u306f\u6708\u984d1830\u5186\u3001\u4f1a\u793e\u8ca0\u62c5\u306f\u500d\u306e3660\u5186\u3002 \u4f1a\u793e\u8ca0\u62c5\u984d\u304c\u6e1b\u53ce\u76f8\u5f53\u3068\u3044\u3046\u3088\u308a\u3082\u3001\u96c7\u7528\u4fdd\u967a\u306b\u5165\u308c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u81ea\u4f53\u306e\u30de\u30a4\u30ca\u30b9\u304c\u5927\u304d\u3044\u304b\u306a\u3002 \u3060\u3044\u305f\u3044\u8ee2\u8077\u5148\u898b\u3064\u3051\u3066\u304b\u3089\u9000\u8077\u3057\u3066\u308b\u306e\u3067\u3001\u5b9f\u969b\u6d3b\u7528\u3057\u305f\u3053\u3068\u306f\u7121\u3044\u306e\u3060\u304c\u3002 \u4fdd\u967a\u3060\u304b\u3089\u306d\u3002 \u3061\u306a\u307f\u306b\u500b\u4eba\u4e8b\u696d\u8005\u5411\u3051\u306b\u306f\u5c0f\u898f\u6a21\u4f01\u696d\u5171\u6e08\u306a\u3069\u3042\u308b\u3051\u3069\u3082\u3001UK \u4f01\u696d\u52e4\u3081\u306e\u30b5\u30e9\u30ea\u30fc\u30de\u30f3\u306a\u306e\u3067\u52a0\u5165\u306f\u3067\u304d\u306a\u3044\u3002 \u96c7\u7528\u4fdd\u967a\u307e\u3068\u3081 \u5165\u308c\u306a\u3044\u306e\u3067\u3001\u89e3\u96c7\u6642\u306e\u6e96\u5099\u306f\u81ea\u5206\u3067\u78ba\u4fdd\u3002 \u52b4\u707d\u4fdd\u967a \u52b4\u707d\u4fdd\u967a\u3082\u5165\u308c\u306a\u3044\u3002 \u4fdd\u967a\u6599\u306f\u65e5\u672c\u4f01\u696d\u52e4\u3081\u306e\u660e\u7d30\u3060\u3068\u96c7\u7528\u4fdd\u967a\u306b\u542b\u307e\u308c\u3066\u308b\u307f\u305f\u3044\u3002\u8a73\u7d30\u4e0d\u660e\u3002 \u3053\u308c\u3082\u4fdd\u967a\u6599\u3068\u3044\u3046\u3088\u308a\u3082\u5165\u308c\u306a\u3044\u3053\u3068\u304c\u30c7\u30e1\u30ea\u30c3\u30c8\u3060\u304c\u3001 \u30d7\u30ed\u30b0\u30e9\u30de\u3060\u3068\u52b4\u707d\u3068\u3044\u3063\u3066\u3082\u901a\u52e4\u304f\u3089\u3044\u3060\u3057\u306d\u3002 \u3055\u307b\u3069\u30ea\u30b9\u30af\u306f\u9ad8\u304f\u306a\u3044\u3002 \u52b4\u707d\u4fdd\u967a\u307e\u3068\u3081 \u5165\u308c\u306a\u3044\u306e\u3067\u3001\u52b4\u707d\u8d77\u3053\u3055\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3002 \u30ea\u30b9\u30af\u3042\u308b\u4f5c\u696d\u3059\u308b\u306a\u3089\u640d\u4fdd\u3068\u304b\u751f\u4fdd\u3068\u304b\u81ea\u8ce0\u8cac\u3068\u304b\u5165\u308a\u307e\u3057\u3087\u3046\u3002","title":"\u6d77\u5916\u4f01\u696d(\u65e5\u672c\u6cd5\u4eba\u7121\u3057)\u30ea\u30e2\u30fc\u30c8\u52e4\u52d9\u3059\u308b\u5834\u5408\u306e\u7a0e\u91d1\u3068\u304b\u793e\u4fdd\u3068\u304b"},{"location":"topics/Life/2021-04-25--remote-uk/#remote-work-to-uk","text":"2021-04-25 \u3053\u306e\u4e8c\u6708\u304b\u3089 UK \u30d9\u30f3\u30c1\u30e3\u30fc\u306b\u65e5\u672c\u304b\u3089\u52e4\u52d9\u3002 UK \u4f01\u696d\u3068\u3044\u3063\u3066\u3082\u7d4c\u55b6\u8005\u304a\u3088\u3073\u958b\u767a\u9663\u306f\u65e5\u672c\u4eba\u3067\u3001\u5e02\u5834\u306b\u5408\u308f\u305b\u3066 UK \u306b\u8a2d\u7acb\u3055\u308c\u305f\u4f1a\u793e\u3002 \u50cd\u304d\u65b9\u306f\u65e5\u672c\u4f01\u696d\u3078\u306e\u30ea\u30e2\u30fc\u30c8\u3068\u3055\u307b\u3069\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u7701\u7565\u3002 \u7a0e\u91d1\u3068\u304b\u3069\u3046\u306a\u308b\u306e\u304b\u5168\u7136\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u8272\u3005\u8abf\u3079\u305f\u306e\u3067\u60c5\u5831\u5171\u6709\u3002 \u673a\u4e0a\u306e\u8a08\u7b97\u304c\u5b9f\u969b\u3069\u3046\u306a\u308b\u304b\u306e\u60c5\u5831\u3082\u8ffd\u8a18\u3057\u3066\u3044\u304f\u4e88\u5b9a\u3002","title":"remote work to UK"},{"location":"topics/Life/2021-04-25--remote-uk/#_1","text":"","title":"\u30b5\u30e9\u30ea\u30fc"},{"location":"topics/Life/2021-04-25--remote-uk/#_2","text":"\u7d66\u4e0e\u660e\u7d30\u306f\u3001\u6bce\u6708\u3053\u3093\u306a\u611f\u3058 * \u652f\u7d66 610,000 * \u63a7\u9664 - \u6240\u5f97\u7a0e 32,350 - \u4f4f\u6c11\u7a0e 39,400 - \u5065\u5eb7\u4fdd\u967a 30,597 - \u4ecb\u8b77\u4fdd\u967a 5,549 - \u96c7\u7528\u4fdd\u967a 1,830 - \u539a\u751f\u5e74\u91d1 56,730 * \u5dee\u5f15\u652f\u7d66\u5408\u8a08 - 443,544 \u5e74\u984d(\u6e90\u6cc9\u5fb4\u53ce\u7968)\u3060\u3068\u3001 - \u652f\u6255\u91d1\u984d 7,270,000 - \u63a7\u9664\u5f8c\u306e\u91d1\u984d 5,443,000 - \u6240\u5f97\u63a7\u9664\u5408\u8a08 1,707,684 - \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d 326,200","title":"\u65e5\u672c\u4f01\u696d\u52e4\u3081\u6642\u4ee3"},{"location":"topics/Life/2021-04-25--remote-uk/#uk","text":"\u6708\u30054000GBP + \u7d4c\u8cbb\u7b49\u3002 Tax \u3067 591.40 GBP\u304c\u5929\u5f15\u304d\u3055\u308c\u3066\u3044\u308b\u3002 https://www.gov.uk/income-tax-rates \u306b\u3088\u308b\u3068\u3001\u5e74\u53ce 12570GBP \u3092\u8d8a\u3048\u305f\u5206\u306b\u5bfe\u3057\u3066\u7d2f\u9032\u7a0e\u7387\u3002 48000GBP \u3060\u3068 20%. 50270GBP \u8d8a\u3048\u308b\u3068\u4e00\u6c17\u306b 40% \u3060\u3002 \u5883\u754c\u3088\u308a\u3061\u3087\u3044\u4e0a\u3060\u3068\u304b\u306a\u308a\u624b\u53d6\u308a\u6e1b\u308a\u305d\u3046\u3060\u304c\u8abf\u6574\u306f\u7121\u3044\u306e\u304b\u306a\u3002 ( 48000 \u2212 12570 ) \u2217 0.2 = 7086 7086 / 12 = 590.5 \\begin{aligned} (48000 - 12570)* 0.2 &=& 7086 \\\\ 7086 / 12 &=& 590.5 \\\\ \\end{aligned} ( 48000 \u2212 12570 ) \u2217 0.2 7086/12 \u200b = = \u200b 7086 590.5 \u200b \u3067\u3001590.5...\u306e\u306f\u305a\u3060\u304c 591.40 GBP \u304c\u5f15\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u3002 \u5dee\u5206\u306f\u3088\u304f\u5206\u304b\u3089\u3093\u304c\u307e\u3041\u5c11\u984d\u306a\u306e\u3067\u30b9\u30eb\u30fc\u3002","title":"UK \u4f01\u696d"},{"location":"topics/Life/2021-04-25--remote-uk/#_3","text":"\u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3060\u3051\u308c\u3069\u3001\u6240\u5f97\u7a0e\u306f\u8ab2\u7a0e\u5e74\u5168\u4f53\u3067\u306e(1\u6708\u304b\u308912\u6708)\u6240\u5f97\u984d\u30fb\u63a7\u9664\u984d\u304c\u6c7a\u307e\u3063\u3066\u7a0e\u984d\u304c\u78ba\u5b9a\u3059\u308b\u3002 \u672c\u6765\u306f\u7fcc\u5e74\u4e09\u6708\u307e\u3067\u306b\u7a0e\u984d\u3092\u7533\u8acb(\u78ba\u5b9a\u7533\u544a)\u3057\u3066\u305d\u306e\u5f8c\u306b\u652f\u6255\u3046\u3093\u3060\u3051\u3069\u3001\u4f1a\u793e\u54e1\u306f\u8ab2\u7a0e\u5e74\u306e\u3046\u3061\u306b\u3042\u3089\u304b\u3058\u3081\u6bce\u6708\u5929\u5f15\u304d(\u6e90\u6cc9\u5fb4\u53ce)\u3055\u308c\u308b\u3002 \u5929\u5f15\u304d\u984d\u306f\u7d66\u4e0e\u304b\u3089\u6c7a\u3081\u3089\u308c\u305f\u4e88\u6e2c\u5024\u3067\u3001\u5b9f\u969b\u306e\u6240\u5f97\u984d\u3084\u63a7\u9664\u984d\u306f\u5e74\u672b\u3067\u78ba\u5b9a\u3059\u308b\u3002\u6e90\u6cc9\u5fb4\u53ce\u984d\u3068\u5dee\u5206\u304c\u3042\u3063\u305f\u3089\u5e74\u672b\u306b\u8abf\u6574\u3059\u308b\u3002 \u5e74\u672b\u8abf\u6574\u3067\u5bfe\u5fdc\u3057\u306a\u3044\u53ce\u5165\u3084\u63a7\u9664\u304c\u3042\u3063\u305f\u3089\u3001\u3084\u3063\u3071\u308a\u78ba\u5b9a\u7533\u544a\u3059\u308b\u3002 \u65e5\u672c\u6cd5\u4eba\u306e\u7121\u3044\u5916\u56fd\u4f01\u696d\u52e4\u3081\u306e\u5834\u5408\u306f\u3082\u3061\u308d\u3093\u6e90\u6cc9\u5fb4\u53ce\u306a\u3069\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u78ba\u5b9a\u7533\u544a\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002 \u3061\u306a\u307f\u306b\u4f4f\u6c11\u7a0e\u3082\u540c\u3058\u304f\u5e74\u9593\u53ce\u5165\u984d\u304c\u78ba\u5b9a\u3057\u3066\u7fcc\u5e74\u306b\u6255\u3046\u3002 \u3053\u3061\u3089\u306f\u30b5\u30e9\u30ea\u30fc\u30de\u30f3\u3067\u3082\u7fcc\u5e74\u6255\u3044\u3002 \u6bce\u6708\u5929\u5f15\u304d\u3055\u308c\u308b\u304c\u3001\u3053\u308c\u306f\u6628\u5e74\u306e\u6240\u5f97\u306b\u5bfe\u3059\u308b\u78ba\u5b9a\u984d\u3002\u5f53\u5e74\u306e\u4e88\u6e2c\u984d\u3092\u5929\u5f15\u304d\u3055\u308c\u3066\u308b\u6240\u5f97\u7a0e\u3068\u306f\u9055\u3046\u3002 \u6240\u5f97\u7a0e\u5929\u5f15\u304d\u306f\u5148\u6255\u3044\u3001\u4f4f\u6c11\u7a0e\u306f\u5f8c\u6255\u3044\u3002\u3060\u304b\u3089\u65b0\u793e\u4f1a\u4eba\u4e00\u5e74\u76ee\u306f\u4f4f\u6c11\u7a0e\u304c\u5929\u5f15\u304d\u3055\u308c\u306a\u3044\u306e\u3067\u3042\u308b\u3002 \u306a\u304a\u3001\u666e\u6bb5\u306f\u5f79\u6240\u9593\u9023\u643a\u306a\u3093\u304b\u3057\u306a\u3044\u306e\u306b\u3001\u6240\u5f97\u7a0e\u306e\u78ba\u5b9a\u7533\u544a(or\u5e74\u672b\u8abf\u6574)\u3092\u3059\u308c\u3070\u306a\u3093\u3068\u81ea\u52d5\u7684\u306b\u5730\u65b9\u81ea\u6cbb\u4f53\u306b\u4f1d\u3048\u3089\u308c\u308b\u3002 \u4fbf\u5229\u3060\u3002\u5fb4\u53ce\u3060\u3051\u306f\u306c\u304b\u308a\u304c\u306a\u3044\u3002","title":"\u6e90\u6cc9\u5fb4\u53ce\u3068\u5e74\u672b\u8abf\u6574\u3068\u78ba\u5b9a\u7533\u544a"},{"location":"topics/Life/2021-04-25--remote-uk/#_4","text":"\u300c\u63a7\u9664\u5f8c\u306e\u91d1\u984d\u300d\u306f\u3001 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1410.htm \u306e\u3001\u300c2 \u7d66\u4e0e\u6240\u5f97\u306e\u91d1\u984d\u306e\u8a08\u7b97\u300d\u304b\u3089\u3001 \u652f\u6255\u3044\u91d1\u984d * 90% - 110\u4e07\u5186 \u3002 \u3055\u3089\u306b\u3001\u6e90\u6cc9\u5fb4\u53ce\u984d\u306f https://www.nta.go.jp/publication/pamph/gensen/zeigakuhyo2019/02.htm \u306e\u8868\u3067\u6c7a\u3081\u3089\u308c\u3066\u3044\u308b\u3002 \u793e\u4fdd\u63a7\u9664\u5f8c\u306e\u91d1\u984d\u306f\u3001 610000 - (30597 + 5549 + 56730 + 1830) = 515294\u5186 \u3002 \u300c\u7d66\u4e0e\u6240\u5f97\u306e\u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d\u8868\u300d\u304b\u3089\u3001515294\u5186\u306e\u6276\u990a0\u4eba\u306f\u300132350\u5186\u3002\u6240\u5f97\u7a0e\u5929\u5f15\u304d\u984d\u3068\u4e00\u81f4\u3002 \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d\u306f\u3001\u3053\u306e\u5929\u5f15\u304d\u306e 12 \u500d\u3068\u306f\u9055\u3046\u3088\u3046\u3060\u304c\u3001\u3069\u3046\u3044\u3046\u8a08\u7b97\u306a\u3093\u3060\u308d\u3046\u3002 \u3061\u3083\u3093\u3068\u8a08\u7b97\u3082\u3057\u3068\u304f\u3002 \u4ee4\u548c\u4e8c\u5e74(2020\u5e74)\u306e\u7a0e\u5236\u3067\u3002","title":"\u6e90\u6cc9\u5fb4\u53ce"},{"location":"topics/Life/2021-04-25--remote-uk/#_5","text":"https://www.nta.go.jp/publication/pamph/koho/kurashi/html/01_1.htm \u6240\u5f97\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u8ab2\u7a0e\u6240\u5f97 = \u6240\u5f97 \u2212 \u6240\u5f97\u63a7\u9664 \\begin{aligned} \u6240\u5f97\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * \u7a0e\u7387 \\\\ \u8ab2\u7a0e\u6240\u5f97 &=& \u6240\u5f97 - \u6240\u5f97\u63a7\u9664 \\\\ \\end{aligned} \u6240\u5f97\u7a0e \u8ab2\u7a0e\u6240\u5f97 \u200b = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u6240\u5f97 \u2212 \u6240\u5f97\u63a7\u9664 \u200b","title":"\u6240\u5f97\u7a0e\u984d\u8a08\u7b97"},{"location":"topics/Life/2021-04-25--remote-uk/#_6","text":"\u307e\u305a\u306f\u8ab2\u7a0e\u6240\u5f97\u306e\u8a08\u7b97\u3002 \u6240\u5f97\u63a7\u9664\u306f\u8272\u3005\u3042\u308b\u3051\u308c\u3069\u3001\u50d5\u306e\u5834\u5408\u306f\u793e\u4f1a\u4fdd\u967a\u3001\u57fa\u790e\u63a7\u9664\u3001\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3002 \u3042\u3068\u6c11\u9593\u4fdd\u967a\u3001\u533b\u7642\u8cbb\u3001\u3075\u308b\u3055\u3068\u7d0d\u7a0e\u3068\u304b\u3082\u3042\u308b\u3051\u3069\u7701\u7565\u3002 \u8ab2\u7a0e\u6240\u5f97 = \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97 &=& \u53ce\u5165 - \u793e\u4f1a\u4fdd\u967a\u7b49 - \u57fa\u790e\u63a7\u9664 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 \u200b = \u200b \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u200b \u793e\u4f1a\u4fdd\u967a\u63a7\u9664\u306f\u3001\u533b\u7642\u4fdd\u967a\u3001\u5e74\u91d1\u4fdd\u967a\u3001\u4ecb\u8b77\u4fdd\u967a\u3001\u52b4\u50cd\u4fdd\u967a\u306e\u793e\u4fdd\u56db\u7a2e\u3002 \u4e0a\u306e\u6708\u3005\u6255\u3063\u3066\u308b\u984d\u3092 12\u500d\u3002 \u793e\u4f1a\u4fdd\u967a\u7b49 = ( \u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1 ) \u2217 12 = ( 30597 + 5549 + 1830 + 56730 ) \u2217 12 = 1136472 \\begin{aligned} \u793e\u4f1a\u4fdd\u967a\u7b49 &=& (\u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1) * 12 \\\\ &=& (30597 + 5549 + 1830 + 56730) * 12 \\\\ &=& 1136472 \\\\ \\end{aligned} \u793e\u4f1a\u4fdd\u967a\u7b49 \u200b = = = \u200b ( \u5065\u5eb7\u4fdd\u967a + \u4ecb\u8b77\u4fdd\u967a + \u96c7\u7528\u4fdd\u967a + \u539a\u751f\u5e74\u91d1 ) \u2217 12 ( 30597 + 5549 + 1830 + 56730 ) \u2217 12 1136472 \u200b \u57fa\u790e\u63a7\u9664\u306f\u53ce\u5165\u306b\u3088\u3063\u3066\u4e00\u5f8b\u3067\u30012400\u4e07\u5186\u4ee5\u4e0b\u306f 48\u4e07\u5186\u3002 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1199.htm \u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3082\u53ce\u5165\u306b\u3088\u308a\u3001727\u4e07\u5186\u3060\u3068 \u53ce\u5165*10% + 110\u4e07\u5186\u3002 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1410.htm \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 = 727 \u4e07\u5186 \u2217 10 \\begin{aligned} \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 &=& 727\u4e07\u5186*10% + 110\u4e07\u5186 = 182.7\u4e07\u5186 \\\\ \\end{aligned} \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u200b = \u200b 727 \u4e07\u5186 \u2217 10 \u200b \u3053\u308c\u3082\u6e90\u6cc9\u5fb4\u53ce\u306e\u6240\u5f97\u63a7\u9664\u984d\u3068\u5fae\u5999\u306b\u5dee\u304c\u3042\u308b\u304c\u3088\u304f\u5206\u304b\u3089\u3093\u3002 \u3061\u306a\u307f\u306b\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u306f\u3001\u81ea\u55b6\u696d\u8005\u306e\u7d4c\u8cbb\u306b\u76f8\u5f53\u3059\u308b\u90e8\u5206\u3068\u3001\u4ed6\u306e\u7a2e\u985e\u306e\u6240\u5f97\u3068\u306e\u8abf\u6574\u90e8\u5206\u304b\u3089\u6210\u308b\u3002 \u30ea\u30fc\u30de\u30f3\u306f\u7d4c\u8cbb\u7b97\u5b9a\u57fa\u6e96\u304c\u96e3\u3057\u3044\u306e\u3067\u6982\u7b97\u3067\u6c7a\u3081\u3089\u308c\u3066\u3044\u308b\u3002 \u591a\u91cf\u306b\u7d4c\u8cbb\u304b\u304b\u3063\u305f\u3089\u7279\u5225\u652f\u51fa\u63a7\u9664\u3063\u3066\u306e\u304c\u3067\u304d\u308b\u304c\u9069\u7528\u6761\u4ef6\u53b3\u3057\u3044\u306e\u3067\u7121\u3044\u3082\u306e\u3068\u3057\u3066\u3088\u3044\u3002 \u4ed6\u306e\u6240\u5f97\u7a2e\u5225\u3068\u306e\u8abf\u6574\u3063\u3066\u306e\u306f\u3001\u88dc\u8db3\u7387\u306e\u9ad8\u3055\u3068\u304b\u3001\u7d4c\u55b6\u8005\u3088\u308a\u7a0e\u91d1\u53b3\u3057\u3044\u3060\u308d\u3046\u3068\u304b\u3002 \u8fd1\u5e74\u306f\u30ea\u30fc\u30de\u30f3\u3088\u308a\u660e\u304b\u306b\u53b3\u3057\u3044\u975e\u6b63\u898f\u3068\u3044\u3046\u5f62\u614b\u304c\u5897\u3048\u3066\u304d\u3066\u308b\u308f\u3051\u3067\u3001\u30ea\u30fc\u30de\u30f3\u512a\u9047\u3059\u308b\u306e\u3082\u3069\u3046\u304b\u3068\u3044\u3046\u6c17\u304c\u3059\u308b\u3002 \u88dc\u8db3\u7387\u306b\u3064\u3044\u3066\u306f\u5929\u5f15\u304d\u3055\u308c\u3066\u308b\u30ea\u30fc\u30de\u30f3\u3092\u5ba5\u3081\u3066\u306a\u3044\u3067\u3001\u4ed6(\u81ea\u55b6\u696d)\u306e\u88dc\u8db3\u7387\u3092\u4e0a\u3052\u308d\u3088\u3068\u3002 \u9591\u8a71\u4f11\u984c\u3002\u5408\u308f\u305b\u3066 182.7\u4e07\u5186\u3002\u5b9f\u969b\u305d\u3093\u306a\u304b\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3053\u3053\u306f\u5f97\u3057\u3066\u308b\u611f\u3058\u3002 \u904e\u5927\u3060\u3068\u3044\u3046\u610f\u898b\u304c\u3042\u308b\u3088\u3046\u3067\u3042\u308b\u3002\u540c\u610f\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u30021500\u4e07\u5186\u4ee5\u4e0a\u3067\u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3002 \u3061\u306a\u307f\u306b\u7a0e\u52d9\u7f72\u306b\u805e\u3044\u305f\u3068\u3053\u308d\u3001UK \u4f01\u696d\u52e4\u3081\u3067\u3082\u7d66\u4e0e\u6240\u5f97\u8005\u6271\u3044\u3067\u7d4c\u8cbb\u306f\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u306e\u984d\u306b\u306a\u308b\u3089\u3057\u3044\u3002 \u307e\u3068\u3081\u308b\u3068\u3001 \u8ab2\u7a0e\u6240\u5f97 = \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 = 7270000 \u2212 1136472 \u2212 480000 \u2212 1827000 = 7270000 \u2212 3443472 = 3826528 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97 &=& \u53ce\u5165 - \u793e\u4f1a\u4fdd\u967a\u7b49 - \u57fa\u790e\u63a7\u9664 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \\\\ &=& 7270000 - 1136472 - 480000 - 1827000 \\\\ &=& 7270000 - 3443472 \\\\ &=& 3826528 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 \u200b = = = = \u200b \u53ce\u5165 \u2212 \u793e\u4f1a\u4fdd\u967a\u7b49 \u2212 \u57fa\u790e\u63a7\u9664 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 7270000 \u2212 1136472 \u2212 480000 \u2212 1827000 7270000 \u2212 3443472 3826528 \u200b (- 7270000 5343000)","title":"\u8ab2\u7a0e\u6240\u5f97"},{"location":"topics/Life/2021-04-25--remote-uk/#_7","text":"https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/2260.htm \u6240\u5f97\u7a0e\u984d = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d = \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 \\begin{aligned} \u6240\u5f97\u7a0e\u984d &=& \u8ab2\u7a0e\u6240\u5f97 * \u7a0e\u7387 - \u63a7\u9664\u984d \\\\ \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &=& \u6240\u5f97\u7a0e\u984d - \u6240\u5f97\u7a0e\u63a7\u9664\u984d \\\\ \u5fa9\u8208\u6240\u5f97\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d * 2.1% \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d \u200b = = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 \u200b \u8ab2\u7a0e\u6240\u5f97382\u4e07\u3060\u3068\u7a0e\u7387\u306f 20%. \u63a7\u9664\u984d\u306f 427,500\u5186\u3002 \u6240\u5f97\u7a0e\u984d\u63a7\u9664\u306f https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/shoto321.htm \u3067\u3001\u4f4f\u5b85\u30ed\u30fc\u30f3\u3068\u304b\u306d\u3002 \u5f8c\u3067\u51fa\u3066\u304f\u308b\u5916\u56fd\u7a0e\u984d\u63a7\u9664\u3082\u3053\u3053\u3002 \u6240\u5f97\u7a0e\u984d = \u8ab2\u7a0e\u6240\u5f97 \u2217 \u7a0e\u7387 \u2212 \u63a7\u9664\u984d = 3826528 \u2217 0.2 \u2212 427500 = 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d = \u6240\u5f97\u7a0e\u984d \u2212 \u6240\u5f97\u7a0e\u63a7\u9664\u984d = 337805 \u2212 0 = 337805 \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u2217 2.1 % = 337805 \u2217 0.021 = 7093 \u7d0d\u7a0e\u984d = \u57fa\u6e96\u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u6240\u5f97\u7a0e\u984d = 337805 + 7093 = 344898 \\begin{aligned} \u6240\u5f97\u7a0e\u984d &=& \u8ab2\u7a0e\u6240\u5f97 &*& \u7a0e\u7387 - \u63a7\u9664\u984d & \\\\ &=& 3826528 &*& 0.2 - 427500 &=& 337805 \\\\ \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &=& \u6240\u5f97\u7a0e\u984d &-& \u6240\u5f97\u7a0e\u63a7\u9664\u984d & \\\\ &=& 337805 &-& 0 &=& 337805 \\\\ \u5fa9\u8208\u6240\u5f97\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &*& 2.1\\% & \\\\ &=& 337805 &*& 0.021 &=& 7093 \\\\ \u7d0d\u7a0e\u984d &=& \u57fa\u6e96\u6240\u5f97\u7a0e\u984d &+& \u5fa9\u8208\u6240\u5f97\u7a0e\u984d & \\\\ &=& 337805 &+& 7093 &=& 344898 \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u984d \u57fa\u6e96\u6240\u5f97\u7a0e\u984d \u5fa9\u8208\u6240\u5f97\u7a0e\u984d \u7d0d\u7a0e\u984d \u200b = = = = = = = = \u200b \u8ab2\u7a0e\u6240\u5f97 3826528 \u6240\u5f97\u7a0e\u984d 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d 337805 \u57fa\u6e96\u6240\u5f97\u7a0e\u984d 337805 \u200b \u2217 \u2217 \u2212 \u2212 \u2217 \u2217 + + \u200b \u7a0e\u7387 \u2212 \u63a7\u9664\u984d 0.2 \u2212 427500 \u6240\u5f97\u7a0e\u63a7\u9664\u984d 0 2.1% 0.021 \u5fa9\u8208\u6240\u5f97\u7a0e\u984d 7093 \u200b = = = = \u200b 337805 337805 7093 344898 \u200b \u6e90\u6cc9\u5fb4\u53ce\u7a0e\u984d 326,200 \u5186\u3060\u3068 18698\u5186\u8db3\u308a\u3066\u306a\u3044\u306a\u3041\u3002 \u5b9f\u969b\u306f\u751f\u547d\u4fdd\u967a\u3068\u304b\u3042\u3063\u305f\u306e\u3067\u305d\u306e\u5206? \u307e\u3041\u5927\u4f53\u5408\u3063\u3066\u308b\u306e\u3067\u826f\u3057\u3068\u3059\u308b\u3002","title":"\u6240\u5f97\u7a0e\u3001\u5fa9\u8208\u7a0e"},{"location":"topics/Life/2021-04-25--remote-uk/#_8","text":"\u6240\u5f97\u306b\u95a2\u308f\u3089\u305a\u3001\u90fd\u6c11\u7a0e6%, \u533a\u6c11\u7a0e4% \u3067\u5408\u308f\u305b\u306610%. \u8ab2\u7a0e\u6240\u5f97\u306b\u304b\u304b\u308b\u3002 \u90fd\u6c11\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 6 % = 3826528 \u2217 0.1 = 229591 \u533a\u6c11\u7a0e = \u8ab2\u7a0e\u6240\u5f97 \u2217 4 % = 3826528 \u2217 0.1 = 153061 \u4f4f\u6c11\u7a0e = \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e = 382652 \\begin{aligned} \u90fd\u6c11\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * 6\\% &=& 3826528 * 0.1 &=& 229591 \\\\ \u533a\u6c11\u7a0e &=& \u8ab2\u7a0e\u6240\u5f97 * 4\\% &=& 3826528 * 0.1 &=& 153061 \\\\ \u4f4f\u6c11\u7a0e &=& \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e &=& 382652 \\\\ \\end{aligned} \u90fd\u6c11\u7a0e \u533a\u6c11\u7a0e \u4f4f\u6c11\u7a0e \u200b = = = \u200b \u8ab2\u7a0e\u6240\u5f97 \u2217 6% \u8ab2\u7a0e\u6240\u5f97 \u2217 4% \u90fd\u6c11\u7a0e + \u533a\u6c11\u7a0e \u200b = = = \u200b 3826528 \u2217 0.1 3826528 \u2217 0.1 382652 \u200b = = \u200b 229591 153061 \u200b 382652 / 12 = 31338\u5186 \u3060\u304c\u3001\u5b9f\u969b\u306e\u6bce\u6708\u306e\u4f4f\u6c11\u7a0e\u306f 39400\u5186 \u3060\u304b\u3089\u8a08\u7b97\u7d50\u679c\u306f 8062\u5186\u5c11\u306a\u3044\u306a\u3002 \u4f4f\u6c11\u7a0e\u306e\u8ab2\u7a0e\u6240\u5f97\u306f\u524d\u5e74(=\u4e00\u6628\u5e74)\u306e\u984d\u3060\u304c\u3001\u7dcf\u6240\u5f97\u306f\u3055\u3089\u306b\u5c11\u306a\u304b\u3063\u305f\u3088\u3046\u306a\u3002 \u7d50\u69cb\u5927\u304d\u306a\u5dee\u306a\u306e\u3067\u3061\u3083\u3093\u3068\u5408\u3046\u3088\u3046\u306b\u8a08\u7b97\u3057\u306a\u304a\u3057\u305f\u3044\u304c\u307e\u305f\u4eca\u5ea6\u3002","title":"\u4f4f\u6c11\u7a0e"},{"location":"topics/Life/2021-04-25--remote-uk/#uk_1","text":"\u3055\u3066\u672c\u756a\u3002UK \u4f01\u696d\u52e4\u3081\u306f\u3069\u3046\u306a\u308b\u304b\u3002","title":"UK \u4f01\u696d\u52e4\u3081\u306e\u6240\u5f97\u7a0e"},{"location":"topics/Life/2021-04-25--remote-uk/#_9","text":"","title":"\u6240\u5f97\u7a0e\u3001\u4f4f\u6c11\u7a0e"},{"location":"topics/Life/2021-04-25--remote-uk/#_10","text":"\u5916\u56fd\u306b\u6240\u5f97\u7a0e\u3092\u652f\u6255\u3063\u305f\u5206\u3092\u3001\u65e5\u672c\u306e\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3051\u308b\u5236\u5ea6\u304c\u3042\u308b\u3002 \u5c45\u4f4f\u8005\u306b\u4fc2\u308b\u5916\u56fd\u7a0e\u984d\u63a7\u9664 https://www.nta.go.jp/taxes/shiraberu/taxanswer/shotoku/1240.htm \u3061\u306a\u307f\u306b\u7a0e\u52d9\u7f72\u306b\u805e\u3044\u3066\u3082\u6559\u3048\u3066\u304f\u308c\u306a\u304b\u3063\u305f\u3002\u30af\u30bd\u304c\u3002 \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d = \u6240\u5f97\u7a0e\u984d \u2217 ( \u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d ) \\begin{aligned} \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d &=& \u6240\u5f97\u7a0e\u984d * (\u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d) \\\\ \\end{aligned} \u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d \u200b = \u200b \u6240\u5f97\u7a0e\u984d \u2217 ( \u5916\u56fd\u6240\u5f97\u91d1\u984d / \u6240\u5f97\u7dcf\u984d ) \u200b \u3053\u306e\u5f0f\u3067\u3044\u3046\u6240\u5f97\u7a0e\u984d\u306f\u7a0e\u984d\u63a7\u9664\u3092\u5f15\u3044\u305f\u984d\u3001\u8981\u3059\u308b\u306b\u5b9f\u969b\u306b\u6255\u3046\u7a0e\u984d\u306d\u3002 \u53f3\u5074\u306e\u62ec\u5f27\u306e\u4e2d\u306f\u3001\u7dcf\u53ce\u5165\u306b\u5bfe\u3059\u308b\u5916\u56fd\u6240\u5f97\u306e\u6bd4\u7387\u3092\u51fa\u3057\u3066\u3044\u308b\u3002 \u305d\u308c\u3092\u6240\u5f97\u7a0e\u984d\u306b\u639b\u3051\u305f\u5206\u304c\u63a7\u9664\u9650\u5ea6\u984d\u306a\u308f\u3051\u3067\u3001\u3064\u307e\u308a\u6240\u5f97\u306e\u3046\u3061\u306e\u5916\u56fd\u6240\u5f97\u306e\u5272\u5408\u3092\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u3002 \u5168\u90e8\u5916\u56fd\u6240\u5f97\u306a\u3089\u62ec\u5f27\u306e\u4e2d\u306f 1 \u306b\u306a\u308a\u3001\u9650\u5ea6\u984d\u306f\u6240\u5f97\u7a0e\u984d\u306e100%\u306b\u306a\u308b\u3002 \u5916\u56fd\u6240\u5f97\u63a7\u9664\u984d\u306f\u3001\u307e\u305a\u6240\u5f97\u7a0e\u304b\u3089\u5dee\u3057\u5f15\u3044\u3066\u4f59\u3063\u305f\u3089\u5fa9\u8208\u7a0e\u304b\u3089\u5f15\u3051\u308b\u3002 \u3055\u3089\u306b\u4f59\u3063\u305f\u3089\u3001 https://www.nta.go.jp/taxes/shiraberu/shinkoku/tebiki/2018/pdf/040.pdf 4-(1) \u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306b\u3001\u4f4f\u6c11\u7a0e\u304b\u3089\u3082\u5f15\u3051\u308b\u3002 \u90fd\u304c\u629c\u3051\u3066\u308b\u3051\u3069\u3001\u90fd\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u984d\u306e 12%, \u533a\u6c11\u7a0e\u306f 18% \u3089\u3057\u3044\u3002 \u4f4f\u6c11\u7a0e\u306e\u8a08\u7b97\u306f\u8ab2\u7a0e\u6240\u5f97\u57fa\u6e96\u306a\u306e\u306b\u3001\u63a7\u9664\u9650\u5ea6\u984d\u306e\u8a08\u7b97\u306f\u6240\u5f97\u7a0e\u984d\u57fa\u6e96? \u4f4f\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u3088\u308a\u63a7\u9664\u5c11\u306a\u3044\u306e\u306b\u3001\u5916\u56fd\u7d0d\u7a0e\u5206\u306e\u8abf\u6574\u91d1\u3092\u7b97\u51fa\u3059\u308b\u6642\u306f\u56fd\u7a0e\u306e\u63a7\u9664\u984d\u3092\u4f7f\u3046\u306e\u306f\u30ba\u30eb\u3044\u306a\u3041\u3002 \u3055\u3066\u6240\u5f97\u7a0e\u306f\u8ab2\u7a0e\u6240\u5f97\u306e20%\u3001\u90fd\u6c11\u7a0e/\u533a\u6c11\u7a0e\u306f\u8ab2\u7a0e\u6240\u5f97\u306e6%/4% \u306a\u306e\u3067\u3001\u7a0e\u7387\u306b\u4ed8\u968f\u3059\u308b\u63a7\u9664\u5206\u304c\u7121\u3051\u308c\u3070\u90fd\u6c11\u7a0e\u306f\u6240\u5f97\u7a0e\u306e 6/20 = 30%, \u533a\u6c11\u7a0e\u306f 4/20=20% \u76f8\u5f53\u3002 \u4f4f\u6c11\u7a0e\u306e\u63a7\u9664\u9650\u5ea6\u304c\u6240\u5f97\u7a0e\u63a7\u9664\u9650\u5ea6\u984d\u306e 12%/18% \u3067\u306f\u3001\u4f4f\u6c11\u7a0e\u306e\u5168\u984d\u306f\u63a7\u9664\u3067\u304d\u306a\u3055\u305d\u3046\u3067\u3042\u308b\u3002 \u4e00\u5fdc\u3001\u3055\u3089\u306b\u4f59\u3063\u305f\u5206\u306f\u3001\u4e09\u5e74\u7e70\u308a\u8d8a\u3057\u3066\u6240\u5f97\u7a0e\u304b\u3089\u63a7\u9664\u3067\u304d\u308b\u3088\u3046\u3060\u304c\u3001\u3042\u3093\u307e\u610f\u5473\u306a\u3044\u306a\u3002","title":"\u5916\u56fd\u7a0e\u984d\u63a7\u9664"},{"location":"topics/Life/2021-04-25--remote-uk/#_11","text":"UK \u984d\u306f 12570GBP \u5f15\u3044\u3066 20%. \u5f15\u304f\u524d\u306e\u984d\u304b\u3089\u306e\u6bd4\u7387\u3092\u51fa\u3059\u3068\u3001 ( ( 48000 \u2212 12570 ) \u2217 0.2 ) / 48000 = 7086 / 48000 = 0.1476 \\begin{aligned} ((48000 - 12570) * 0.2) / 48000 &=& 7086 / 48000 &=& 0.1476 \\\\ \\end{aligned} (( 48000 \u2212 12570 ) \u2217 0.2 ) /48000 \u200b = \u200b 7086/48000 \u200b = \u200b 0.1476 \u200b \u65e5\u672c\u306e\u5834\u5408\u3082\u63a7\u9664\u3084\u3089\u8272\u3005\u3042\u308b\u304c\u3001\u524d\u5e74\u306e\u53ce\u5165\u3068\u7a0e\u984d\u306e\u6bd4\u7387\u51fa\u3059\u3068\u3001 ( \u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u7a0e\u984d + \u4f4f\u6c11\u7a0e ) / \u7dcf\u6240\u5f97\u984d = ( 344898 + 382652 ) / 7270000 = 0.1000 \\begin{aligned} & & (\u6240\u5f97\u7a0e\u984d+\u5fa9\u8208\u7a0e\u984d+\u4f4f\u6c11\u7a0e) / \u7dcf\u6240\u5f97\u984d & & \\\\ &=& (344898+382652) / 7270000 &=& 0.1000 \\\\ \\end{aligned} \u200b = \u200b ( \u6240\u5f97\u7a0e\u984d + \u5fa9\u8208\u7a0e\u984d + \u4f4f\u6c11\u7a0e ) / \u7dcf\u6240\u5f97\u984d ( 344898 + 382652 ) /7270000 \u200b = \u200b 0.1000 \u200b \u3067\u3001UK \u306e\u65b9\u304c\u6240\u5f97\u7a0e\u306e\u7a0e\u7387\u304c\u9ad8\u3044\u306e\u304b\u3057\u3089? UK \u5929\u5f15\u304d\u5206\u3067\u6240\u5f97\u7a0e\u306f\u8cc4\u3048\u305d\u3046\u3067\u3042\u308b\u3002\u4f4f\u6c11\u7a0e\u306f\u3069\u3046\u304b\u306a\u30fc\u3002 \u307e\u3041\u305d\u3082\u305d\u3082\u4f4f\u6c11\u7a0e\u306f\u53bb\u5e74\u306e\u53ce\u5165\u306b\u5bfe\u3059\u308b\u652f\u6255\u3044\u3060\u304b\u3089\u4e00\u5e74\u306f\u6255\u308f\u306a\u304d\u3083\u3060\u3051\u3069...","title":"\u7a0e\u984d\u306e\u6bd4\u8f03"},{"location":"topics/Life/2021-04-25--remote-uk/#_12","text":"\u5e74\u53ce 48000GBP. \u7a0e\u91d1\u8a08\u7b97\u306f\u3068\u308a\u3042\u3048\u305a\u53bb\u5e74\u306e\u3092\u4f7f\u304a\u3046\u3002\u53ce\u5165\u304c\u540c\u3058\u304f\u306a\u308b\u70ba\u66ff\u30ec\u30fc\u30c8\u306f\u3001 7270000 / 48000 = 151.45 \u5186 / / \u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \\begin{aligned} 7270000 / 48000 = 151.45 \u5186 \\\\ //\u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \\\\ \\end{aligned} 7270000/48000 = 151.45 \u5186 // \u70ba\u66ff\u3063\u3066\u30b9\u30e9\u30c3\u30b7\u30e5\u306e\u4f7f\u3044\u65b9\u304c\u5358\u4f4d\u3068\u9006\u3067\u6df7\u4e71\u3059\u308b\u306e\u3067\u3001\u5358\u4f4d\u304b\u3089\u9664\u6570\u306f\u7701\u304f \u200b 4\u670825\u65e5\u73fe\u5728 149.70 \u5186\u3060\u304b\u3089\u305d\u3093\u306a\u30ba\u30ec\u3066\u306a\u3044\u3002 \u7a0e\u984d\u306f 7086GBP \u3060\u304b\u3089\u3001 7086 * 151.45 = 1073134 \u5186 \u76f8\u5f53\u3002 \u793e\u4fdd\u3082\u540c\u3058\u3060\u3068\u3057\u3066\u3001\u5b9f\u969b\u306e\u5024\u3068\u30ba\u30ec\u304c\u3042\u3063\u305f\u304c\u8a08\u7b97\u306b\u3088\u308b\u3068\u3001 \u8ab2\u7a0e\u6240\u5f97 : 3 , 826 , 528 \u5186 \u6240\u5f97\u7a0e : 337 , 805 \u5186 \u5fa9\u8208\u7a0e : 7 , 093 \u5186 \u90fd\u6c11\u7a0e : 229 , 591 \u5186 \u533a\u6c11\u7a0e : 153 , 061 \u5186 \\begin{aligned} \u8ab2\u7a0e\u6240\u5f97: & 3,&826,&528 &\u5186 \\\\ \u6240\u5f97\u7a0e: & &337,&805 &\u5186 \\\\ \u5fa9\u8208\u7a0e: & & 7,&093 &\u5186 \\\\ \u90fd\u6c11\u7a0e: & &229,&591 &\u5186 \\\\ \u533a\u6c11\u7a0e: & &153,&061 &\u5186 \\\\ \\end{aligned} \u8ab2\u7a0e\u6240\u5f97 : \u6240\u5f97\u7a0e : \u5fa9\u8208\u7a0e : \u90fd\u6c11\u7a0e : \u533a\u6c11\u7a0e : \u200b 3 , \u200b 826 , 337 , 7 , 229 , 153 , \u200b 528 805 093 591 061 \u200b \u5186 \u5186 \u5186 \u5186 \u5186 \u200b \u5168\u984d\u304c\u5916\u56fd\u6240\u5f97\u3068\u3057\u3066\u3001\u5404\u5916\u56fd\u63a7\u9664\u9650\u5ea6\u984d\u3092\u8a08\u7b97\u3057\u3066\u3044\u304f\u3068\u3001 \u5916\u56fd\u6240\u5f97\u7a0e\u984d = 7086 \u2217 151.45 = 1073134 \u6240\u5f97\u7a0e\u984d = 337805 \u2212 m i n ( 1073134 , 337805 ) = = 0 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 1073134 \u2212 337805 = 735326 \u5fa9\u8208\u7a0e = 7093 \u2212 m i n ( 735326 , 7393 ) = 0 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 735326 \u2212 7093 = 728233 \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d = 337805 \u2217 0.12 = 40536 \u90fd\u6c11\u7a0e = 229591 \u2212 m i n ( 728233 , 40536 ) = 189055 \u5916\u56fd\u63a7\u9664\u6b8b\u984d = 728233 \u2212 40536 = 687697 \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d = 337805 \u2217 0.18 = 60804 \u533a\u6c11\u7a0e = 153061 \u2212 m i n ( 687697 , 60804 ) = 92257 \u6b8b\u984d = 687697 \u2212 60804 = 626893 \\begin{aligned} \u5916\u56fd\u6240\u5f97\u7a0e\u984d &=& 7086 * 151.45 &=& 1073134 \\\\ \u6240\u5f97\u7a0e\u984d &=& 337805 - min(1073134, 337805) &=& = 0 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 1073134 - 337805 &=& 735326 \\\\ \\\\ \u5fa9\u8208\u7a0e &=& 7093 - min(735326, 7393) &=& 0 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 735326 - 7093 &=& 728233 \\\\ \\\\ \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d &=& 337805 * 0.12 &=& 40536 \u90fd\u6c11\u7a0e &=& 229591 - min(728233, 40536) &=& 189055 \\\\ \u5916\u56fd\u63a7\u9664\u6b8b\u984d &=& 728233 - 40536 &=& 687697 \\\\ \\\\ \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d &=& 337805 * 0.18 = 60804 \u533a\u6c11\u7a0e &=& 153061 - min(687697, 60804) = 92257 \\\\ \u6b8b\u984d &=& 687697 - 60804 = 626893 \\\\ \\end{aligned} \u5916\u56fd\u6240\u5f97\u7a0e\u984d \u6240\u5f97\u7a0e\u984d \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u5fa9\u8208\u7a0e \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u90fd\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d \u5916\u56fd\u63a7\u9664\u6b8b\u984d \u533a\u6c11\u7a0e\u63a7\u9664\u9650\u5ea6\u984d \u6b8b\u984d \u200b = = = = = = = = = \u200b 7086 \u2217 151.45 337805 \u2212 min ( 1073134 , 337805 ) 1073134 \u2212 337805 7093 \u2212 min ( 735326 , 7393 ) 735326 \u2212 7093 337805 \u2217 0.12 728233 \u2212 40536 337805 \u2217 0.18 = 60804 \u533a\u6c11\u7a0e 687697 \u2212 60804 = 626893 \u200b = = = = = = = = \u200b 1073134 = 0 735326 0 728233 40536 \u90fd\u6c11\u7a0e 687697 153061 \u2212 min ( 687697 , 60804 ) = 92257 \u200b = \u200b 229591 \u2212 min ( 728233 , 40536 ) \u200b = \u200b 189055 \u200b UK \u306b\u304b\u306a\u308a\u53d6\u3089\u308c\u305f\u4e0a\u306b\u3001\u65e5\u672c\u306b\u306f\u4f4f\u6c11\u7a0e\u309230\u4e07\u5186\u8fd1\u304f\u6255\u308f\u306a\u3044\u3068\u306a\u3089\u3093\u306e\u304b\u30fc\u3002 \u307e\u3041\u4f4f\u6c11\u7a0e\u306f\u5c45\u4f4f\u30b5\u30fc\u30d3\u30b9\u4ee3\u307f\u305f\u3044\u306a\u3082\u3093\u3060\u304b\u3089\u4ed5\u65b9\u306a\u3044\u304b\u3002 \u3061\u306a\u307f\u306b UK \u306e\u4f4f\u6c11\u7a0e\u307f\u305f\u3044\u306a\u3084\u3064\u306f\u5bb6\u306b\u304b\u3051\u3089\u308c\u308b\u305d\u3046\u3060\u304b\u3089\u6255\u308f\u306a\u304f\u3066\u3059\u3080\u3002 \u305d\u3046\u8003\u3048\u308b\u3068 UK \u306e\u9ad8\u3044\u6240\u5f97\u7a0e\u304b\u3089\u65e5\u672c\u306e\u4f4f\u6c11\u7a0e\u3092\u63a7\u9664\u3067\u304d\u308b\u306e\u306f\u3080\u3057\u308d\u7533\u3057\u308f\u3051\u306a\u3044\u611f\u3058\u3082\u3059\u308b\u3002 \u7dcf\u984d\u3060\u3068\u6240\u5f97\u7a0e+\u4f4f\u6c11\u7a0e\u306f 1073134 + 189055 + 92257 = 1354446 \u5186 \u6255\u3046\u3053\u3068\u306b\u306a\u308b\u3002 \u65e5\u672c\u4f01\u696d\u52e4\u3081\u306e\u5834\u5408\u306e 344898 + 382652 = 727550 \u5186 \u304b\u3089\u5b9f\u306b 626896\u5186 \u3082\u30a2\u30c3\u30d7\u3002 \u6240\u5f97\u6bd4\u3060\u3068 686896 / 7270000 = 0.08623 \u30a2\u30c3\u30d7\u3001 \u7a0e\u984d\u6bd4\u3060\u3068 1354446 / 727550 = 1.861 \u500d\u306b\u3002 // \u306a\u304a\u3001UK \u8ee2\u8077\u4e00\u5e74\u76ee\u306f\u3001\u6628\u5e74\u306e\u6240\u5f97\u306b\u5bfe\u3059\u308b\u65e5\u672c\u306e\u4f4f\u6c11\u7a0e\u306f\u5916\u56fd\u63a7\u9664\u5f15\u304b\u308c\u305a\u306b\u305d\u306e\u307e\u307e\u304b\u304b\u308b\u304b\u3089\u3001\u304a\u3088\u305d10\u4e07\u5186\u30d7\u30e9\u30b9\u3002 \u6240\u5f97\u7a0e\u7387\u306f\u3069\u3063\u3061\u3082 20% \u3060\u304c\u3001\u65e5\u672c\u306f\u6240\u5f97\u63a7\u9664(\u57fa\u790e\u63a7\u9664+\u7d66\u4e0e\u6240\u5f97\u63a7\u9664+\u793e\u4f1a\u4fdd\u967a)\u304c344\u4e07\u5186\u306b\u306a\u308b\u306e\u304c\u30c7\u30ab\u3044\u306e\u304b\u306a\u3002 UK \u306f 12570GBP = 190\u4e07\u5186 \u3057\u304b\u5f15\u304b\u308c\u306a\u3044\u3002 \u3044\u3084\u793e\u4f1a\u4fdd\u967a\u306e\u63a7\u9664\u304c 113\u4e07\u5186\u3060\u304b\u3089\u3001\u305d\u308c\u52d8\u6848\u3059\u308c\u3070\u4f3c\u305f\u3088\u3046\u306a\u3082\u3093\u304b\u3002 \u3058\u3083\u3041\u7a0e\u7387\u306b\u4ed8\u968f\u3059\u308b\u63a7\u9664\u984d\u306e 63\u4e07\u5186\u304c\u3067\u304b\u3044\u306e\u304b\u3002\u3061\u3087\u3046\u3069 UK \u3068\u306e\u5dee\u984d\u76f8\u5f53\u3060\u3002 \u7a0e\u7387\u4ed8\u968f\u63a7\u9664\u306e42.7\u4e07\u5186\u3068\u3001\u793e\u4f1a\u4fdd\u967a113\u4e07\u5186\u3068\u305d\u3082\u305d\u3082\u306e\u6240\u5f97\u63a7\u9664\u5dee30\u4e07\u5186\u306e\u7a0e\u91d120%\u306728.6\u4e07\u5186\u3001\u5408\u8a0870\u4e07\u5186\u7a0b\u306e\u6240\u5f97\u7a0e\u304c\u5897\u3048\u308b\u611f\u3058\u304b\u3002 \u4f4f\u6c11\u7a0e\u306f\u5916\u56fd\u63a7\u9664\u306710\u4e07\u5186\u6e1b\u3063\u3066\u3001\u8a0860\u4e07\u5186\u306e\u7a0e\u91d1\u304c\u5897\u3048\u308b\u3002","title":"\u5916\u56fd\u7a0e\u984d\u63a7\u9664\u306e\u8a08\u7b97"},{"location":"topics/Life/2021-04-25--remote-uk/#_13","text":"UK \u306e\u7a0e\u7387\u3092\u898b\u308b\u300240% \u8d8a\u3059\u3088\u3046\u306a\u3089\u6ce8\u610f\u3002 \u793e\u4f1a\u4fdd\u967a\u6599\u5206\u304c UK \u6240\u5f97\u7a0e\u304b\u3089\u5f15\u304b\u308c\u305a\u3001\u3055\u3089\u306b\u7d2f\u9032\u7a0e\u7387\u9593\u306e\u8abf\u6574\u63a7\u9664\u3082\u7121\u3044\u306e\u3067\u305d\u306e\u5206\u7dcf\u984d\u304c\u9ad8\u3044\u3002 \u304a\u3088\u305d\u793e\u4fdd110\u4e07\u3001\u6240\u5f97\u63a7\u9664\u5dee30\u4e07\u306e20% \u306728\u4e07\u5186\u3001\u305d\u308c\u306b\u8abf\u6574\u63a7\u966440\u4e07\u52a0\u3048\u306670\u4e07\u5186\u307b\u3069\u5897\u3048\u308b\u3002 \u65e5\u672c\u306e\u6240\u5f97\u7a0e\u306f\u3053\u306e UK \u7d0d\u7a0e\u5206\u3092\u5dee\u3057\u5f15\u3044\u3066\u30bc\u30ed\u306b\u306a\u308b\u304c\u3001\u4f4f\u6c11\u7a0e\u306f10\u4e07\u5186\u307b\u3069\u3057\u304b\u5f15\u304b\u308c\u306a\u3044\u3002 \u4f4f\u6c11\u7a0e\u306f\u521d\u5e74\u5ea6\u306f\u5f15\u3051\u306a\u3044\u306e\u3067\u305d\u306e\u307e\u307e\u3068\u898b\u3068\u304f\u3068\u3001\u6240\u5f97\u7a0e\u5dee\u306e70\u4e07\u5186\u5206\u30a2\u30c3\u30d7\u3002","title":"\u6240\u5f97\u7a0e\u3001\u4f4f\u6c11\u7a0e\u307e\u3068\u3081"},{"location":"topics/Life/2021-04-25--remote-uk/#_14","text":"\u7a0e\u91d1\u306f\u7d66\u4e0e\u6240\u5f97\u8005\u6271\u3044\u3060\u3063\u305f\u304c\u3001\u793e\u4f1a\u4fdd\u967a\u306f\u30d5\u30ea\u30fc\u30e9\u30f3\u30b9\u6271\u3044\u306b\u306a\u308b\u3002 \u65e5\u672c\u306e\u793e\u4f1a\u4fdd\u967a\u5236\u5ea6\u306f\u4f1a\u793e\u306b\u7ba1\u7406\u3092\u4efb\u305b\u3066\u3044\u308b\u304b\u3089\u306d\u3002 \u8ee2\u8077\u3057\u307e\u304f\u308b\u4eba\u306b\u306f\u9762\u5012\u306a\u3053\u3068\u3053\u306e\u4e0a\u306a\u3044\u3002 \u5e74\u91d1\u8a18\u9332\u3082\u51fa\u751f\u7387\u4e88\u6e2c\u3082\u967d\u6027\u8005\u96c6\u8a08\u3082\u308d\u304f\u306b\u3067\u304d\u306a\u3044\u539a\u751f\u7701\u304b\u3089\u30c7\u30fc\u30bf\u51e6\u7406\u306e\u696d\u52d9\u53d6\u308a\u4e0a\u3052\u3066\u3001\u6b73\u5165\u5e81\u3068\u7d71\u8a08\u5e81\u4f5c\u3063\u3066\u79fb\u7ba1\u3057\u3066\u304f\u3093\u306a\u3044\u304b\u306a\u3041\u3002","title":"\u793e\u4f1a\u4fdd\u967a"},{"location":"topics/Life/2021-04-25--remote-uk/#_15","text":"","title":"\u5065\u5eb7\u4fdd\u967a\u3001\u4ecb\u8b77\u4fdd\u967a"},{"location":"topics/Life/2021-04-25--remote-uk/#_16","text":"\u4ee5\u524d\u306e\u5065\u4fdd\u306f\u5354\u4f1a\u3051\u3093\u307d(\u5168\u56fd\u5065\u5eb7\u4fdd\u967a\u5354\u4f1a)\u3060\u3063\u305f\u3002 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r2/ippan_3/r20913tokyo.pdf \u306b\u3088\u308b\u3068\u3001\u670861\u4e07\u5186\u3060\u3068\u7b49\u7d1a34(31)\u3067\u6a19\u6e96\u6708\u984d62\u4e07\u5186\u3002 \u533b\u7642\u4fdd\u967a\u306f 9.87% \u3067 61194\u5186\u3002\u4ecb\u8b77\u4fdd\u967a \u306f 1.79% \u3067 11098\u5186\u3002 \u4e8b\u696d\u8005\u6298\u534a\u3057\u3066\u304f\u308c\u308b\u306e\u3067 30597\u5186 \u3068 5549\u5186\u3068\u306a\u308a\u3001\u660e\u7d30\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3002 \u5408\u308f\u305b\u3066 36146\u5186\u3002\u5e74\u984d\u3060\u3068 433752 \u5186\u3002 \u3061\u306a\u307f\u306b\u533b\u7642\u4fdd\u967a 9.87% \u306e\u3046\u3061 3.53 \u30dd\u30a4\u30f3\u30c8\u5206\u306f\u7279\u5b9a\u4fdd\u967a\u6599\u3001\u4e3b\u306b\u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1\u3068\u3044\u3046\u3084\u3064\u3060\u3002 \u3064\u307e\u308a\u533b\u7642\u4fdd\u967a\u90e8\u5206\u306f 6.34% \u306b\u306a\u308b\u3002","title":"\u65e5\u672c\u4f01\u696d\u6642\u4ee3"},{"location":"topics/Life/2021-04-25--remote-uk/#_17","text":"\u4fdd\u967a\u6599\u306f\u5e02\u533a\u5358\u4f4d\u3089\u3057\u3044\u3002\u6e0b\u8c37\u533a\u306f https://www.city.shibuya.tokyo.jp/kurashi/kokuho_nenkin/kokuho/hokenryo_26.html \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d\u306b\u6240\u5f97\u5272\u3092\u639b\u3051\u3066\u5747\u7b49\u5272\u3092\u8db3\u3059\u3002 \u5747\u7b49\u5272\u3092\u5dee\u3057\u5f15\u304f\u3068\u3001\u533b\u7642\u4fdd\u967a 7.14%, \u652f\u63f4\u91d12.29%, \u4ecb\u8b77\u4fdd\u967a1.94% \u3067\u652f\u63f4\u91d1\u4ee5\u5916\u306f\u5354\u4f1a\u3051\u3093\u307d\u3088\u308a\u9ad8\u3044\u306a\u3002 \u652f\u63f4\u91d1\u304c\u5b89\u3044\u306e\u306f\u533a\u5185\u306f\u82e5\u8005\u304c\u591a\u3044\u304b\u3089\u304b\u306a? \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d\u306f\u3001\u53ce\u5165\u304b\u3089\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3068\u57fa\u790e\u63a7\u9664\u3092\u5f15\u3044\u305f\u984d\u3002 \u6599\u7387\u306a\u3069\u306f\u3082\u3061\u308d\u3093\u3001\u3053\u306e\u57fa\u790e\u984d\u306e\u8a08\u7b97\u3067\u7d66\u4e0e\u6240\u5f97\u63a7\u9664\u3092\u5f15\u304f\u304b\u3069\u3046\u304b\u3082\u81ea\u6cbb\u4f53\u3067\u5dee\u304c\u3042\u308b\u3088\u3046\u3060\u3002 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d = \u53ce\u5165 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u2212 \u57fa\u790e\u63a7\u9664 = 7270000 \u2212 1827000 \u2212 480000 = 4963000 \u533b\u7642\u4fdd\u967a = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 7.14 \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 2.29 \u4ecb\u8b77\u4fdd\u967a = \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 1.94 \u7dcf\u984d = 394258 + 126552 + 111882 = 632692 \\begin{aligned} \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d &=& \u53ce\u5165 - \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 - \u57fa\u790e\u63a7\u9664 &=& 7270000 - 1827000 - 480000 &=& 4963000 \\\\ \u533b\u7642\u4fdd\u967a &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 7.14% + 39900 &=& 394258 \\\\ \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 2.29% + 12900 &=& 126552 \\\\ \u4ecb\u8b77\u4fdd\u967a &=& \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d * 1.94% + 15600 &=& 111882 \\\\ \u7dcf\u984d &=& 394258 + 126552 + 111882 = 632692 \\\\ \\end{aligned} \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u533b\u7642\u4fdd\u967a \u200b = = \u200b \u53ce\u5165 \u2212 \u7d66\u4e0e\u6240\u5f97\u63a7\u9664 \u2212 \u57fa\u790e\u63a7\u9664 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 7.14 \u5f8c\u671f\u9ad8\u9f62\u8005\u652f\u63f4\u91d1 \u200b = = \u200b 7270000 \u2212 1827000 \u2212 480000 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 2.29 \u4ecb\u8b77\u4fdd\u967a \u200b = = \u200b 4963000 \u6240\u5f97\u5272\u7b97\u5b9a\u57fa\u790e\u984d \u2217 1.94 \u7dcf\u984d \u200b = \u200b 394258 + 126552 + 111882 = 632692 \u200b \u6240\u5f97\u63a7\u9664\u304c\u52b9\u3044\u3066\u308b\u3051\u3069\u3082\u3001\u4e8b\u696d\u8005\u6298\u534a\u5206\u304c\u3067\u304b\u304f\u3066\u5354\u4f1a\u3051\u3093\u307d\u306e\u65b9\u304c\u652f\u6255\u3044\u984d\u306f20\u4e07\u5186\u3082\u5b89\u3044\u3084\u3002","title":"\u56fd\u4fdd\u79fb\u884c\u306e\u5834\u5408"},{"location":"topics/Life/2021-04-25--remote-uk/#_18","text":"\u5354\u4f1a\u3051\u3093\u307d\u306f\u4efb\u610f\u7d99\u7d9a\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u3063\u3066\u3001\u9000\u8077\u5f8c2\u5e74\u9593\u306f\u52a0\u5165\u3057\u7d9a\u3051\u3089\u308c\u308b\u3002 https://www.kyoukaikenpo.or.jp/shibu/miyagi/cat080/20170914028/ \u57fa\u672c\u7684\u306b\u306f\u4e8b\u696d\u8005\u6298\u534a\u5206\u304c\u7121\u304f\u306a\u308b\u304b\u3089\u500d\u306b\u306a\u308b\u304c\u3001 https://www.kyoukaikenpo.or.jp/g6/cat650/r321/#q1 \u6a19\u6e96\u6708\u984d\u5831\u916c\u306f30\u4e07\u5186\u304c\u4e0a\u9650\u306b\u306a\u308b\u3002 \u4ee4\u548c3\u5e74\u3060\u3068 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r3/ippan/r30213tokyo.pdf \u7b49\u7d1a22(19) \u3067\u3001\u533b\u7642\u3001\u652f\u63f4\u3001\u4ecb\u8b77\u5408\u308f\u305b\u3066\u6708\u984d34920\u5186\u3002\u5e74\u984d419040\u5186\u3002 \u6e0b\u8c37\u533a\u3088\u308a\u3082 20\u4e07\u5186\u5b89\u304f\u3001\u65e5\u672c\u4f01\u696d\u52e4\u52d9\u6642\u4ee3\u3088\u308a\u3082 1.4\u4e07\u5186\u5b89\u3044\u3002","title":"\u5354\u4f1a\u3051\u3093\u307d\u4efb\u610f\u7d99\u7d9a"},{"location":"topics/Life/2021-04-25--remote-uk/#_19","text":"\u4efb\u610f\u7d99\u7d9a\u4f7f\u3048\u3070\u307b\u307c\u540c\u984d\u3002","title":"\u5065\u5eb7\u4fdd\u967a\u307e\u3068\u3081"},{"location":"topics/Life/2021-04-25--remote-uk/#_20","text":"\u4f1a\u793e\u54e1\u3060\u3068 \u539a\u751f\u5e74\u91d1+\u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1+\u4f01\u696d\u5e74\u91d1\u3002 \u81ea\u55b6\u696d\u3060\u3068\u56fd\u6c11\u5e74\u91d1+\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1+\u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1\u3002 \u539a\u751f\u5e74\u91d1\u306f\u3001\u81ea\u55b6\u696d\u306e\u56fd\u6c11\u5e74\u91d1+\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u306b\u76f8\u5f53\u3002 \u4f01\u696d\u5e74\u91d1\u306f\u3001\u4f01\u696d\u72ec\u81ea\u306b\u904b\u55b6\u3057\u3066\u308b\u3084\u3064\u3002\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u30b9\u30eb\u30fc\u3002 \u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1\u306f iDeCo \u3063\u3066\u3084\u3064\u3002","title":"\u5e74\u91d1\u4fdd\u967a"},{"location":"topics/Life/2021-04-25--remote-uk/#_21","text":"\u539a\u751f\u5e74\u91d1\u3082\u5354\u4f1a\u3051\u3093\u307d\u7ba1\u638c\u3067\u3001 https://www.kyoukaikenpo.or.jp/~/media/Files/shared/hokenryouritu/r2/ippan_3/r20913tokyo.pdf \u57fa\u91d1\u306b\u306f\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u6a19\u6e96\u6708\u984d62\u4e07\u5186\u306e 18.3% \u3092\u4e8b\u696d\u8005\u6298\u534a\u3002 620000 \u2217 0.183 / 2 = 113460 / 2 = 56730 \\begin{aligned} 620000 * 0.183 / 2 = 113460 / 2 = 56730 \\\\ \\end{aligned} 620000 \u2217 0.183/2 = 113460/2 = 56730 \u200b \u5236\u5ea6\u306e\u9055\u3044\u306f\u304a\u3044\u3068\u3044\u3066\u3001\u307e\u305a\u6298\u534a\u5206\u306e 56730 \u5186\u304c UK \u52e4\u3081\u306b\u3088\u308b\u53ce\u5165\u6e1b\u3068\u307f\u306a\u305b\u308b\u3002 \u539a\u751f\u5e74\u91d1\u306f\u6bce\u670856730\u5186\u3067\u3042\u3063\u305f\u304c\u3001\u3053\u308c\u306f\u56fd\u6c11\u5e74\u91d1\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002 \u56fd\u6c11\u5e74\u91d1\u306f\u5b9a\u984d16540\u5186\u306a\u306e\u3067\u3001\u5dee\u3057\u5f15\u304f\u3068 113460 - 16540 = 96920 \u5186 \u304c\u4e8c\u968e\u90e8\u5206\u3002 \u540c\u7b49\u306e\u639b\u3051\u91d1\u3092\u51fa\u3059\u306a\u3089\u3001\u670896920\u5186\u3092\u4e8c\u968e\u90e8\u5206\u306b\u6255\u3046\u3002","title":"\u65e5\u672c\u4f01\u696d\u6642\u4ee3"},{"location":"topics/Life/2021-04-25--remote-uk/#_22","text":"\u57fa\u672c\u7684\u306b\u56fd\u6c11\u5e74\u91d1\u306f\u4f1a\u793e\u54e1\u3067\u3082\u81ea\u55b6\u696d\u3067\u3082\u540c\u3058\u306716540\u5186\u3002 \u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u306b\u5165\u3089\u306a\u3044\u5834\u5408\u306f\u3001400\u5186\u7a4d\u307f\u5897\u3057\u3067\u304d\u308b\u3002","title":"\u56fd\u6c11\u5e74\u91d1"},{"location":"topics/Life/2021-04-25--remote-uk/#_23","text":"\u81ea\u55b6\u696d\u8005\u7528\u306e\u4e8c\u968e\u90e8\u5206\u306f\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1\u3002 \u7d44\u7e54\u3082\u9055\u3046\u306e\u3067\u30ea\u30bf\u30fc\u30f3\u304c\u540c\u3058\u306b\u306a\u308b\u304b\u306f\u4e0d\u660e\u3060\u3051\u3069\u3001\u65e5\u672c\u4f01\u696d\u6642\u4ee3\u3068\u540c\u984d\u3092\u7a4d\u3080\u306a\u3089 96920\u5186\u3002","title":"\u56fd\u6c11\u5e74\u91d1\u57fa\u91d1"},{"location":"topics/Life/2021-04-25--remote-uk/#ideco","text":"\u3053\u308c\u306f\u65e5\u672c\u4f01\u696d\u52e4\u3081\u3068\u5909\u308f\u3089\u306a\u3044\u3002 \u4f01\u696d\u306b\u3088\u3063\u3066\u306f\u72ec\u81ea\u306e\u4f01\u696d\u5e74\u91d1\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u3082\u3042\u308b\u304b\u3089\u3001\u3042\u308c\u3070\u305d\u3053\u3068\u306e\u5dee\u306b\u306a\u308b\u3002 \u3046\u3061\u306f\u7121\u304b\u3063\u305f\u306e\u3067\u30013\u968e\u3084\u308b\u306a\u3089 iDeCo \u3060\u3063\u305f\u3002\u81ea\u55b6\u696d\u306b\u306a\u3063\u3066\u3082\u5dee\u7570\u306f\u7121\u3057\u3002","title":"\u78ba\u5b9a\u62e0\u51fa\u5e74\u91d1(iDeCo)"},{"location":"topics/Life/2021-04-25--remote-uk/#_24","text":"\u65e5\u672c\u4f01\u696d\u6642\u4ee3\u306b\u6255\u3063\u3066\u305f\u539a\u751f\u5e74\u91d1\u4fdd\u967a\u6599\u3068\u540c\u984d\u3092\u4f1a\u793e\u304c\u51fa\u3057\u3066\u304f\u308c\u3066\u3044\u305f\u306e\u3067\u3001UK \u4f01\u696d\u306b\u306a\u308b\u3068\u305d\u306e\u5206\u3060\u3051\u53ce\u5165\u6e1b\u3068\u307f\u306a\u305b\u308b\u3002","title":"\u5e74\u91d1\u307e\u3068\u3081"},{"location":"topics/Life/2021-04-25--remote-uk/#_25","text":"\u81ea\u55b6\u696d\u6271\u3044\u3060\u304c\u3001\u81ea\u55b6\u696d\u306f\u96c7\u7528\u4fdd\u967a\u306b\u5165\u308c\u306a\u3044\u3002 \u65e5\u672c\u4f01\u696d\u6642\u4ee3\u306f\u6708\u984d1830\u5186\u3001\u4f1a\u793e\u8ca0\u62c5\u306f\u500d\u306e3660\u5186\u3002 \u4f1a\u793e\u8ca0\u62c5\u984d\u304c\u6e1b\u53ce\u76f8\u5f53\u3068\u3044\u3046\u3088\u308a\u3082\u3001\u96c7\u7528\u4fdd\u967a\u306b\u5165\u308c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u81ea\u4f53\u306e\u30de\u30a4\u30ca\u30b9\u304c\u5927\u304d\u3044\u304b\u306a\u3002 \u3060\u3044\u305f\u3044\u8ee2\u8077\u5148\u898b\u3064\u3051\u3066\u304b\u3089\u9000\u8077\u3057\u3066\u308b\u306e\u3067\u3001\u5b9f\u969b\u6d3b\u7528\u3057\u305f\u3053\u3068\u306f\u7121\u3044\u306e\u3060\u304c\u3002 \u4fdd\u967a\u3060\u304b\u3089\u306d\u3002 \u3061\u306a\u307f\u306b\u500b\u4eba\u4e8b\u696d\u8005\u5411\u3051\u306b\u306f\u5c0f\u898f\u6a21\u4f01\u696d\u5171\u6e08\u306a\u3069\u3042\u308b\u3051\u3069\u3082\u3001UK \u4f01\u696d\u52e4\u3081\u306e\u30b5\u30e9\u30ea\u30fc\u30de\u30f3\u306a\u306e\u3067\u52a0\u5165\u306f\u3067\u304d\u306a\u3044\u3002","title":"\u96c7\u7528\u4fdd\u967a"},{"location":"topics/Life/2021-04-25--remote-uk/#_26","text":"\u5165\u308c\u306a\u3044\u306e\u3067\u3001\u89e3\u96c7\u6642\u306e\u6e96\u5099\u306f\u81ea\u5206\u3067\u78ba\u4fdd\u3002","title":"\u96c7\u7528\u4fdd\u967a\u307e\u3068\u3081"},{"location":"topics/Life/2021-04-25--remote-uk/#_27","text":"\u52b4\u707d\u4fdd\u967a\u3082\u5165\u308c\u306a\u3044\u3002 \u4fdd\u967a\u6599\u306f\u65e5\u672c\u4f01\u696d\u52e4\u3081\u306e\u660e\u7d30\u3060\u3068\u96c7\u7528\u4fdd\u967a\u306b\u542b\u307e\u308c\u3066\u308b\u307f\u305f\u3044\u3002\u8a73\u7d30\u4e0d\u660e\u3002 \u3053\u308c\u3082\u4fdd\u967a\u6599\u3068\u3044\u3046\u3088\u308a\u3082\u5165\u308c\u306a\u3044\u3053\u3068\u304c\u30c7\u30e1\u30ea\u30c3\u30c8\u3060\u304c\u3001 \u30d7\u30ed\u30b0\u30e9\u30de\u3060\u3068\u52b4\u707d\u3068\u3044\u3063\u3066\u3082\u901a\u52e4\u304f\u3089\u3044\u3060\u3057\u306d\u3002 \u3055\u307b\u3069\u30ea\u30b9\u30af\u306f\u9ad8\u304f\u306a\u3044\u3002","title":"\u52b4\u707d\u4fdd\u967a"},{"location":"topics/Life/2021-04-25--remote-uk/#_28","text":"\u5165\u308c\u306a\u3044\u306e\u3067\u3001\u52b4\u707d\u8d77\u3053\u3055\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3002 \u30ea\u30b9\u30af\u3042\u308b\u4f5c\u696d\u3059\u308b\u306a\u3089\u640d\u4fdd\u3068\u304b\u751f\u4fdd\u3068\u304b\u81ea\u8ce0\u8cac\u3068\u304b\u5165\u308a\u307e\u3057\u3087\u3046\u3002","title":"\u52b4\u707d\u4fdd\u967a\u307e\u3068\u3081"},{"location":"topics/misc/2016-10-15--rust-netlibs/","tags":["Tech","Rust"],"text":"2016-10-15 \u6ce8\u610f 2016\u5e74\u79cb\u3054\u308d\u306e\u8abf\u67fb\u306a\u306e\u3067\u6700\u65b0\u72b6\u6cc1\u306f\u9055\u3063\u3066\u307e\u3059 \u52d5\u6a5f \u306a\u3093\u304b\u8272\u3005\u3042\u308b\u3051\u3069\u3088\u304f\u5206\u304b\u3089\u3093\u306e\u3067 crates.io \u3092\u30b5\u30fc\u30d9\u30a4\u3002 \u6700\u65b0\u7248\u306e\u65e5\u4ed8\u3068\u7dcf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6570\u3082\u5408\u308f\u305b\u3066\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3002 ~~echo \u30b5\u30fc\u30d0\u30fc\u4f5c\u308b\u3068\u304d\u306e\u5178\u578b\u7684\u8a2d\u8a08\u3082\u8efd\u304f\u4ed8\u8a18\u3002~~ echo \u3058\u3083\u306a\u304f\u3066\u3001\u5358\u7d14\u306b\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u30b3\u30fc\u30c9\u3002 std::net BSD socket API \u540c\u7b49\u3002select \u7cfb\u306f\u7121\u3055\u3052\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn.read(&mut buf [ 0 .. ] ) { Ok(0) => { println!(\" read : closed \"); return Ok(()); } Ok(n) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { match e.kind() { std::io::ErrorKind::WouldBlock => (), _ => return Err(format!(\" read : {} \" , e )), } } } std :: thread :: sleep ( sleeptime ); } \u53e4\u5178\u7684\u3002 net2 2016-07-16(0.2.26) 236,294 std::net \u306e\u30e9\u30c3\u30d1\u3002 bind \u3068\u304b reuse_address \u3068\u304b\u3092\u9023\u7d50\u3057\u3066\u66f8\u3051\u308b\u3060\u3051\uff1f listen/connect \u3057\u305f\u5f8c\u306f net \u306e TcpListener \u3084 TcpStream \u306b\u306a\u308b\u3002 1 2 3 4 net2::TcpBuilder::new_v4() .and_then(|t| {t.reuse_address(true)}) .and_then(|t| {t.bind(addr)} .and_then(|t| {t.listen(backlog)}) Rust \u3060\u3068\u30a8\u30e9\u30fc\u4e0d\u78ba\u5b9a\u72b6\u614b\u306e\u30e2\u30ca\u30c9\u7e4b\u3052\u308b\u3088\u308a\u306f try! \u3067\u4e00\u51e6\u7406\u305a\u3064\u30c1\u30a7\u30c3\u30af\u304b\u3051\u308b\u30b9\u30bf\u30a4\u30eb\u3060\u3057\u3001 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u30ad\u30e2\u306f\u63a5\u7d9a\u3057\u305f\u5f8c\u306e\u51e6\u7406\u3067\u3042\u308b\u304b\u3089\u3001bind/listen \u306e\u3068\u3053\u3060\u3051\u30b9\u30bf\u30a4\u30eb\u5909\u3048\u3089\u308c\u3066\u3082\u3069\u3046\u3067\u3082\u3044\u3044\u611f\u3058\u3067\u3042\u308b\u3002 mio 2016-09-02(0.6.0) 131,570 \u8efd\u91cf\u306e\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u30e9\u30a4\u30d6\u30e9\u30ea\u3002 net2 \u306b\u4f9d\u5b58\u3002 epoll \u306a\u611f\u3058\u306e\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3067\u66f8\u304f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 let poller = mio :: Poll :: new (). unwrap (); let token_id = 0 ; let mut conn: mio :: tcp :: TcpStream = ...; poller . register ( & conn , mio :: Token ( token_id ), mio :: Ready :: readable (), mio :: PollOpt :: edge ()). unwrap (); let mut buf = [ 0 u8 ; 1024 ]; let mut events = mio :: Events :: with_capacity ( 1024 ); loop { poller . poll ( & mut events , None ). unwrap (); for ev in events . iter () { match ev . token () { mio :: Token ( id ) if id == token_id => { match conn . read ( & mut buf [ 0. .]) { Ok ( 0 ) => { println ! ( \"read: closed\" ); return Ok (()); } Ok ( n ) => { println ! ( \"recv[{}]: {}\" , n , std :: str :: from_utf8 ( & buf [ 0. . n ]). unwrap ()); } Err ( e ) => { return Err ( format ! ( \"read: {}\" , e )); } } } mio :: Token ( _ ) => (), } } } \u53d7\u4fe1\u30a4\u30d9\u30f3\u30c8\u5224\u5b9a\u306e\u3061\u306b read \u3059\u308b\u304b\u3089\u3001wouldblock \u306f\u8d77\u304d\u306a\u3044\u3001\u3068\u3002 \u3053\u306e\u66f8\u304d\u65b9\u306e\u30e1\u30ea\u30c3\u30c8\u3084\u9650\u754c\u306f select/epoll \u7cfb\u305d\u306e\u307e\u3093\u307e\u3067\u3059\u306a\u3002 \u3042\u3068\u5b9f\u969b\u306f listener \u3082 poller \u306b\u7a81\u3063\u8fbc\u3080\u3088\u308d\u3057\u3002 mio \u4f9d\u5b58 rotor 2016-05-21(0.6.3) 18,705 StateMachine \u3089\u3057\u3044\u304c\u2026\u3069\u3046\u3044\u3046\u69cb\u9020\u306a\u306e\u304b\u3055\u3063\u3071\u308a\u5206\u304b\u3089\u3093\uff57 dns, redis, http \u306a\u3093\u304b\u306e\u5b9f\u88c5\u3082\u3042\u308b\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u306f\u306a\u3063\u3066\u3044\u308b\u3093\u3060\u308d\u3046\u3051\u3069\u3082\u3002 rotor-stream \u3063\u3066\u306e\u3067\u3001\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u66f8\u3051\u308b\u307f\u305f\u3044\u3002 tokio-core 2016-09-10(0.1.0) 3,214 \u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3068 future \u306b\u3088\u308b\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30bf\u30a4\u30eb\u306e API future \u306f\u540c\u3058\u4f5c\u8005\u306e future crates \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\u3053\u306e future \u3067 mio \u3092\u76f4\u306b\u4f7f\u3063\u305f HTTP \u30b5\u30fc\u30d0\u30fc\u306f\u304b\u306a\u308a\u826f\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u51fa\u3057\u3066\u3044\u308b( https://aturon.github.io/blog/2016/08/11/futures/ ) tokio \u306f\u3053\u306e future \u3092\u4f7f\u3063\u3066 finagle \u307f\u305f\u3044\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f5c\u308b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3001tokio-core \u304c mio \u3068 future \u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u90e8\u5206\u306e\u3088\u3046\u3060\u3002 tokio-service \u306b\u306f finagle \u306e Service \u307d\u3044\u30af\u30e9\u30b9\u304c\u3042\u308b\u3002 Finagle \u306f\u3044\u3044\u305e\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 pub fn main () - > Result <(), String > { let addr = try!( std : : net :: SocketAddr :: from_str ( \"127.0.0.1:10000\" ) . map_err ( | e | format !( \"parse: {}\" , e ))); let mut core = tokio_core : : reactor :: Core :: new () . unwrap (); let handle = core.handle() ; let listener = tokio_core : : net :: TcpListener :: bind ( & addr , & handle ) . unwrap (); let r = listener.incoming().for_each(move |(conn,_addr)| { let buf = vec! [ 0 u8 ; 1024 ] ; // tokio_core : : io :: read requires AsMut let iter = futures :: stream :: iter ( std :: iter :: repeat (( )) . map ( Ok ::<( ), std :: io :: Error > )); let f = iter.fold((conn,buf), |(conn,buf), _| { // use iter and fold to move ownership of buf to closure tokio_core : : io :: read ( conn , buf ) . and_then ( |( r , t , size ) | { if size == 0 { println ! ( \"closed\" ); Err( std : : io :: Error :: new ( std :: io :: ErrorKind :: BrokenPipe , \"closed\" )) } else { println!(\" recv [ {} ] : { } \" , size , std :: str :: from_utf8 (& t [ 0 .. size ] ) . unwrap ()); Ok (( r , t )) } } ) } ); handle . spawn ( f . then (| _ | Ok (()))); Ok (()) } ); core . run ( r ) . unwrap (); Ok (()) } read \u30eb\u30fc\u30d7\u304c\u7121\u9650\u30a4\u30c6\u30ec\u30fc\u30bf\u306e fold \u306b\u306a\u308b\u306e\u304c\u4e00\u5bf8\u6238\u60d1\u3046\u3002 \u3053\u308c\u3060\u3051\u306a\u3089\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u65b9\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u304c\u3001\u5225\u306e I/O \u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u306a\u308b\u3068 future \u306e\u5a01\u529b\u304c\u51fa\u3066\u304d\u305d\u3046\u3060\u3002 mioco 2016-08-22(0.8.1) 3,753 \u30b3\u30eb\u30fc\u30c1\u30f3\u30b9\u30bf\u30a4\u30eb\u306e API. \u30b3\u30eb\u30fc\u30c1\u30f3\u306f coio \u4f5c\u8005\u306e context-rs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 pub fn main () - > Result <(), String > { mioco : : start ( || - > Result <( ), String > { let listener : mioco :: tcp :: TcpListener = try ! ( bind ()); loop { let mut conn : mioco :: tcp :: TcpStream = try ! ( listener . accept () . map_err ( | e | format !( \"accept: {}\" , e ))); mioco : : spawn ( move || - > Result <( ), String > { let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn.read(&mut buf [ 0 .. ] ) { Ok(0) => { println!(\" read : closed \"); return Ok(()); } Ok(n) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { return Err(format!(\" read : {} \" , e )); } } } } ); } } ) . unwrap () } mioco \u4f7f\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u51e6\u7406\u306e\u5168\u4f53\u3092 mioco::start \u3067\u62ec\u308b\u3002 mioco::spawn \u306f Rust \u306e\u30b9\u30ec\u30c3\u30c9\u3068\u540c\u3058\u66f8\u304d\u65b9\u3060\u304c\u3001\u30b0\u30ea\u30fc\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u3042\u308d\u3046\u3002 \u63a5\u7d9a\u6bce\u30b3\u30eb\u30fc\u30c1\u30f3\u306a\u306e\u3067\u898b\u901a\u3057\u304c\u826f\u3044\u3002mio \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u63a5\u7d9a\u4e00\u3064\u3060\u3051\u3060\u3051\u3069\u3001\u3053\u3061\u3089\u306f\u8907\u6570\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u308b\u3002 \u4e00\u822c\u306b\u63a5\u7d9a\u6bce\u306eOS\u30b9\u30ec\u30c3\u30c9\u65b9\u5f0f\u306f\u3001 Pros: \u63a5\u7d9a\u6bce\u306b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30af\u30ea\u30a2\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u3067\u3001\u30d0\u30c3\u30d5\u30a1\u51e6\u7406\u304c\u697d Cons: \u63a5\u7d9a\u6570(=\u30b9\u30ec\u30c3\u30c9\u6570)\u5897\u52a0\u306b\u3068\u3082\u306a\u3046\u6027\u80fd\u52a3\u5316 \u3068\u3044\u3046\u7279\u5fb4\u304c\u3042\u308b\u304c\u3001\u30b0\u30ea\u30fc\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u3042\u308c\u3070\u6b20\u70b9\u304c\u7121\u304f\u5229\u70b9\u3060\u3051\u4eab\u53d7\u3067\u304d\u308b\u306f\u305a\u3002 \u8ab0\u304b C10K \u3067\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8a66\u3057\u3066\u307f\u3066;-) event 2015-01-05(0.2.1) 1,384 \u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u306e\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3002 aio 2015-01-05(0.0.1) 666 \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O \u3089\u3057\u3044\u3002 \u540d\u524d\u306f\u975e\u540c\u671fI/O\u307d\u3044\u304c? asio 2016-05-05(0.1.0) 240 \u975e\u540c\u671fI/O futures-mio 2016-08-01(0.1.0) 112 futures \u3068 mio \u7d44\u307f\u5408\u308f\u305b\u305f\u3084\u3064\u3067\u3001tokio \u306b\u767a\u5c55\u7684\u306b\u89e3\u6d88\u3057\u305f\u306e\u3067\u3042\u308d\u3046\u3002\u540c\u3058\u4f5c\u8005\u3060\u3057\u3002 coio-rs \u30b3\u30eb\u30fc\u30c1\u30f3\u30b9\u30bf\u30a4\u30eb\u3002 \u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u540c\u4f5c\u8005\u306e context-rs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 pub fn main () - > Result <(), String > { coio : : Scheduler :: new () . with_workers ( 4 ) . run ( || { let listener = coio :: net :: TcpListener :: bind ( \"127.0.0.1:10000\" ) . unwrap () ; loop { let ( mut conn , _addr ) = try ! ( listener . accept () . map_err ( | e | format !( \"accept: {}\" , e ))); coio : : spawn ( move || { let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn . read ( & mut buf [ 0 .. ] ) { Ok ( 0 ) => { println !( \"read: closed\" ); break ; } Ok ( n ) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { println!(\" read : {} \" , e ); break ; } } } } ); } } ) . unwrap () } \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f mioco \u3068\u307b\u3068\u3093\u3069\u540c\u3058\u3002 \u30b3\u30eb\u30fc\u30c1\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u540c\u3058\u3002 \u307e\u3068\u3081 std::net, net2, mio \u306e\u30b9\u30bf\u30c3\u30af\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u307d\u3044\u3002 mio \u306e\u4e0a\u306b aio/future/coroutine/fsm \u30b9\u30bf\u30a4\u30eb\u306a\u3069\u8272\u3005\u306a crate \u304c\u3042\u308b\u611f\u3058\u304b\u306a\u3002","title":"Rust \u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30e9\u30a4\u30d6\u30e9\u30ea/\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af"},{"location":"topics/misc/2016-10-15--rust-netlibs/#_1","text":"2016\u5e74\u79cb\u3054\u308d\u306e\u8abf\u67fb\u306a\u306e\u3067\u6700\u65b0\u72b6\u6cc1\u306f\u9055\u3063\u3066\u307e\u3059","title":"\u6ce8\u610f"},{"location":"topics/misc/2016-10-15--rust-netlibs/#_2","text":"\u306a\u3093\u304b\u8272\u3005\u3042\u308b\u3051\u3069\u3088\u304f\u5206\u304b\u3089\u3093\u306e\u3067 crates.io \u3092\u30b5\u30fc\u30d9\u30a4\u3002 \u6700\u65b0\u7248\u306e\u65e5\u4ed8\u3068\u7dcf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6570\u3082\u5408\u308f\u305b\u3066\u30ea\u30b9\u30c8\u30a2\u30c3\u30d7\u3002 ~~echo \u30b5\u30fc\u30d0\u30fc\u4f5c\u308b\u3068\u304d\u306e\u5178\u578b\u7684\u8a2d\u8a08\u3082\u8efd\u304f\u4ed8\u8a18\u3002~~ echo \u3058\u3083\u306a\u304f\u3066\u3001\u5358\u7d14\u306b\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u30b3\u30fc\u30c9\u3002","title":"\u52d5\u6a5f"},{"location":"topics/misc/2016-10-15--rust-netlibs/#stdnet","text":"BSD socket API \u540c\u7b49\u3002select \u7cfb\u306f\u7121\u3055\u3052\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn.read(&mut buf [ 0 .. ] ) { Ok(0) => { println!(\" read : closed \"); return Ok(()); } Ok(n) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { match e.kind() { std::io::ErrorKind::WouldBlock => (), _ => return Err(format!(\" read : {} \" , e )), } } } std :: thread :: sleep ( sleeptime ); } \u53e4\u5178\u7684\u3002","title":"std::net"},{"location":"topics/misc/2016-10-15--rust-netlibs/#net2-2016-07-160226-236294","text":"std::net \u306e\u30e9\u30c3\u30d1\u3002 bind \u3068\u304b reuse_address \u3068\u304b\u3092\u9023\u7d50\u3057\u3066\u66f8\u3051\u308b\u3060\u3051\uff1f listen/connect \u3057\u305f\u5f8c\u306f net \u306e TcpListener \u3084 TcpStream \u306b\u306a\u308b\u3002 1 2 3 4 net2::TcpBuilder::new_v4() .and_then(|t| {t.reuse_address(true)}) .and_then(|t| {t.bind(addr)} .and_then(|t| {t.listen(backlog)}) Rust \u3060\u3068\u30a8\u30e9\u30fc\u4e0d\u78ba\u5b9a\u72b6\u614b\u306e\u30e2\u30ca\u30c9\u7e4b\u3052\u308b\u3088\u308a\u306f try! \u3067\u4e00\u51e6\u7406\u305a\u3064\u30c1\u30a7\u30c3\u30af\u304b\u3051\u308b\u30b9\u30bf\u30a4\u30eb\u3060\u3057\u3001 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u30ad\u30e2\u306f\u63a5\u7d9a\u3057\u305f\u5f8c\u306e\u51e6\u7406\u3067\u3042\u308b\u304b\u3089\u3001bind/listen \u306e\u3068\u3053\u3060\u3051\u30b9\u30bf\u30a4\u30eb\u5909\u3048\u3089\u308c\u3066\u3082\u3069\u3046\u3067\u3082\u3044\u3044\u611f\u3058\u3067\u3042\u308b\u3002","title":"net2 2016-07-16(0.2.26) 236,294"},{"location":"topics/misc/2016-10-15--rust-netlibs/#mio-2016-09-02060-131570","text":"\u8efd\u91cf\u306e\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u30e9\u30a4\u30d6\u30e9\u30ea\u3002 net2 \u306b\u4f9d\u5b58\u3002 epoll \u306a\u611f\u3058\u306e\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3067\u66f8\u304f\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 let poller = mio :: Poll :: new (). unwrap (); let token_id = 0 ; let mut conn: mio :: tcp :: TcpStream = ...; poller . register ( & conn , mio :: Token ( token_id ), mio :: Ready :: readable (), mio :: PollOpt :: edge ()). unwrap (); let mut buf = [ 0 u8 ; 1024 ]; let mut events = mio :: Events :: with_capacity ( 1024 ); loop { poller . poll ( & mut events , None ). unwrap (); for ev in events . iter () { match ev . token () { mio :: Token ( id ) if id == token_id => { match conn . read ( & mut buf [ 0. .]) { Ok ( 0 ) => { println ! ( \"read: closed\" ); return Ok (()); } Ok ( n ) => { println ! ( \"recv[{}]: {}\" , n , std :: str :: from_utf8 ( & buf [ 0. . n ]). unwrap ()); } Err ( e ) => { return Err ( format ! ( \"read: {}\" , e )); } } } mio :: Token ( _ ) => (), } } } \u53d7\u4fe1\u30a4\u30d9\u30f3\u30c8\u5224\u5b9a\u306e\u3061\u306b read \u3059\u308b\u304b\u3089\u3001wouldblock \u306f\u8d77\u304d\u306a\u3044\u3001\u3068\u3002 \u3053\u306e\u66f8\u304d\u65b9\u306e\u30e1\u30ea\u30c3\u30c8\u3084\u9650\u754c\u306f select/epoll \u7cfb\u305d\u306e\u307e\u3093\u307e\u3067\u3059\u306a\u3002 \u3042\u3068\u5b9f\u969b\u306f listener \u3082 poller \u306b\u7a81\u3063\u8fbc\u3080\u3088\u308d\u3057\u3002","title":"mio 2016-09-02(0.6.0) 131,570"},{"location":"topics/misc/2016-10-15--rust-netlibs/#mio","text":"","title":"mio \u4f9d\u5b58"},{"location":"topics/misc/2016-10-15--rust-netlibs/#rotor-2016-05-21063-18705","text":"StateMachine \u3089\u3057\u3044\u304c\u2026\u3069\u3046\u3044\u3046\u69cb\u9020\u306a\u306e\u304b\u3055\u3063\u3071\u308a\u5206\u304b\u3089\u3093\uff57 dns, redis, http \u306a\u3093\u304b\u306e\u5b9f\u88c5\u3082\u3042\u308b\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u306f\u306a\u3063\u3066\u3044\u308b\u3093\u3060\u308d\u3046\u3051\u3069\u3082\u3002 rotor-stream \u3063\u3066\u306e\u3067\u3001\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u66f8\u3051\u308b\u307f\u305f\u3044\u3002","title":"rotor 2016-05-21(0.6.3) 18,705"},{"location":"topics/misc/2016-10-15--rust-netlibs/#tokio-core-2016-09-10010-3214","text":"\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3068 future \u306b\u3088\u308b\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30bf\u30a4\u30eb\u306e API future \u306f\u540c\u3058\u4f5c\u8005\u306e future crates \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\u3053\u306e future \u3067 mio \u3092\u76f4\u306b\u4f7f\u3063\u305f HTTP \u30b5\u30fc\u30d0\u30fc\u306f\u304b\u306a\u308a\u826f\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u51fa\u3057\u3066\u3044\u308b( https://aturon.github.io/blog/2016/08/11/futures/ ) tokio \u306f\u3053\u306e future \u3092\u4f7f\u3063\u3066 finagle \u307f\u305f\u3044\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f5c\u308b \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3001tokio-core \u304c mio \u3068 future \u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u90e8\u5206\u306e\u3088\u3046\u3060\u3002 tokio-service \u306b\u306f finagle \u306e Service \u307d\u3044\u30af\u30e9\u30b9\u304c\u3042\u308b\u3002 Finagle \u306f\u3044\u3044\u305e\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 pub fn main () - > Result <(), String > { let addr = try!( std : : net :: SocketAddr :: from_str ( \"127.0.0.1:10000\" ) . map_err ( | e | format !( \"parse: {}\" , e ))); let mut core = tokio_core : : reactor :: Core :: new () . unwrap (); let handle = core.handle() ; let listener = tokio_core : : net :: TcpListener :: bind ( & addr , & handle ) . unwrap (); let r = listener.incoming().for_each(move |(conn,_addr)| { let buf = vec! [ 0 u8 ; 1024 ] ; // tokio_core : : io :: read requires AsMut let iter = futures :: stream :: iter ( std :: iter :: repeat (( )) . map ( Ok ::<( ), std :: io :: Error > )); let f = iter.fold((conn,buf), |(conn,buf), _| { // use iter and fold to move ownership of buf to closure tokio_core : : io :: read ( conn , buf ) . and_then ( |( r , t , size ) | { if size == 0 { println ! ( \"closed\" ); Err( std : : io :: Error :: new ( std :: io :: ErrorKind :: BrokenPipe , \"closed\" )) } else { println!(\" recv [ {} ] : { } \" , size , std :: str :: from_utf8 (& t [ 0 .. size ] ) . unwrap ()); Ok (( r , t )) } } ) } ); handle . spawn ( f . then (| _ | Ok (()))); Ok (()) } ); core . run ( r ) . unwrap (); Ok (()) } read \u30eb\u30fc\u30d7\u304c\u7121\u9650\u30a4\u30c6\u30ec\u30fc\u30bf\u306e fold \u306b\u306a\u308b\u306e\u304c\u4e00\u5bf8\u6238\u60d1\u3046\u3002 \u3053\u308c\u3060\u3051\u306a\u3089\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u65b9\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u304c\u3001\u5225\u306e I/O \u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u306a\u308b\u3068 future \u306e\u5a01\u529b\u304c\u51fa\u3066\u304d\u305d\u3046\u3060\u3002","title":"tokio-core 2016-09-10(0.1.0) 3,214"},{"location":"topics/misc/2016-10-15--rust-netlibs/#mioco-2016-08-22081-3753","text":"\u30b3\u30eb\u30fc\u30c1\u30f3\u30b9\u30bf\u30a4\u30eb\u306e API. \u30b3\u30eb\u30fc\u30c1\u30f3\u306f coio \u4f5c\u8005\u306e context-rs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 pub fn main () - > Result <(), String > { mioco : : start ( || - > Result <( ), String > { let listener : mioco :: tcp :: TcpListener = try ! ( bind ()); loop { let mut conn : mioco :: tcp :: TcpStream = try ! ( listener . accept () . map_err ( | e | format !( \"accept: {}\" , e ))); mioco : : spawn ( move || - > Result <( ), String > { let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn.read(&mut buf [ 0 .. ] ) { Ok(0) => { println!(\" read : closed \"); return Ok(()); } Ok(n) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { return Err(format!(\" read : {} \" , e )); } } } } ); } } ) . unwrap () } mioco \u4f7f\u3046\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u51e6\u7406\u306e\u5168\u4f53\u3092 mioco::start \u3067\u62ec\u308b\u3002 mioco::spawn \u306f Rust \u306e\u30b9\u30ec\u30c3\u30c9\u3068\u540c\u3058\u66f8\u304d\u65b9\u3060\u304c\u3001\u30b0\u30ea\u30fc\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u3042\u308d\u3046\u3002 \u63a5\u7d9a\u6bce\u30b3\u30eb\u30fc\u30c1\u30f3\u306a\u306e\u3067\u898b\u901a\u3057\u304c\u826f\u3044\u3002mio \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u63a5\u7d9a\u4e00\u3064\u3060\u3051\u3060\u3051\u3069\u3001\u3053\u3061\u3089\u306f\u8907\u6570\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u308b\u3002 \u4e00\u822c\u306b\u63a5\u7d9a\u6bce\u306eOS\u30b9\u30ec\u30c3\u30c9\u65b9\u5f0f\u306f\u3001 Pros: \u63a5\u7d9a\u6bce\u306b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30af\u30ea\u30a2\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u3067\u3001\u30d0\u30c3\u30d5\u30a1\u51e6\u7406\u304c\u697d Cons: \u63a5\u7d9a\u6570(=\u30b9\u30ec\u30c3\u30c9\u6570)\u5897\u52a0\u306b\u3068\u3082\u306a\u3046\u6027\u80fd\u52a3\u5316 \u3068\u3044\u3046\u7279\u5fb4\u304c\u3042\u308b\u304c\u3001\u30b0\u30ea\u30fc\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u3042\u308c\u3070\u6b20\u70b9\u304c\u7121\u304f\u5229\u70b9\u3060\u3051\u4eab\u53d7\u3067\u304d\u308b\u306f\u305a\u3002 \u8ab0\u304b C10K \u3067\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u8a66\u3057\u3066\u307f\u3066;-)","title":"mioco 2016-08-22(0.8.1) 3,753"},{"location":"topics/misc/2016-10-15--rust-netlibs/#event-2015-01-05021-1384","text":"\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u306e\u30a4\u30d9\u30f3\u30c8\u30eb\u30fc\u30d7\u3002","title":"event 2015-01-05(0.2.1) 1,384"},{"location":"topics/misc/2016-10-15--rust-netlibs/#aio-2015-01-05001-666","text":"\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O \u3089\u3057\u3044\u3002 \u540d\u524d\u306f\u975e\u540c\u671fI/O\u307d\u3044\u304c?","title":"aio 2015-01-05(0.0.1) 666"},{"location":"topics/misc/2016-10-15--rust-netlibs/#asio-2016-05-05010-240","text":"\u975e\u540c\u671fI/O","title":"asio 2016-05-05(0.1.0) 240"},{"location":"topics/misc/2016-10-15--rust-netlibs/#futures-mio-2016-08-01010-112","text":"futures \u3068 mio \u7d44\u307f\u5408\u308f\u305b\u305f\u3084\u3064\u3067\u3001tokio \u306b\u767a\u5c55\u7684\u306b\u89e3\u6d88\u3057\u305f\u306e\u3067\u3042\u308d\u3046\u3002\u540c\u3058\u4f5c\u8005\u3060\u3057\u3002","title":"futures-mio 2016-08-01(0.1.0) 112"},{"location":"topics/misc/2016-10-15--rust-netlibs/#coio-rs","text":"\u30b3\u30eb\u30fc\u30c1\u30f3\u30b9\u30bf\u30a4\u30eb\u3002 \u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u540c\u4f5c\u8005\u306e context-rs 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 pub fn main () - > Result <(), String > { coio : : Scheduler :: new () . with_workers ( 4 ) . run ( || { let listener = coio :: net :: TcpListener :: bind ( \"127.0.0.1:10000\" ) . unwrap () ; loop { let ( mut conn , _addr ) = try ! ( listener . accept () . map_err ( | e | format !( \"accept: {}\" , e ))); coio : : spawn ( move || { let mut buf = [ 0 u8 ; 1024 ] ; loop { match conn . read ( & mut buf [ 0 .. ] ) { Ok ( 0 ) => { println !( \"read: closed\" ); break ; } Ok ( n ) => { println!(\" recv [ {} ] : { } \", n, std::str::from_utf8(&buf [ 0 .. n ] ).unwrap()); } Err(e) => { println!(\" read : {} \" , e ); break ; } } } } ); } } ) . unwrap () } \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f mioco \u3068\u307b\u3068\u3093\u3069\u540c\u3058\u3002 \u30b3\u30eb\u30fc\u30c1\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u540c\u3058\u3002","title":"coio-rs"},{"location":"topics/misc/2016-10-15--rust-netlibs/#_3","text":"std::net, net2, mio \u306e\u30b9\u30bf\u30c3\u30af\u306f\u30c7\u30d5\u30a1\u30af\u30c8\u307d\u3044\u3002 mio \u306e\u4e0a\u306b aio/future/coroutine/fsm \u30b9\u30bf\u30a4\u30eb\u306a\u3069\u8272\u3005\u306a crate \u304c\u3042\u308b\u611f\u3058\u304b\u306a\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/misc/2016-11-20--stumpwm/","tags":["Tech"],"text":"2016-11-20 stumpwm VirtualBox \u306b\u30bf\u30fc\u30df\u30ca\u30eb\u5168\u753b\u9762\u8868\u793a\u3057\u3066 screen, \u30d6\u30e9\u30a6\u30b6\u306a\u3069\u306f windows \u5074\u3001\u3068\u3044\u3046\u74b0\u5883\u3067\u3057\u3070\u3089\u304f\u904e\u3057\u3066\u304d\u305f\u306e\u3067\u3059\u304c\u3001web\u30d5\u30ed\u30f3\u30c8\u4f5c\u308b\u6642\u306b\u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u304c\u3081\u3093\u3069\u3044\u3002 \u3068\u3044\u3046\u308f\u3051\u3067\u3001linux \u5185\u306b firefox \u3082\u52d5\u304b\u305d\u3046\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u30de\u30cd\u30fc\u30b8\u30e3\u306f\u30bf\u30a4\u30eb\u578b\u3067\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u79fb\u52d5\u3068\u3044\u3046\u30b9\u30bf\u30a4\u30eb\u306b\u3057\u307e\u3059\u3002 \u30bf\u30a4\u30eb\u578b\u30a6\u30a3\u30f3\u30c9\u30a6\u30de\u30cd\u30fc\u30b8\u30e3\u306f\u8272\u3005\u3042\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u4e0a\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u4e00\u3064\u30d6\u30e9\u30a6\u30b6\u4e00\u3064\u306e\u5358\u7d14\u306a\u4f7f\u3044\u65b9\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u4f4e\u305d\u3046\u306a\u306e\u3067\u3002screen \u307d\u3044\u64cd\u4f5c\u4f53\u7cfb\u3089\u3057\u3044 stumpwm \u306b\u3057\u307e\u3059\u3002 install \u7701\u7565\u3002 \u64cd\u4f5c \u8d77\u52d5\u3059\u308b\u3068\u4f55\u3082\u306a\u3057 \u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u30e1\u30cb\u30e5\u30fc\u51fa\u306a\u3044 \u7d42\u4e86\u3059\u3089\u3067\u304d\u307e\u305b\u3093w \u306a\u3064\u304b\u3057\u3044\u3053\u306e\u611f\u3058\u3002 \u307e\u305a\u6700\u91cd\u8981\u30b3\u30de\u30f3\u30c9\u3002C-t ? \u3053\u3053\u3067\u51fa\u3066\u304f\u308b\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u3092 C-t \u306e\u5f8c\u306b\u6253\u3066\u3070\u3044\u3044\u3067\u3059\u3002 \u3067\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u8d77\u52d5\u3002C-t c gnome-terminal \u307f\u305f\u3044\u3002\u4eca\u306f rxvt \u4f7f\u3063\u3066\u308b\u3093\u3067\u5f8c\u3067\u5909\u3048\u3088\u3046\u3002 \u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 firefox \u3092\u8d77\u52d5\u3002\u3069\u3063\u3061\u3082\u5168\u753b\u9762\u3002\u79fb\u52d5\u306f C-t n, C-t p. \u3082\u3057\u304f\u306f C-t [0-9] \u3067\u3002 \u3061\u306a\u307f\u306b C-t ! \u3067\u30b7\u30a7\u30eb\u30b3\u30de\u30f3\u30c9\u6253\u3066\u308b\u306e\u3067\u3001\u3053\u3053\u304b\u3089 firefox \u306a\u308a urxvt \u8d77\u52d5\u3057\u3066\u3082\u3088\u3044\u3067\u3059\u3002 \u6b21\u306b\u753b\u9762\u5206\u5272\u3002 C-t s \u3067\u7e26\u5206\u5272\u3001C-t S \u3067\u6a2a\u5206\u5272\u3002 \u79fb\u52d5\u306f C-t o \u3068 C-t TAB \u3067\u3002 \u30a2\u30d7\u30ea\u306e\u63cf\u753b\u9818\u57df\u3072\u3068\u3064\u3092\u30a6\u30a3\u30f3\u30c9\u30a6\u3001\u5206\u5272\u3057\u305f\u67a0\u3072\u3068\u3064\u3092\u30d5\u30ec\u30fc\u30e0\u3068\u3044\u3046\u3088\u3046\u3067\u3059\u3002 \u3068\u308a\u3042\u3048\u305a\u3053\u308c\u3067\u4f5c\u696d\u3067\u304d\u308b\u305e\u3068\u3002","title":"window manager \u3092 Stumpwm \u3078\u79fb\u884c"},{"location":"topics/misc/2016-11-20--stumpwm/#stumpwm","text":"VirtualBox \u306b\u30bf\u30fc\u30df\u30ca\u30eb\u5168\u753b\u9762\u8868\u793a\u3057\u3066 screen, \u30d6\u30e9\u30a6\u30b6\u306a\u3069\u306f windows \u5074\u3001\u3068\u3044\u3046\u74b0\u5883\u3067\u3057\u3070\u3089\u304f\u904e\u3057\u3066\u304d\u305f\u306e\u3067\u3059\u304c\u3001web\u30d5\u30ed\u30f3\u30c8\u4f5c\u308b\u6642\u306b\u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u304c\u3081\u3093\u3069\u3044\u3002 \u3068\u3044\u3046\u308f\u3051\u3067\u3001linux \u5185\u306b firefox \u3082\u52d5\u304b\u305d\u3046\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u30de\u30cd\u30fc\u30b8\u30e3\u306f\u30bf\u30a4\u30eb\u578b\u3067\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u79fb\u52d5\u3068\u3044\u3046\u30b9\u30bf\u30a4\u30eb\u306b\u3057\u307e\u3059\u3002 \u30bf\u30a4\u30eb\u578b\u30a6\u30a3\u30f3\u30c9\u30a6\u30de\u30cd\u30fc\u30b8\u30e3\u306f\u8272\u3005\u3042\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u4e0a\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u4e00\u3064\u30d6\u30e9\u30a6\u30b6\u4e00\u3064\u306e\u5358\u7d14\u306a\u4f7f\u3044\u65b9\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u4f4e\u305d\u3046\u306a\u306e\u3067\u3002screen \u307d\u3044\u64cd\u4f5c\u4f53\u7cfb\u3089\u3057\u3044 stumpwm \u306b\u3057\u307e\u3059\u3002","title":"stumpwm"},{"location":"topics/misc/2016-11-20--stumpwm/#install","text":"\u7701\u7565\u3002","title":"install"},{"location":"topics/misc/2016-11-20--stumpwm/#_1","text":"\u8d77\u52d5\u3059\u308b\u3068\u4f55\u3082\u306a\u3057 \u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u30e1\u30cb\u30e5\u30fc\u51fa\u306a\u3044 \u7d42\u4e86\u3059\u3089\u3067\u304d\u307e\u305b\u3093w \u306a\u3064\u304b\u3057\u3044\u3053\u306e\u611f\u3058\u3002 \u307e\u305a\u6700\u91cd\u8981\u30b3\u30de\u30f3\u30c9\u3002C-t ? \u3053\u3053\u3067\u51fa\u3066\u304f\u308b\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u3092 C-t \u306e\u5f8c\u306b\u6253\u3066\u3070\u3044\u3044\u3067\u3059\u3002 \u3067\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u8d77\u52d5\u3002C-t c gnome-terminal \u307f\u305f\u3044\u3002\u4eca\u306f rxvt \u4f7f\u3063\u3066\u308b\u3093\u3067\u5f8c\u3067\u5909\u3048\u3088\u3046\u3002 \u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 firefox \u3092\u8d77\u52d5\u3002\u3069\u3063\u3061\u3082\u5168\u753b\u9762\u3002\u79fb\u52d5\u306f C-t n, C-t p. \u3082\u3057\u304f\u306f C-t [0-9] \u3067\u3002 \u3061\u306a\u307f\u306b C-t ! \u3067\u30b7\u30a7\u30eb\u30b3\u30de\u30f3\u30c9\u6253\u3066\u308b\u306e\u3067\u3001\u3053\u3053\u304b\u3089 firefox \u306a\u308a urxvt \u8d77\u52d5\u3057\u3066\u3082\u3088\u3044\u3067\u3059\u3002 \u6b21\u306b\u753b\u9762\u5206\u5272\u3002 C-t s \u3067\u7e26\u5206\u5272\u3001C-t S \u3067\u6a2a\u5206\u5272\u3002 \u79fb\u52d5\u306f C-t o \u3068 C-t TAB \u3067\u3002 \u30a2\u30d7\u30ea\u306e\u63cf\u753b\u9818\u57df\u3072\u3068\u3064\u3092\u30a6\u30a3\u30f3\u30c9\u30a6\u3001\u5206\u5272\u3057\u305f\u67a0\u3072\u3068\u3064\u3092\u30d5\u30ec\u30fc\u30e0\u3068\u3044\u3046\u3088\u3046\u3067\u3059\u3002 \u3068\u308a\u3042\u3048\u305a\u3053\u308c\u3067\u4f5c\u696d\u3067\u304d\u308b\u305e\u3068\u3002","title":"\u64cd\u4f5c"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/","tags":["Tech"],"text":"2018-12-05 \u306f\u3058\u3081\u306b swagger \u304b\u3089\u30b5\u30fc\u30d0\u30fc\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3057\u305f\u3044 TypeScript \u7528 \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u751f\u6210\u30b3\u30fc\u30c9\u3067\u3084\u3063\u3066\u307b\u3057\u3044\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u306f\u30de\u30ca\u30fc\u306b\u305d\u3063\u3066\u95a2\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u306b\u3057\u305f\u3044\u3002 HTTP \u306e\u5165\u51fa\u529b\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u307b\u3057\u3044 TypeScript \u306a\u306e\u3067\u3001\u304d\u3061\u3093\u3068\u5165\u51fa\u529b\u306e\u578b\u3092\u5b9a\u7fa9\u3057\u3066\u307b\u3057\u3044\u3002 \u3064\u3044\u3067\u306b\u5b9f\u88c5\u95a2\u6570\u306f\u305d\u306e\u578b\u3092\u6271\u3046\u5f62\u306b\u3057\u3066\u307b\u3057\u3044\u3002 \u3068\u3044\u3046\u3082\u306e\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u63a2\u3057\u3066\u3082\u898b\u3064\u304b\u3089\u306a\u3044\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002 \u4f7f\u3044\u65b9 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ npm install --save swagger-codegen-typescript-koa2 edit swagger swagger \u3092\u66f8\u304d\u307e\u3059\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2 \u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 swagger: '2.0' info: version: '1.0.0' title: swagger test schemes: - http consumes: - application/json produces: - application/json paths: /hello/{user_id}: get: summary: get user operationId: get_user description: | get user parameters: - in: path required: true name: user_id type: integer description: user_id responses: '200': description: OK schema: type: object properties: user_id: type: integer hello: type: string '400': description: Error schema: $ref: '#/definitions/ErrorResponse' definitions: ErrorResponse: type: object required: - code - name - message properties: code: type: integer name: type: string message: type: string dtsgenerator \u4eca\u306f definition \u306a\u3069\u306e\u578b\u306f\u751f\u6210\u3057\u306a\u3044\u306e\u3067\u3001dtsgenerator \u4f7f\u3044\u307e\u3059\u3002 2.0 \u306f\u51fa\u529b\u5f62\u5f0f\u304c\u5909\u308f\u3063\u305f\u3088\u3046\u3067\u3059\u304c\u672a\u5bfe\u5fdc\u3067\u3059\u30021.2 \u3092\u4f7f\u3044\u307e\u3059\u3002 -n \u306f\u7a7a\u6587\u5b57\u3001\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306f swagger.d.ts \u3067\u3059\u3002 1 $ npx dtsgenerator@1.2.0 -n \"\" -o swagger.d.ts < swagger.yaml run codegen \u6b21\u306b swagger-codegen-typescript-koa2. \u30b3\u30de\u30f3\u30c9\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u306b swagger \u30d5\u30a1\u30a4\u30eb\u3001\u7b2c\u4e8c\u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 1 $ npx swagger-codegen-typescript-koa2 swagger.yaml dist/swagger/codegen.ts codegen.ts \u304c\u4f5c\u3089\u308c\u305f\u306e\u3067\u3061\u3087\u3063\u3068\u898b\u3066\u307f\u307e\u3059: operationId -> namespace 1 export namespace get_user { operationId \u306e\u540d\u524d\u7a7a\u9593\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002 type Reqeust 1 2 3 export type Request = { user_id : number ; } parameters \u306e\u5185\u5bb9\u306b\u5bfe\u5fdc\u3057\u305f\u578b Request \u304c\u4f5c\u3089\u308c\u307e\u3059\u3002 API \u547c\u3073\u51fa\u3057\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f in:body \u3082 in:path \u3082 validation \u3055\u308c\u3066\u3053\u306e\u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5165\u308c\u3089\u308c\u307e\u3059\u3002 type:string, format:date \u3068\u304b\u306f string \u3067\u6765\u307e\u3059\u3002 \u305d\u306e\u3046\u3061 Date \u3067\u6765\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3067\u3059\u3002 Response 1 2 3 4 5 6 7 8 9 10 11 export type Response200 = { user_id? : string hello? : string }; export type Response400 = { error_code? : number }; export type Response = { status : number ; body : Response200 | Response400 ; }; responses \u306e\u5fdc\u7b54\u30b9\u30c6\u30fc\u30bf\u30b9\u6bce\u306b ResponseXXX \u306a\u578b\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002 \u3055\u3089\u306b\u3001\u305d\u308c\u3089\u3092\u5408\u6210\u3057\u305f\u578b\u3092 body \u306b\u6301\u3064 Response \u578b\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002 Handler 1 2 3 export interface Handler { ( req : Request , ctx : KoaRouter.IRouterContext ) : Promise < Response > ; }; \u4e0a\u3067\u898b\u305f Request \u3092\u53d7\u3051\u3064\u3051 Response \u3092\u8fd4\u3059\u95a2\u6570\u578b\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002 \u30d7\u30ed\u30b0\u30e9\u30de\u306f\u3053\u306e\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002 Router 1 2 3 4 5 6 7 8 9 10 export interface Routes { get_user? : get_user.Handler ; } export class Router extends KoaRouter { swagger : Routes = {}; } export function setup ( app : Koa , swagger_filepath : string , routes_dirpath : string ) : Router { ... } \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u7528\u306e\u95a2\u6570\u3068\u578b\u3067\u3059\u3002 \u3042\u3068\u3067\u898b\u307e\u3059\u3002 \u5b9f\u88c5 \u307e\u305a\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ npm install --save koa koa-router koa-cors koa-bodyparser swagger2-koa bignumber $ npm install --save-dev ts-node @types/koa-cors @types/koa-router \u30b5\u30fc\u30d0\u30fc\u3092\u66f8\u304d\u307e\u3059\u3002 1 $ cat index.ts import ```TypeScript:index.ts import * as Koa from 'koa'; import * as bodyParser from 'koa-bodyparser'; import * as koaCors from 'koa-cors'; import * as koaRouter from 'koa-router'; import * as api from './codegen'; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \u3055\u3063\u304d\u751f\u6210\u3057\u305f codegen . ts \u3092 import \u3057\u307e\u3059 \u3002 ### Handler \u4e0a\u3067\u898b\u305f Handler \u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059 \u3002 function \u6587\u3067\u306f\u306a\u304f \u3001 arrow \u3067\u5b9a\u7fa9\u3057\u305f\u95a2\u6570\u3092\u5909\u6570\u306b\u5165\u308c\u308b\u5f62\u306b\u3059\u308b\u3068\u5165\u51fa\u529b\u306e\u578b\u3092\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059 \u3002 ``` TypeScript : index . ts const get_user : api . get_user . Handler = async ( req , ctx ) => { let res200 : api . get_user . Response200 | undefined ; let res400 : api . get_user . Response400 | undefined ; if ( req . user_id === 20070830 ) { res200 = { user_id : req . user_id , hello : 'hello Miku' } } else if ( req . user_id === 20071227 ) { res200 = { user_id : req . user_id , hello : 'hello Rin' } } else { res400 = { code : 404 , name : 'not found' , message : 'not found' }; return { status : 400 , body : res400 ! }; } return { status : 200 , body : res200 ! }; } Koa \u69cb\u7bc9\u3068\u30cf\u30f3\u30c9\u30e9\u767b\u9332 ```TypeScript:index.ts function main() { const app = new Koa(); app.use(koaCors()); app.use(bodyParser()); 1 2 3 4 const router = api . setup ( app , './swagger.yaml' , '' ); router . swagger . get_user = get_user ; app . listen ( 3000 , () => { console . log ( 'listen on 3000' )}); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 api . setup \u306f\u4e0a\u3067\u898b\u305f\u3001\u81ea\u52d5\u751f\u6210\u30b3\u30fc\u30c9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u95a2\u6570\u3067\u3059\u3002 \u7b2c\u4e00\u5f15\u6570\u306b Koa \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3001\u7b2c\u4e8c\u5f15\u6570\u306b swagger \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u7b2c\u4e09\u5f15\u6570\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u7a7a\u6587\u5b57\u5217\u3067\u3002 swagger \u30d5\u30a1\u30a4\u30eb\u3092\u6e21\u3057\u3066\u308b\u306e\u304c\u30a4\u30de\u30a4\u30c1\u3067\u3059\u304c\u3001\u3053\u308c\u306f validation \u3092\u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\u305d\u306e\u3046\u3061 codegen \u306e\u6383\u304d\u51fa\u3059\u30b3\u30fc\u30c9\u306b\u5165\u308c\u305f\u3044\u3067\u3059\u3002 \u5f97\u3089\u308c\u305f Router \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e swagger . get_user \u5909\u6570\u306b\u5148\u7a0b\u4f5c\u3063\u305f get_user \u95a2\u6570\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002 \u8981\u3059\u308b\u306b swagger . get_user \u306f ` GET users / { user_id }` \u3067\u547c\u3070\u308c\u308b\u95a2\u6570\u306e\u7f6e\u304d\u5834\u6240\u3067\u3059\u3002 \u578b\u6307\u5b9a\u3057\u3066\u3042\u308b\u306e\u3067\u3001 api . Handler \u3067\u306a\u3044\u306a\u3089 tsc \u3067\u5f3e\u304b\u308c\u307e\u3059\u3002 \u305d\u3057\u3066\u6700\u5f8c\u306b listen . ## \u8d77\u52d5 ``` console $ ts - node index . ts koa deprecated Support for generators will be removed in v3 . See the documentation for examples of how to convert old middleware https : // github . com / koajs / koa / blob / master / docs / migration . md index . ts : 24 : 9 listen on 3000 1 2 3 4 5 6 7 8 $ curl 'http://localhost:3000/hello/20070830' ; echo {\"user_id\":20070830,\"hello\":\"hello Miku\"} $ curl 'http://localhost:3000/hello/20071227' ; echo {\"user_id\":20071227,\"hello\":\"hello Rin\"} $ curl 'http://localhost:3000/hello/20060217' ; echo {\"code\":404,\"name\":\"not found\",\"message\":\"not found\"} user_id \u306f integer \u3067\u3057\u305f\u3002\u578b\u30a8\u30e9\u30fc\u306b\u3059\u308b\u3068... 1 2 $ curl 'http://localhost:3000/hello/rin' ; echo {\"code\":\"SWAGGER_REQUEST_VALIDATION_FAILED\",\"errors\":[{\"actual\":\"rin\",\"expected\":{\"type\":\"integer\"},\"where\":\"path\"}]} \u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002 \u307e\u3068\u3081 swagger2 \u304b\u3089 TypeScript \u7528\u306e\u30b5\u30fc\u30d0\u30fc\u7528\u306e\u30b9\u30bf\u30d6\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30c4\u30fc\u30eb\u4f5c\u308a\u307e\u3057\u305f\u3002 ad-hoc \u306a\u4f5c\u308a\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002 swagger driven \u306a\u958b\u767a\u3067\u3001TypeScript \u3067\u30b5\u30fc\u30d0\u30fc\u66f8\u304f\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002 URLs npm https://www.npmjs.com/package/swagger-codegen-typescript-koa2 github https://github.com/dai1975/swagger-codegen-typescript-koa2","title":"swagger-codegen-typescript-koa2"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#_1","text":"swagger \u304b\u3089\u30b5\u30fc\u30d0\u30fc\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3057\u305f\u3044 TypeScript \u7528 \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u751f\u6210\u30b3\u30fc\u30c9\u3067\u3084\u3063\u3066\u307b\u3057\u3044\u3002\u30d7\u30ed\u30b0\u30e9\u30de\u306f\u30de\u30ca\u30fc\u306b\u305d\u3063\u3066\u95a2\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u306b\u3057\u305f\u3044\u3002 HTTP \u306e\u5165\u51fa\u529b\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u307b\u3057\u3044 TypeScript \u306a\u306e\u3067\u3001\u304d\u3061\u3093\u3068\u5165\u51fa\u529b\u306e\u578b\u3092\u5b9a\u7fa9\u3057\u3066\u307b\u3057\u3044\u3002 \u3064\u3044\u3067\u306b\u5b9f\u88c5\u95a2\u6570\u306f\u305d\u306e\u578b\u3092\u6271\u3046\u5f62\u306b\u3057\u3066\u307b\u3057\u3044\u3002 \u3068\u3044\u3046\u3082\u306e\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u63a2\u3057\u3066\u3082\u898b\u3064\u304b\u3089\u306a\u3044\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002","title":"\u306f\u3058\u3081\u306b"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#_2","text":"","title":"\u4f7f\u3044\u65b9"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#_3","text":"1 $ npm install --save swagger-codegen-typescript-koa2","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#edit-swagger","text":"swagger \u3092\u66f8\u304d\u307e\u3059\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2 \u3067\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 swagger: '2.0' info: version: '1.0.0' title: swagger test schemes: - http consumes: - application/json produces: - application/json paths: /hello/{user_id}: get: summary: get user operationId: get_user description: | get user parameters: - in: path required: true name: user_id type: integer description: user_id responses: '200': description: OK schema: type: object properties: user_id: type: integer hello: type: string '400': description: Error schema: $ref: '#/definitions/ErrorResponse' definitions: ErrorResponse: type: object required: - code - name - message properties: code: type: integer name: type: string message: type: string","title":"edit swagger"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#dtsgenerator","text":"\u4eca\u306f definition \u306a\u3069\u306e\u578b\u306f\u751f\u6210\u3057\u306a\u3044\u306e\u3067\u3001dtsgenerator \u4f7f\u3044\u307e\u3059\u3002 2.0 \u306f\u51fa\u529b\u5f62\u5f0f\u304c\u5909\u308f\u3063\u305f\u3088\u3046\u3067\u3059\u304c\u672a\u5bfe\u5fdc\u3067\u3059\u30021.2 \u3092\u4f7f\u3044\u307e\u3059\u3002 -n \u306f\u7a7a\u6587\u5b57\u3001\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306f swagger.d.ts \u3067\u3059\u3002 1 $ npx dtsgenerator@1.2.0 -n \"\" -o swagger.d.ts < swagger.yaml","title":"dtsgenerator"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#run-codegen","text":"\u6b21\u306b swagger-codegen-typescript-koa2. \u30b3\u30de\u30f3\u30c9\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u306b swagger \u30d5\u30a1\u30a4\u30eb\u3001\u7b2c\u4e8c\u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 1 $ npx swagger-codegen-typescript-koa2 swagger.yaml dist/swagger/codegen.ts codegen.ts \u304c\u4f5c\u3089\u308c\u305f\u306e\u3067\u3061\u3087\u3063\u3068\u898b\u3066\u307f\u307e\u3059:","title":"run codegen"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#operationid-namespace","text":"1 export namespace get_user { operationId \u306e\u540d\u524d\u7a7a\u9593\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002","title":"operationId -&gt; namespace"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#type-reqeust","text":"1 2 3 export type Request = { user_id : number ; } parameters \u306e\u5185\u5bb9\u306b\u5bfe\u5fdc\u3057\u305f\u578b Request \u304c\u4f5c\u3089\u308c\u307e\u3059\u3002 API \u547c\u3073\u51fa\u3057\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f in:body \u3082 in:path \u3082 validation \u3055\u308c\u3066\u3053\u306e\u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5165\u308c\u3089\u308c\u307e\u3059\u3002 type:string, format:date \u3068\u304b\u306f string \u3067\u6765\u307e\u3059\u3002 \u305d\u306e\u3046\u3061 Date \u3067\u6765\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3067\u3059\u3002","title":"type Reqeust"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#response","text":"1 2 3 4 5 6 7 8 9 10 11 export type Response200 = { user_id? : string hello? : string }; export type Response400 = { error_code? : number }; export type Response = { status : number ; body : Response200 | Response400 ; }; responses \u306e\u5fdc\u7b54\u30b9\u30c6\u30fc\u30bf\u30b9\u6bce\u306b ResponseXXX \u306a\u578b\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002 \u3055\u3089\u306b\u3001\u305d\u308c\u3089\u3092\u5408\u6210\u3057\u305f\u578b\u3092 body \u306b\u6301\u3064 Response \u578b\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002","title":"Response"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#handler","text":"1 2 3 export interface Handler { ( req : Request , ctx : KoaRouter.IRouterContext ) : Promise < Response > ; }; \u4e0a\u3067\u898b\u305f Request \u3092\u53d7\u3051\u3064\u3051 Response \u3092\u8fd4\u3059\u95a2\u6570\u578b\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002 \u30d7\u30ed\u30b0\u30e9\u30de\u306f\u3053\u306e\u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002","title":"Handler"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#router","text":"1 2 3 4 5 6 7 8 9 10 export interface Routes { get_user? : get_user.Handler ; } export class Router extends KoaRouter { swagger : Routes = {}; } export function setup ( app : Koa , swagger_filepath : string , routes_dirpath : string ) : Router { ... } \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u7528\u306e\u95a2\u6570\u3068\u578b\u3067\u3059\u3002 \u3042\u3068\u3067\u898b\u307e\u3059\u3002","title":"Router"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#_4","text":"\u307e\u305a\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ npm install --save koa koa-router koa-cors koa-bodyparser swagger2-koa bignumber $ npm install --save-dev ts-node @types/koa-cors @types/koa-router \u30b5\u30fc\u30d0\u30fc\u3092\u66f8\u304d\u307e\u3059\u3002 1 $ cat index.ts","title":"\u5b9f\u88c5"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#import","text":"```TypeScript:index.ts import * as Koa from 'koa'; import * as bodyParser from 'koa-bodyparser'; import * as koaCors from 'koa-cors'; import * as koaRouter from 'koa-router'; import * as api from './codegen'; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 \u3055\u3063\u304d\u751f\u6210\u3057\u305f codegen . ts \u3092 import \u3057\u307e\u3059 \u3002 ### Handler \u4e0a\u3067\u898b\u305f Handler \u95a2\u6570\u3092\u5b9f\u88c5\u3057\u307e\u3059 \u3002 function \u6587\u3067\u306f\u306a\u304f \u3001 arrow \u3067\u5b9a\u7fa9\u3057\u305f\u95a2\u6570\u3092\u5909\u6570\u306b\u5165\u308c\u308b\u5f62\u306b\u3059\u308b\u3068\u5165\u51fa\u529b\u306e\u578b\u3092\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059 \u3002 ``` TypeScript : index . ts const get_user : api . get_user . Handler = async ( req , ctx ) => { let res200 : api . get_user . Response200 | undefined ; let res400 : api . get_user . Response400 | undefined ; if ( req . user_id === 20070830 ) { res200 = { user_id : req . user_id , hello : 'hello Miku' } } else if ( req . user_id === 20071227 ) { res200 = { user_id : req . user_id , hello : 'hello Rin' } } else { res400 = { code : 404 , name : 'not found' , message : 'not found' }; return { status : 400 , body : res400 ! }; } return { status : 200 , body : res200 ! }; }","title":"import"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#koa","text":"```TypeScript:index.ts function main() { const app = new Koa(); app.use(koaCors()); app.use(bodyParser()); 1 2 3 4 const router = api . setup ( app , './swagger.yaml' , '' ); router . swagger . get_user = get_user ; app . listen ( 3000 , () => { console . log ( 'listen on 3000' )}); } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 api . setup \u306f\u4e0a\u3067\u898b\u305f\u3001\u81ea\u52d5\u751f\u6210\u30b3\u30fc\u30c9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u95a2\u6570\u3067\u3059\u3002 \u7b2c\u4e00\u5f15\u6570\u306b Koa \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3001\u7b2c\u4e8c\u5f15\u6570\u306b swagger \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u7b2c\u4e09\u5f15\u6570\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u7a7a\u6587\u5b57\u5217\u3067\u3002 swagger \u30d5\u30a1\u30a4\u30eb\u3092\u6e21\u3057\u3066\u308b\u306e\u304c\u30a4\u30de\u30a4\u30c1\u3067\u3059\u304c\u3001\u3053\u308c\u306f validation \u3092\u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\u305d\u306e\u3046\u3061 codegen \u306e\u6383\u304d\u51fa\u3059\u30b3\u30fc\u30c9\u306b\u5165\u308c\u305f\u3044\u3067\u3059\u3002 \u5f97\u3089\u308c\u305f Router \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e swagger . get_user \u5909\u6570\u306b\u5148\u7a0b\u4f5c\u3063\u305f get_user \u95a2\u6570\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002 \u8981\u3059\u308b\u306b swagger . get_user \u306f ` GET users / { user_id }` \u3067\u547c\u3070\u308c\u308b\u95a2\u6570\u306e\u7f6e\u304d\u5834\u6240\u3067\u3059\u3002 \u578b\u6307\u5b9a\u3057\u3066\u3042\u308b\u306e\u3067\u3001 api . Handler \u3067\u306a\u3044\u306a\u3089 tsc \u3067\u5f3e\u304b\u308c\u307e\u3059\u3002 \u305d\u3057\u3066\u6700\u5f8c\u306b listen . ## \u8d77\u52d5 ``` console $ ts - node index . ts koa deprecated Support for generators will be removed in v3 . See the documentation for examples of how to convert old middleware https : // github . com / koajs / koa / blob / master / docs / migration . md index . ts : 24 : 9 listen on 3000 1 2 3 4 5 6 7 8 $ curl 'http://localhost:3000/hello/20070830' ; echo {\"user_id\":20070830,\"hello\":\"hello Miku\"} $ curl 'http://localhost:3000/hello/20071227' ; echo {\"user_id\":20071227,\"hello\":\"hello Rin\"} $ curl 'http://localhost:3000/hello/20060217' ; echo {\"code\":404,\"name\":\"not found\",\"message\":\"not found\"} user_id \u306f integer \u3067\u3057\u305f\u3002\u578b\u30a8\u30e9\u30fc\u306b\u3059\u308b\u3068... 1 2 $ curl 'http://localhost:3000/hello/rin' ; echo {\"code\":\"SWAGGER_REQUEST_VALIDATION_FAILED\",\"errors\":[{\"actual\":\"rin\",\"expected\":{\"type\":\"integer\"},\"where\":\"path\"}]} \u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002","title":"Koa \u69cb\u7bc9\u3068\u30cf\u30f3\u30c9\u30e9\u767b\u9332"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#_5","text":"swagger2 \u304b\u3089 TypeScript \u7528\u306e\u30b5\u30fc\u30d0\u30fc\u7528\u306e\u30b9\u30bf\u30d6\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30c4\u30fc\u30eb\u4f5c\u308a\u307e\u3057\u305f\u3002 ad-hoc \u306a\u4f5c\u308a\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002 swagger driven \u306a\u958b\u767a\u3067\u3001TypeScript \u3067\u30b5\u30fc\u30d0\u30fc\u66f8\u304f\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u3089\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002","title":"\u307e\u3068\u3081"},{"location":"topics/misc/2018-12-05--swagger-codegen-typescript-koa2/#urls","text":"npm https://www.npmjs.com/package/swagger-codegen-typescript-koa2 github https://github.com/dai1975/swagger-codegen-typescript-koa2","title":"URLs"}]}